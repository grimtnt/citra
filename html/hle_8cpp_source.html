<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Citra: src/audio_core/hle/hle.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="doc-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Citra
   </div>
   <div id="projectbrief">Nintendo 3DS emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hle_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">hle.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="hle_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2017 Citra Emulator Project</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Licensed under GPLv2 or any later version</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Refer to the license.txt file included.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;unordered_set&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="audio__types_8h.html">audio_core/audio_types.h</a>&quot;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="audio__core_2hle_2common_8h.html">audio_core/hle/common.h</a>&quot;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="hle_8h.html">audio_core/hle/hle.h</a>&quot;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="mixers_8h.html">audio_core/hle/mixers.h</a>&quot;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="audio__core_2hle_2shared__memory_8h.html">audio_core/hle/shared_memory.h</a>&quot;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="source_8h.html">audio_core/hle/source.h</a>&quot;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sink__details_8h.html">audio_core/sink_details.h</a>&quot;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assert_8h.html">common/assert.h</a>&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common__types_8h.html">common/common_types.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">common/logging/log.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="core_8h.html">core/core.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="core__timing_8h.html">core/core_timing.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="dsp__dsp_8h.html">core/hle/service/dsp/dsp_dsp.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="settings_8h.html">core/settings.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="hle_8cpp.html#a13f887e2b5122c7ba5160514cff01783">   21</a></span>&#160;<span class="keyword">using</span> <a class="code" href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html#a33adad8f8a8009bef3f429779e2850a8">InterruptType</a> = <a class="code" href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html#a33adad8f8a8009bef3f429779e2850a8">Service::DSP::DSP_DSP::InterruptType</a>;</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="keyword">using</span> <a class="code" href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html">Service::DSP::DSP_DSP</a>;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_audio_core.html">AudioCore</a> {</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="namespace_audio_core.html#a3c183d00949fa664c7aa06ba2839b110">   26</a></span>&#160;<span class="keyword">static</span> constexpr <a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a> <a class="code" href="namespace_audio_core.html#a3c183d00949fa664c7aa06ba2839b110">audio_frame_ticks</a>{1310252ull}; </div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno"><a class="line" href="namespace_audio_core.html#a5a135c4f8e70425151d92496795a9cb3">   28</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> std::unordered_set&lt;u64&gt; <a class="code" href="namespace_audio_core.html#a5a135c4f8e70425151d92496795a9cb3">titles_output_allowed_shell_closed</a> = {</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// Nintendo 3DS Sound</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    0x0004001000020500, 0x0004001000021500, 0x0004001000022500,</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    0x0004001000026500, 0x0004001000027500, 0x0004001000028500,</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;};</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html">   34</a></span>&#160;<span class="keyword">struct </span><a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html">DspHle::Impl</a> final {</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="keyword">public</span>:</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keyword">explicit</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a89db714fad62f3bc5bb4f9a42ffcb8cd">Impl</a>(<a class="code" href="class_audio_core_1_1_dsp_hle.html">DspHle</a>&amp; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a54bb7832d5cbdcab00a520e82f3c4c24">parent</a>);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a5718f6c9956f0821827504552dc77088">~Impl</a>();</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500">DspState</a> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a10b89a11436f7452156493074ba33fe2">GetDspState</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    std::vector&lt;u8&gt; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3564081d68f932686c999fb9d56adf60">PipeRead</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> length);</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    std::size_t <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a876b6b3daf7c5021e0a31448b888c0fe">GetPipeReadableSize</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number) <span class="keyword">const</span>;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8cc75ab29be4d9c8272f997d88ba038b">PipeWrite</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number, <span class="keyword">const</span> std::vector&lt;u8&gt;&amp; buffer);</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    std::array&lt;u8, Memory::DSP_RAM_SIZE&gt;&amp; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a4829313615ebac6e01f04a5fd0b9e6fe">GetDspMemory</a>();</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a92b842904cd30a33571d5254b2b5c4e8">SetServiceToInterrupt</a>(std::weak_ptr&lt;DSP_DSP&gt; dsp);</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a81fb74000f9c2ce306a9f8fa39f170dc">IsOutputAllowed</a>();</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">private</span>:</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a859e5542c546d70b44126d5e422b377b">ResetPipes</a>();</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ad3c5b4c1f8ffda608dab3af43c792949">WriteU16</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number, <a class="code" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> value);</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ae6838d5de620e8c3063c8c5c916f6e15">AudioPipeWriteStructAddresses</a>();</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    std::size_t <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a6f18492244e69e10b8a8cbee46e3d850">CurrentRegionIndex</a>() <span class="keyword">const</span>;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>&amp; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#abe3216cdf3026bc7831270689e2608d8">ReadRegion</a>();</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>&amp; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0ace3ccfcb1cd08b6a1d1c06e90824d9">WriteRegion</a>();</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="namespace_audio_core.html#a813444aa5d69549f03c60eda40103cbe">StereoFrame16</a> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a288b1b9295faf1f2fab7292f6d69a340">GenerateCurrentFrame</a>();</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0565622678cba5a9e0bebdc4e2df9601">Tick</a>();</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aa5120d6c133ddf119954908b38ab1c31">AudioTickCallback</a>(<a class="code" href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a> cycles_late);</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">   64</a></span>&#160;    <a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500">DspState</a> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">dsp_state</a>{<a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500ad15305d7a4e34e02489c74a5ef542f36">DspState::Off</a>};</div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3a4ae581f97d8e16a206af0f2d61b3f9">   65</a></span>&#160;    std::array&lt;std::vector&lt;u8&gt;, <a class="code" href="namespace_audio_core.html#abb56de564925a26265b0c0905f00220b">num_dsp_pipe</a>&gt; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3a4ae581f97d8e16a206af0f2d61b3f9">pipe_data</a>{};</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">   67</a></span>&#160;    <a class="code" href="namespace_audio_core_1_1_h_l_e.html#union_audio_core_1_1_h_l_e_1_1_dsp_memory">HLE::DspMemory</a> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>{};</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8083200609e2bec6e4522ae6c94e24c7">   68</a></span>&#160;    std::array&lt;HLE::Source, HLE::num_sources&gt; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8083200609e2bec6e4522ae6c94e24c7">sources</a>{{</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(0),  <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(1),  <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(2),  <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(3),  <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(4),</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(5),  <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(6),  <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(7),  <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(8),  <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(9),</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(10), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(11), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(12), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(13), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(14),</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(15), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(16), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(17), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(18), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(19),</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(20), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(21), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(22), <a class="code" href="class_audio_core_1_1_h_l_e_1_1_source.html">HLE::Source</a>(23),</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }};</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a9d3e0e4be64425f97dfdb11334b6d321">   75</a></span>&#160;    <a class="code" href="class_audio_core_1_1_h_l_e_1_1_mixers.html">HLE::Mixers</a> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a9d3e0e4be64425f97dfdb11334b6d321">mixers</a>{};</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a54bb7832d5cbdcab00a520e82f3c4c24">   77</a></span>&#160;    <a class="code" href="class_audio_core_1_1_dsp_hle.html">DspHle</a>&amp; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a54bb7832d5cbdcab00a520e82f3c4c24">parent</a>;</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aedaeb6623cbe88007d7afab37081ae3c">   78</a></span>&#160;    <a class="code" href="namespace_core_timing.html#struct_core_timing_1_1_event_type">CoreTiming::EventType</a>* <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aedaeb6623cbe88007d7afab37081ae3c">tick_event</a>{};</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a2081931b55d2fc2f5cd94ac6ccbe65f7">   80</a></span>&#160;    std::weak_ptr&lt;DSP_DSP&gt; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a2081931b55d2fc2f5cd94ac6ccbe65f7">dsp_dsp</a>{};</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;};</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a89db714fad62f3bc5bb4f9a42ffcb8cd">   83</a></span>&#160;<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a89db714fad62f3bc5bb4f9a42ffcb8cd">DspHle::Impl::Impl</a>(<a class="code" href="class_audio_core_1_1_dsp_hle.html">DspHle</a>&amp; parent_) : <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a54bb7832d5cbdcab00a520e82f3c4c24">parent</a>(parent_) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>.<a class="code" href="namespace_audio_core_1_1_h_l_e.html#af1a16151f8de8c02750f6883be421bc7">raw_memory</a>.fill(0);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aedaeb6623cbe88007d7afab37081ae3c">tick_event</a> =</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="namespace_core_timing.html#ab4899206b9bc7858155c3a47cb9bce6e">CoreTiming::RegisterEvent</a>(<span class="stringliteral">&quot;AudioCore::DspHle::tick_event&quot;</span>,</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                                  [<span class="keyword">this</span>](<a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a>, <a class="code" href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a> cycles_late) { <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aa5120d6c133ddf119954908b38ab1c31">AudioTickCallback</a>(cycles_late); });</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="namespace_core_timing.html#a9e1678c03397fd456975cc4060f6feab">CoreTiming::ScheduleEvent</a>(<a class="code" href="namespace_audio_core.html#a3c183d00949fa664c7aa06ba2839b110">audio_frame_ticks</a>, <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aedaeb6623cbe88007d7afab37081ae3c">tick_event</a>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a5718f6c9956f0821827504552dc77088">   92</a></span>&#160;<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a5718f6c9956f0821827504552dc77088">DspHle::Impl::~Impl</a>() {</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <a class="code" href="namespace_core_timing.html#a1d0fc13b562a6c699cdcbfd4ccdfbc10">CoreTiming::UnscheduleEvent</a>(<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aedaeb6623cbe88007d7afab37081ae3c">tick_event</a>, 0);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a10b89a11436f7452156493074ba33fe2">   96</a></span>&#160;<a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500">DspState</a> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a10b89a11436f7452156493074ba33fe2">DspHle::Impl::GetDspState</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">dsp_state</a>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3564081d68f932686c999fb9d56adf60">  100</a></span>&#160;std::vector&lt;u8&gt; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3564081d68f932686c999fb9d56adf60">DspHle::Impl::PipeRead</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> length) {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keyword">const</span> std::size_t pipe_index{<span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(pipe_number)};</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (pipe_index &gt;= <a class="code" href="namespace_audio_core.html#abb56de564925a26265b0c0905f00220b">num_dsp_pipe</a>) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Audio_DSP, <span class="stringliteral">&quot;pipe_number = {} invalid&quot;</span>, pipe_index);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordflow">return</span> {};</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="keywordflow">if</span> (length &gt; UINT16_MAX) { <span class="comment">// Can only read at most UINT16_MAX from the pipe</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Audio_DSP, <span class="stringliteral">&quot;length of {} greater than max of {}&quot;</span>, length, UINT16_MAX);</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        <span class="keywordflow">return</span> {};</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    std::vector&lt;u8&gt;&amp; data{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3a4ae581f97d8e16a206af0f2d61b3f9">pipe_data</a>[pipe_index]};</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="keywordflow">if</span> (length &gt; data.size()) {</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <a class="code" href="log_8h.html#a8b510d36fc8a109f98395ce9b6ada954">LOG_WARNING</a>(</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            Audio_DSP,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            <span class="stringliteral">&quot;pipe_number = {} is out of data, application requested read of {} but {} remain&quot;</span>,</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            pipe_index, length, data.size());</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        length = <span class="keyword">static_cast&lt;</span><a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a><span class="keyword">&gt;</span>(data.size());</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    }</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordflow">if</span> (length == 0)</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        <span class="keywordflow">return</span> {};</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    std::vector&lt;u8&gt; ret{data.begin(), data.begin() + length};</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    data.erase(data.begin(), data.begin() + length);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a876b6b3daf7c5021e0a31448b888c0fe">  131</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a876b6b3daf7c5021e0a31448b888c0fe">DspHle::Impl::GetPipeReadableSize</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number)<span class="keyword"> const </span>{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="keyword">const</span> std::size_t pipe_index{<span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(pipe_number)};</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (pipe_index &gt;= <a class="code" href="namespace_audio_core.html#abb56de564925a26265b0c0905f00220b">num_dsp_pipe</a>) {</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Audio_DSP, <span class="stringliteral">&quot;pipe_number = {} invalid&quot;</span>, pipe_index);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3a4ae581f97d8e16a206af0f2d61b3f9">pipe_data</a>[pipe_index].size();</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8cc75ab29be4d9c8272f997d88ba038b">  142</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8cc75ab29be4d9c8272f997d88ba038b">DspHle::Impl::PipeWrite</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number, <span class="keyword">const</span> std::vector&lt;u8&gt;&amp; buffer) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">switch</span> (pipe_number) {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7cab22f0418e8ac915eb66f829d262d14a2">DspPipe::Audio</a>: {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">if</span> (buffer.size() != 4) {</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Audio_DSP, <span class="stringliteral">&quot;DspPipe::Audio: Unexpected buffer length {} was written&quot;</span>,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                      buffer.size());</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        <span class="keyword">enum class</span> StateChange {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            Initialize = 0,</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            <a class="code" href="namespace_cheat_core.html#a4c2d120d71465975153d17dfa69c492e">Shutdown</a> = 1,</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            Wakeup = 2,</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            Sleep = 3,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        };</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <span class="comment">// The difference between Initialize and Wakeup is that Input state is maintained</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        <span class="comment">// when sleeping but isn&#39;t when turning it off and on again. (TODO: Implement this.)</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="comment">// Waking up from sleep garbles some of the structs in the memory region. (TODO:</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <span class="comment">// Implement this.) Applications store away the state of these structs before</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="comment">// sleeping and reset it back after wakeup on behalf of the DSP.</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        <span class="keywordflow">switch</span> (static_cast&lt;StateChange&gt;(buffer[0])) {</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        <span class="keywordflow">case</span> StateChange::Initialize:</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <a class="code" href="log_8h.html#ae1a301a080359216e118c7936bbdbfd9">LOG_INFO</a>(Audio_DSP, <span class="stringliteral">&quot;Application has requested initialization of DSP hardware&quot;</span>);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a859e5542c546d70b44126d5e422b377b">ResetPipes</a>();</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ae6838d5de620e8c3063c8c5c916f6e15">AudioPipeWriteStructAddresses</a>();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">dsp_state</a> = <a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500a521c36a31c2762741cf0f8890cbe05e3">DspState::On</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="namespace_cheat_core.html#a4c2d120d71465975153d17dfa69c492e">StateChange::Shutdown</a>:</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <a class="code" href="log_8h.html#ae1a301a080359216e118c7936bbdbfd9">LOG_INFO</a>(Audio_DSP, <span class="stringliteral">&quot;Application has requested shutdown of DSP hardware&quot;</span>);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">dsp_state</a> = <a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500ad15305d7a4e34e02489c74a5ef542f36">DspState::Off</a>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <span class="keywordflow">case</span> StateChange::Wakeup:</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <a class="code" href="log_8h.html#ae1a301a080359216e118c7936bbdbfd9">LOG_INFO</a>(Audio_DSP, <span class="stringliteral">&quot;Application has requested wakeup of DSP hardware&quot;</span>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a859e5542c546d70b44126d5e422b377b">ResetPipes</a>();</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ae6838d5de620e8c3063c8c5c916f6e15">AudioPipeWriteStructAddresses</a>();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">dsp_state</a> = <a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500a521c36a31c2762741cf0f8890cbe05e3">DspState::On</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <span class="keywordflow">case</span> StateChange::Sleep:</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="log_8h.html#ae1a301a080359216e118c7936bbdbfd9">LOG_INFO</a>(Audio_DSP, <span class="stringliteral">&quot;Application has requested sleep of DSP hardware&quot;</span>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <a class="code" href="assert_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">dsp_state</a> = <a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500abddd4f44136f466c065a2c7a4c53e75b">DspState::Sleeping</a>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">default</span>:</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Audio_DSP,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                      <span class="stringliteral">&quot;Application has requested unknown state transition of DSP hardware {}&quot;</span>,</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                      buffer[0]);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">dsp_state</a> = <a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500ad15305d7a4e34e02489c74a5ef542f36">DspState::Off</a>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7ca6ce976e8f061b2b5cfe4d0c50c3405dd">DspPipe::Binary</a>:</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        std::copy(buffer.begin(), buffer.end(),</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                  std::back_inserter(<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3a4ae581f97d8e16a206af0f2d61b3f9">pipe_data</a>[static_cast&lt;std::size_t&gt;(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7ca6ce976e8f061b2b5cfe4d0c50c3405dd">DspPipe::Binary</a>)]));</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">default</span>:</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <a class="code" href="log_8h.html#a51fb52bb5a30e10d1eff3cc23c71d747">LOG_CRITICAL</a>(Audio_DSP, <span class="stringliteral">&quot;pipe_number = {} unimplemented&quot;</span>,</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                     static_cast&lt;std::size_t&gt;(pipe_number));</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        <a class="code" href="assert_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a>();</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a4829313615ebac6e01f04a5fd0b9e6fe">  208</a></span>&#160;std::array&lt;u8, Memory::DSP_RAM_SIZE&gt;&amp; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a4829313615ebac6e01f04a5fd0b9e6fe">DspHle::Impl::GetDspMemory</a>() {</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>.<a class="code" href="namespace_audio_core_1_1_h_l_e.html#af1a16151f8de8c02750f6883be421bc7">raw_memory</a>;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a92b842904cd30a33571d5254b2b5c4e8">  212</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a92b842904cd30a33571d5254b2b5c4e8">DspHle::Impl::SetServiceToInterrupt</a>(std::weak_ptr&lt;DSP_DSP&gt; dsp) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a2081931b55d2fc2f5cd94ac6ccbe65f7">dsp_dsp</a> = std::move(dsp);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;}</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a859e5542c546d70b44126d5e422b377b">  216</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a859e5542c546d70b44126d5e422b377b">DspHle::Impl::ResetPipes</a>() {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; data : <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3a4ae581f97d8e16a206af0f2d61b3f9">pipe_data</a>) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        data.clear();</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">dsp_state</a> = <a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500ad15305d7a4e34e02489c74a5ef542f36">DspState::Off</a>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;}</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ad3c5b4c1f8ffda608dab3af43c792949">  223</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ad3c5b4c1f8ffda608dab3af43c792949">DspHle::Impl::WriteU16</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number, <a class="code" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> value) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keyword">const</span> std::size_t pipe_index = <span class="keyword">static_cast&lt;</span>std::size_t<span class="keyword">&gt;</span>(pipe_number);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    std::vector&lt;u8&gt;&amp; data{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3a4ae581f97d8e16a206af0f2d61b3f9">pipe_data</a>.at(pipe_index)};</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">// Little endian</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    data.emplace_back(value &amp; 0xFF);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    data.emplace_back(value &gt;&gt; 8);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ae6838d5de620e8c3063c8c5c916f6e15">  232</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ae6838d5de620e8c3063c8c5c916f6e15">DspHle::Impl::AudioPipeWriteStructAddresses</a>() {</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <span class="comment">// These struct addresses are DSP dram addresses.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="comment">// See also: DSP_DSP::ConvertProcessAddressFromDspDram</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;u16, 15&gt; struct_addresses = {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, frame_counter) / 2,</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, source_configurations) / 2,</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, source_statuses) / 2,</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, adpcm_coefficients) / 2,</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, dsp_configuration) / 2,</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, dsp_status) / 2,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, final_samples) / 2,</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, intermediate_mix_samples) / 2,</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, compressor) / 2,</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, dsp_debug) / 2,</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, unknown10) / 2,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, unknown11) / 2,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, unknown12) / 2,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, unknown13) / 2,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        0x8000 + offsetof(<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>, unknown14) / 2,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    };</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// Begin with a u16 denoting the number of structs.</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ad3c5b4c1f8ffda608dab3af43c792949">WriteU16</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7cab22f0418e8ac915eb66f829d262d14a2">DspPipe::Audio</a>, static_cast&lt;u16&gt;(struct_addresses.size()));</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="comment">// Then write the struct addresses.</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> addr : struct_addresses) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ad3c5b4c1f8ffda608dab3af43c792949">WriteU16</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7cab22f0418e8ac915eb66f829d262d14a2">DspPipe::Audio</a>, addr);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="comment">// Signal that we have data on this pipe.</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="keywordflow">if</span> (<span class="keyword">auto</span> service{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a2081931b55d2fc2f5cd94ac6ccbe65f7">dsp_dsp</a>.lock()}) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        service-&gt;SignalInterrupt(<a class="code" href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html#a33adad8f8a8009bef3f429779e2850a8a2ab1f3f893823298751fdf60b4e0365a">InterruptType::Pipe</a>, <a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7cab22f0418e8ac915eb66f829d262d14a2">DspPipe::Audio</a>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;</div><div class="line"><a name="l00265"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a6f18492244e69e10b8a8cbee46e3d850">  265</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a6f18492244e69e10b8a8cbee46e3d850">DspHle::Impl::CurrentRegionIndex</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="comment">// The region with the higher frame counter is chosen unless there is wraparound.</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">// This function only returns a 0 or 1.</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keyword">const</span> <a class="code" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> frame_counter_0{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>.region_0.frame_counter};</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="keyword">const</span> <a class="code" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> frame_counter_1{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>.region_1.frame_counter};</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (frame_counter_0 == 0xFFFFu &amp;&amp; frame_counter_1 != 0xFFFEu) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        <span class="comment">// Wraparound has occurred.</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (frame_counter_1 == 0xFFFFu &amp;&amp; frame_counter_0 != 0xFFFEu) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="comment">// Wraparound has occurred.</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keywordflow">return</span> (frame_counter_0 &gt; frame_counter_1) ? 0 : 1;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;}</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#abe3216cdf3026bc7831270689e2608d8">  284</a></span>&#160;<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>&amp; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#abe3216cdf3026bc7831270689e2608d8">DspHle::Impl::ReadRegion</a>() {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a6f18492244e69e10b8a8cbee46e3d850">CurrentRegionIndex</a>() == 0 ? <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>.region_0 : <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>.region_1;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0ace3ccfcb1cd08b6a1d1c06e90824d9">  288</a></span>&#160;<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>&amp; <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0ace3ccfcb1cd08b6a1d1c06e90824d9">DspHle::Impl::WriteRegion</a>() {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a6f18492244e69e10b8a8cbee46e3d850">CurrentRegionIndex</a>() != 0 ? <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>.region_0 : <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">dsp_memory</a>.region_1;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a288b1b9295faf1f2fab7292f6d69a340">  292</a></span>&#160;<a class="code" href="namespace_audio_core.html#a813444aa5d69549f03c60eda40103cbe">StereoFrame16</a> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a288b1b9295faf1f2fab7292f6d69a340">DspHle::Impl::GenerateCurrentFrame</a>() {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>&amp; read{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#abe3216cdf3026bc7831270689e2608d8">ReadRegion</a>()};</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">HLE::SharedMemory</a>&amp; write{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0ace3ccfcb1cd08b6a1d1c06e90824d9">WriteRegion</a>()};</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    std::array&lt;QuadFrame32, 3&gt; intermediate_mixes = {};</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// Generate intermediate mixes</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">for</span> (std::size_t i{}; i &lt; <a class="code" href="namespace_audio_core_1_1_h_l_e.html#aa411a205db7fc57847a2f5d6ec369d0b">HLE::num_sources</a>; i++) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        write.<a class="code" href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html#a534589adbeffad24193caf7d386dd930">source_statuses</a>.<a class="code" href="namespace_audio_core_1_1_h_l_e.html#a563739bec4c3851aeabd49ad7683622d">status</a>[i] =</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8083200609e2bec6e4522ae6c94e24c7">sources</a>[i].Tick(read.source_configurations.config[i], read.adpcm_coefficients.coeff[i]);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        <span class="keywordflow">for</span> (std::size_t mix{}; mix &lt; 3; mix++) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8083200609e2bec6e4522ae6c94e24c7">sources</a>[i].MixInto(intermediate_mixes[mix], mix);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    }</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">// Generate final mix</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    write.dsp_status = <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a9d3e0e4be64425f97dfdb11334b6d321">mixers</a>.<a class="code" href="class_audio_core_1_1_h_l_e_1_1_mixers.html#a3db2e2fc15bda2ee1037330584e7e338">Tick</a>(read.dsp_configuration, read.intermediate_mix_samples,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                   write.intermediate_mix_samples, intermediate_mixes);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <a class="code" href="namespace_audio_core.html#a813444aa5d69549f03c60eda40103cbe">StereoFrame16</a> output_frame{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a9d3e0e4be64425f97dfdb11334b6d321">mixers</a>.<a class="code" href="class_audio_core_1_1_h_l_e_1_1_mixers.html#a23fea2272e2b80b48824ffd61b91a277">GetOutput</a>()};</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// Write current output frame to the shared memory region</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">for</span> (std::size_t samplei{}; samplei &lt; output_frame.size(); samplei++) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordflow">for</span> (std::size_t channeli{}; channeli &lt; output_frame[0].size(); channeli++) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            write.final_samples.pcm16[samplei][channeli] = <a class="code" href="swap_8h.html#af546d6a9287f78c751316b291e2d7bda">s16_le</a>(output_frame[samplei][channeli]);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> output_frame;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0565622678cba5a9e0bebdc4e2df9601">  323</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0565622678cba5a9e0bebdc4e2df9601">DspHle::Impl::Tick</a>() {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a81fb74000f9c2ce306a9f8fa39f170dc">IsOutputAllowed</a>())</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    <a class="code" href="namespace_audio_core.html#a813444aa5d69549f03c60eda40103cbe">StereoFrame16</a> current_frame = {};</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <span class="comment">// TODO: Check dsp::DSP semaphore (which indicates emulated application has finished writing to</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="comment">// shared memory region)</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    current_frame = <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a288b1b9295faf1f2fab7292f6d69a340">GenerateCurrentFrame</a>();</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a54bb7832d5cbdcab00a520e82f3c4c24">parent</a>.<a class="code" href="class_audio_core_1_1_dsp_hle.html#ac56ed2592dd1b4698c97cdbb55a33554">OutputFrame</a>(current_frame);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a81fb74000f9c2ce306a9f8fa39f170dc">  337</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a81fb74000f9c2ce306a9f8fa39f170dc">DspHle::Impl::IsOutputAllowed</a>() {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_core_1_1_system.html#ab2f9ff357787ec877567d8c4ffe2a2d4">Core::System::GetInstance</a>().IsShellOpen()) {</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        <span class="keywordflow">return</span> titles_output_allowed_shell_closed.count(</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                   <a class="code" href="namespace_kernel.html#ac7460d5f540b785aea634c73c5430acd">Kernel::g_current_process</a>-&gt;codeset-&gt;program_id) == 1 &amp;&amp;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;               <a class="code" href="namespace_settings.html#a89bad2e81a950120963b3f26c691810a">Settings::values</a>.<a class="code" href="namespace_settings.html#adaae651c5cee72bd19a07b6ff390aff3">headphones_connected</a>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;}</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno"><a class="line" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aa5120d6c133ddf119954908b38ab1c31">  347</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aa5120d6c133ddf119954908b38ab1c31">DspHle::Impl::AudioTickCallback</a>(<a class="code" href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a> cycles_late) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0565622678cba5a9e0bebdc4e2df9601">Tick</a>()) {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="comment">// TODO(merry): Signal all the other interrupts as appropriate.</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">auto</span> service{<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a2081931b55d2fc2f5cd94ac6ccbe65f7">dsp_dsp</a>.lock()}) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            service-&gt;SignalInterrupt(<a class="code" href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html#a33adad8f8a8009bef3f429779e2850a8a2ab1f3f893823298751fdf60b4e0365a">InterruptType::Pipe</a>, <a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7cab22f0418e8ac915eb66f829d262d14a2">DspPipe::Audio</a>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <span class="comment">// HACK(merry): Added to prevent regressions. Will remove soon.</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            service-&gt;SignalInterrupt(<a class="code" href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html#a33adad8f8a8009bef3f429779e2850a8a2ab1f3f893823298751fdf60b4e0365a">InterruptType::Pipe</a>, <a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7ca6ce976e8f061b2b5cfe4d0c50c3405dd">DspPipe::Binary</a>);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="comment">// Reschedule recurrent event</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="namespace_core_timing.html#a9e1678c03397fd456975cc4060f6feab">CoreTiming::ScheduleEvent</a>(<a class="code" href="namespace_audio_core.html#a3c183d00949fa664c7aa06ba2839b110">audio_frame_ticks</a> - cycles_late, <a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aedaeb6623cbe88007d7afab37081ae3c">tick_event</a>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div><div class="line"><a name="l00361"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#a31e078156150e483fd018052f0cad6c3">  361</a></span>&#160;<a class="code" href="class_audio_core_1_1_dsp_hle.html#a31e078156150e483fd018052f0cad6c3">DspHle::DspHle</a>() : <a class="code" href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">impl</a>(<a class="code" href="namespacestd.html">std</a>::make_unique&lt;<a class="code" href="struct_audio_core_1_1_dsp_hle_1_1_impl.html">Impl</a>&gt;(*this)) {}</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<a class="code" href="class_audio_core_1_1_dsp_hle.html#a291d3659e126c9b5e77d27dcfc6a26c6">DspHle::~DspHle</a>() = <span class="keywordflow">default</span>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#a1dc4ea8637560c3ca5ddbbbb182fe149">  364</a></span>&#160;<a class="code" href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500">DspState</a> <a class="code" href="class_audio_core_1_1_dsp_hle.html#a1dc4ea8637560c3ca5ddbbbb182fe149">DspHle::GetDspState</a>()<span class="keyword"> const </span>{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">impl</a>-&gt;GetDspState();</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#aad71f83ac0b703ac1752863e896ffd99">  368</a></span>&#160;std::vector&lt;u8&gt; <a class="code" href="class_audio_core_1_1_dsp_hle.html#aad71f83ac0b703ac1752863e896ffd99">DspHle::PipeRead</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> length) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">impl</a>-&gt;PipeRead(pipe_number, length);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;}</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#a13fdd719a39f01a36dd92dd2f1659e62">  372</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#a13fdd719a39f01a36dd92dd2f1659e62">DspHle::GetPipeReadableSize</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number)<span class="keyword"> const </span>{</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">impl</a>-&gt;GetPipeReadableSize(pipe_number);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;}</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#aeca49bcf163864088f88294d966c30e4">  376</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#aeca49bcf163864088f88294d966c30e4">DspHle::PipeWrite</a>(<a class="code" href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">DspPipe</a> pipe_number, <span class="keyword">const</span> std::vector&lt;u8&gt;&amp; buffer) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <a class="code" href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">impl</a>-&gt;PipeWrite(pipe_number, buffer);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;}</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#a1df5569c65d0646bd99248b8cdbf258a">  380</a></span>&#160;std::array&lt;u8, Memory::DSP_RAM_SIZE&gt;&amp; <a class="code" href="class_audio_core_1_1_dsp_hle.html#a1df5569c65d0646bd99248b8cdbf258a">DspHle::GetDspMemory</a>() {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">impl</a>-&gt;GetDspMemory();</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;}</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#ac85598b6353fee2ea61a051dcbc8e71b">  384</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#ac85598b6353fee2ea61a051dcbc8e71b">DspHle::SetServiceToInterrupt</a>(std::weak_ptr&lt;DSP_DSP&gt; dsp) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <a class="code" href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">impl</a>-&gt;SetServiceToInterrupt(std::move(dsp));</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#ad715f1a3da7badadfb5ce9ce265814f9">  388</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#ad715f1a3da7badadfb5ce9ce265814f9">DspHle::SetSink</a>(<span class="keyword">const</span> std::string&amp; sink_id, <span class="keyword">const</span> std::string&amp; audio_device) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_audio_core_1_1_sink_details.html">SinkDetails</a>&amp; sink_details = <a class="code" href="namespace_audio_core.html#a58b9d055686585797e64c0d086810170">GetSinkDetails</a>(sink_id);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <a class="code" href="class_audio_core_1_1_dsp_hle.html#a087aeaefefa4ab8756b83b8c841a3520">sink</a> = sink_details.<a class="code" href="struct_audio_core_1_1_sink_details.html#aa423639e09beb3e6a47a2f40b94acda3">factory</a>(audio_device);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    <a class="code" href="class_audio_core_1_1_dsp_hle.html#a087aeaefefa4ab8756b83b8c841a3520">sink</a>-&gt;SetCallback(</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        [<span class="keyword">this</span>](<a class="code" href="common__types_8h.html#a6b4b768cf996a113477ec9617bb48d40">s16</a>* buffer, std::size_t num_frames) { <a class="code" href="class_audio_core_1_1_dsp_hle.html#ab31ebf89e6425e8d2e9b736d7fbc3584">OutputCallback</a>(buffer, num_frames); });</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;    <a class="code" href="class_audio_core_1_1_dsp_hle.html#ad3f28473de904f808da4e4a7ea8b52a6">time_stretcher</a>.<a class="code" href="class_audio_core_1_1_time_stretcher.html#a213a6c2e03b2bca91fa54deb83899c7c">SetOutputSampleRate</a>(<a class="code" href="class_audio_core_1_1_dsp_hle.html#a087aeaefefa4ab8756b83b8c841a3520">sink</a>-&gt;GetNativeSampleRate());</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#ac83d5b239d580c36301ecd441ae344e1">  396</a></span>&#160;<a class="code" href="class_audio_core_1_1_sink.html">Sink</a>&amp; <a class="code" href="class_audio_core_1_1_dsp_hle.html#ac83d5b239d580c36301ecd441ae344e1">DspHle::GetSink</a>() {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    <a class="code" href="assert_8h.html#a9f920d5e0c0e8780d4ce9bfb15bfd9e2">ASSERT</a>(<a class="code" href="class_audio_core_1_1_dsp_hle.html#a087aeaefefa4ab8756b83b8c841a3520">sink</a>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    <span class="keywordflow">return</span> *<a class="code" href="class_audio_core_1_1_dsp_hle.html#a087aeaefefa4ab8756b83b8c841a3520">sink</a>.get();</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#aee2e05548d3ab052f23615ae976c3545">  401</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#aee2e05548d3ab052f23615ae976c3545">DspHle::EnableStretching</a>(<span class="keywordtype">bool</span> enable) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_audio_core_1_1_dsp_hle.html#a15840611116281a23db3e11e62f2824f">perform_time_stretching</a> == enable)</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <span class="keywordflow">if</span> (!enable) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="class_audio_core_1_1_dsp_hle.html#a308e1fc52818a39e30c121bd1641654e">flushing_time_stretcher</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="class_audio_core_1_1_dsp_hle.html#a15840611116281a23db3e11e62f2824f">perform_time_stretching</a> = enable;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;}</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#ac56ed2592dd1b4698c97cdbb55a33554">  411</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#ac56ed2592dd1b4698c97cdbb55a33554">DspHle::OutputFrame</a>(<a class="code" href="namespace_audio_core.html#a813444aa5d69549f03c60eda40103cbe">StereoFrame16</a>&amp; frame) {</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="class_audio_core_1_1_dsp_hle.html#a087aeaefefa4ab8756b83b8c841a3520">sink</a>)</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    <a class="code" href="class_audio_core_1_1_dsp_hle.html#aee1764b29a4238fbc8de3c10165496a1">fifo</a>.<a class="code" href="class_common_1_1_ring_buffer.html#a488855d936489f7e5a193d1d64a2e27f">Push</a>(frame.data(), frame.size());</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;}</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#ab31ebf89e6425e8d2e9b736d7fbc3584">  418</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#ab31ebf89e6425e8d2e9b736d7fbc3584">DspHle::OutputCallback</a>(<a class="code" href="common__types_8h.html#a6b4b768cf996a113477ec9617bb48d40">s16</a>* buffer, <span class="keywordtype">size_t</span> num_frames) {</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordtype">size_t</span> frames_written{};</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_audio_core_1_1_dsp_hle.html#a15840611116281a23db3e11e62f2824f">perform_time_stretching</a>) {</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <span class="keyword">const</span> std::vector&lt;s16&gt; in{<a class="code" href="class_audio_core_1_1_dsp_hle.html#aee1764b29a4238fbc8de3c10165496a1">fifo</a>.<a class="code" href="class_common_1_1_ring_buffer.html#afd706926e126d36afe4fab20193311be">Pop</a>()};</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> num_in{in.size() / 2};</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;        frames_written = <a class="code" href="class_audio_core_1_1_dsp_hle.html#ad3f28473de904f808da4e4a7ea8b52a6">time_stretcher</a>.<a class="code" href="class_audio_core_1_1_time_stretcher.html#a1654b9ad3979cec7fcbcaad3641040e5">Process</a>(in.data(), num_in, buffer, num_frames);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_audio_core_1_1_dsp_hle.html#a308e1fc52818a39e30c121bd1641654e">flushing_time_stretcher</a>) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        <a class="code" href="class_audio_core_1_1_dsp_hle.html#ad3f28473de904f808da4e4a7ea8b52a6">time_stretcher</a>.<a class="code" href="class_audio_core_1_1_time_stretcher.html#a4e82558836b7fd9a632f171d5746b203">Flush</a>();</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        frames_written = <a class="code" href="class_audio_core_1_1_dsp_hle.html#ad3f28473de904f808da4e4a7ea8b52a6">time_stretcher</a>.<a class="code" href="class_audio_core_1_1_time_stretcher.html#a1654b9ad3979cec7fcbcaad3641040e5">Process</a>(<span class="keyword">nullptr</span>, 0, buffer, num_frames);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        frames_written += <a class="code" href="class_audio_core_1_1_dsp_hle.html#aee1764b29a4238fbc8de3c10165496a1">fifo</a>.<a class="code" href="class_common_1_1_ring_buffer.html#afd706926e126d36afe4fab20193311be">Pop</a>(buffer, num_frames - frames_written);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        <a class="code" href="class_audio_core_1_1_dsp_hle.html#a308e1fc52818a39e30c121bd1641654e">flushing_time_stretcher</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        frames_written = <a class="code" href="class_audio_core_1_1_dsp_hle.html#aee1764b29a4238fbc8de3c10165496a1">fifo</a>.<a class="code" href="class_common_1_1_ring_buffer.html#afd706926e126d36afe4fab20193311be">Pop</a>(buffer, num_frames);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span> (frames_written &gt; 0) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        std::memcpy(&amp;<a class="code" href="class_audio_core_1_1_dsp_hle.html#ad362dd8ab8577a4906fc9cd51441f5dd">last_frame</a>[0], buffer + 2 * (frames_written - 1), 2 * <span class="keyword">sizeof</span>(<a class="code" href="common__types_8h.html#a6b4b768cf996a113477ec9617bb48d40">s16</a>));</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    <span class="comment">// Hold last emitted frame; this prevents popping.</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i{frames_written}; i &lt; num_frames; i++) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        std::memcpy(buffer + 2 * i, &amp;<a class="code" href="class_audio_core_1_1_dsp_hle.html#ad362dd8ab8577a4906fc9cd51441f5dd">last_frame</a>[0], 2 * <span class="keyword">sizeof</span>(<a class="code" href="common__types_8h.html#a6b4b768cf996a113477ec9617bb48d40">s16</a>));</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    }</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// Implementation of the hardware volume slider with a dynamic range of 60 dB</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> linear_volume{std::clamp(<a class="code" href="namespace_settings.html#a89bad2e81a950120963b3f26c691810a">Settings::values</a>.volume, 0.0f, 1.0f)};</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    <span class="keywordflow">if</span> (linear_volume != 1.0) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> volume_scale_factor{std::exp(6.90775f * linear_volume) * 0.001f};</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">for</span> (std::size_t i{}; i &lt; num_frames; i++) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            buffer[i * 2 + 0] = <span class="keyword">static_cast&lt;</span><a class="code" href="common__types_8h.html#a6b4b768cf996a113477ec9617bb48d40">s16</a><span class="keyword">&gt;</span>(buffer[i * 2 + 0] * volume_scale_factor);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            buffer[i * 2 + 1] = <span class="keyword">static_cast&lt;</span><a class="code" href="common__types_8h.html#a6b4b768cf996a113477ec9617bb48d40">s16</a><span class="keyword">&gt;</span>(buffer[i * 2 + 1] * volume_scale_factor);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="class_audio_core_1_1_dsp_hle.html#ad27e4f15307e34733bcb7b26051832fe">  453</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#ad27e4f15307e34733bcb7b26051832fe">DspHle::IsOutputAllowed</a>() {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">impl</a>-&gt;IsOutputAllowed();</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;} <span class="comment">// namespace AudioCore</span></div><div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a10b89a11436f7452156493074ba33fe2"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a10b89a11436f7452156493074ba33fe2">AudioCore::DspHle::Impl::GetDspState</a></div><div class="ttdeci">DspState GetDspState() const</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00096">hle.cpp:96</a></div></div>
<div class="ttc" id="audio__types_8h_html"><div class="ttname"><a href="audio__types_8h.html">audio_types.h</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_aad71f83ac0b703ac1752863e896ffd99"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#aad71f83ac0b703ac1752863e896ffd99">AudioCore::DspHle::PipeRead</a></div><div class="ttdeci">std::vector&lt; u8 &gt; PipeRead(DspPipe pipe_number, u32 length)</div><div class="ttdoc">Reads length bytes from the DSP pipe identified with pipe_number. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00368">hle.cpp:368</a></div></div>
<div class="ttc" id="swap_8h_html_af546d6a9287f78c751316b291e2d7bda"><div class="ttname"><a href="swap_8h.html#af546d6a9287f78c751316b291e2d7bda">s16_le</a></div><div class="ttdeci">s16 s16_le</div><div class="ttdef"><b>Definition:</b> <a href="swap_8h_source.html#l00613">swap.h:613</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a876b6b3daf7c5021e0a31448b888c0fe"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a876b6b3daf7c5021e0a31448b888c0fe">AudioCore::DspHle::Impl::GetPipeReadableSize</a></div><div class="ttdeci">std::size_t GetPipeReadableSize(DspPipe pipe_number) const</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00131">hle.cpp:131</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a241c6c22fe9234f8cd692e77d1ddd5d3"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a241c6c22fe9234f8cd692e77d1ddd5d3">AudioCore::DspHle::Impl::dsp_state</a></div><div class="ttdeci">DspState dsp_state</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00064">hle.cpp:64</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_ad362dd8ab8577a4906fc9cd51441f5dd"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#ad362dd8ab8577a4906fc9cd51441f5dd">AudioCore::DspHle::last_frame</a></div><div class="ttdeci">std::array&lt; s16, 2 &gt; last_frame</div><div class="ttdef"><b>Definition:</b> <a href="hle_8h_source.html#l00087">hle.h:87</a></div></div>
<div class="ttc" id="class_audio_core_1_1_h_l_e_1_1_mixers_html_a3db2e2fc15bda2ee1037330584e7e338"><div class="ttname"><a href="class_audio_core_1_1_h_l_e_1_1_mixers.html#a3db2e2fc15bda2ee1037330584e7e338">AudioCore::HLE::Mixers::Tick</a></div><div class="ttdeci">DspStatus Tick(DspConfiguration &amp;config, const IntermediateMixSamples &amp;read_samples, IntermediateMixSamples &amp;write_samples, const std::array&lt; QuadFrame32, 3 &gt; &amp;input)</div><div class="ttdef"><b>Definition:</b> <a href="mixers_8cpp_source.html#l00018">mixers.cpp:18</a></div></div>
<div class="ttc" id="mixers_8h_html"><div class="ttname"><a href="mixers_8h.html">mixers.h</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_aedaeb6623cbe88007d7afab37081ae3c"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aedaeb6623cbe88007d7afab37081ae3c">AudioCore::DspHle::Impl::tick_event</a></div><div class="ttdeci">CoreTiming::EventType * tick_event</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00078">hle.cpp:78</a></div></div>
<div class="ttc" id="dsp__dsp_8h_html"><div class="ttname"><a href="dsp__dsp_8h.html">dsp_dsp.h</a></div></div>
<div class="ttc" id="namespace_audio_core_1_1_h_l_e_html_af1a16151f8de8c02750f6883be421bc7"><div class="ttname"><a href="namespace_audio_core_1_1_h_l_e.html#af1a16151f8de8c02750f6883be421bc7">AudioCore::HLE::DspMemory::raw_memory</a></div><div class="ttdeci">std::array&lt; u8, 0x80000 &gt; raw_memory</div><div class="ttdef"><b>Definition:</b> <a href="audio__core_2hle_2shared__memory_8h_source.html#l00512">shared_memory.h:512</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_ad3f28473de904f808da4e4a7ea8b52a6"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#ad3f28473de904f808da4e4a7ea8b52a6">AudioCore::DspHle::time_stretcher</a></div><div class="ttdeci">TimeStretcher time_stretcher</div><div class="ttdef"><b>Definition:</b> <a href="hle_8h_source.html#l00088">hle.h:88</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html">AudioCore::DspHle</a></div><div class="ttdef"><b>Definition:</b> <a href="hle_8h_source.html#l00022">hle.h:22</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_sink_details_html_aa423639e09beb3e6a47a2f40b94acda3"><div class="ttname"><a href="struct_audio_core_1_1_sink_details.html#aa423639e09beb3e6a47a2f40b94acda3">AudioCore::SinkDetails::factory</a></div><div class="ttdeci">FactoryFn factory</div><div class="ttdoc">A method to call to construct an instance of this type of sink. </div><div class="ttdef"><b>Definition:</b> <a href="sink__details_8h_source.html#l00026">sink_details.h:26</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_a1df5569c65d0646bd99248b8cdbf258a"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#a1df5569c65d0646bd99248b8cdbf258a">AudioCore::DspHle::GetDspMemory</a></div><div class="ttdeci">std::array&lt; u8, Memory::DSP_RAM_SIZE &gt; &amp; GetDspMemory()</div><div class="ttdoc">Returns a reference to the array backing DSP memory. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00380">hle.cpp:380</a></div></div>
<div class="ttc" id="namespace_audio_core_html"><div class="ttname"><a href="namespace_audio_core.html">AudioCore</a></div><div class="ttdef"><b>Definition:</b> <a href="audio__types_8h_source.html#l00012">audio_types.h:12</a></div></div>
<div class="ttc" id="log_8h_html_a2f872ec42bda0e5baf8783313a28494c"><div class="ttname"><a href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(log_class,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00136">log.h:136</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_ac85598b6353fee2ea61a051dcbc8e71b"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#ac85598b6353fee2ea61a051dcbc8e71b">AudioCore::DspHle::SetServiceToInterrupt</a></div><div class="ttdeci">void SetServiceToInterrupt(std::weak_ptr&lt; Service::DSP::DSP_DSP &gt; dsp)</div><div class="ttdoc">Sets the dsp class that we trigger interrupts for. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00384">hle.cpp:384</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_a291d3659e126c9b5e77d27dcfc6a26c6"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#a291d3659e126c9b5e77d27dcfc6a26c6">AudioCore::DspHle::~DspHle</a></div><div class="ttdeci">~DspHle()</div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_aee2e05548d3ab052f23615ae976c3545"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#aee2e05548d3ab052f23615ae976c3545">AudioCore::DspHle::EnableStretching</a></div><div class="ttdeci">void EnableStretching(bool enable)</div><div class="ttdoc">Enable/Disable audio stretching. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00401">hle.cpp:401</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a859e5542c546d70b44126d5e422b377b"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a859e5542c546d70b44126d5e422b377b">AudioCore::DspHle::Impl::ResetPipes</a></div><div class="ttdeci">void ResetPipes()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00216">hle.cpp:216</a></div></div>
<div class="ttc" id="namespace_core_timing_html_a9e1678c03397fd456975cc4060f6feab"><div class="ttname"><a href="namespace_core_timing.html#a9e1678c03397fd456975cc4060f6feab">CoreTiming::ScheduleEvent</a></div><div class="ttdeci">void ScheduleEvent(s64 cycles_into_future, const EventType *event_type, u64 userdata)</div><div class="ttdoc">After the first Advance, the slice lengths and the downcount will be reduced whenever an event is sch...</div><div class="ttdef"><b>Definition:</b> <a href="core__timing_8cpp_source.html#l00135">core_timing.cpp:135</a></div></div>
<div class="ttc" id="core_8h_html"><div class="ttname"><a href="core_8h.html">core.h</a></div></div>
<div class="ttc" id="class_common_1_1_ring_buffer_html_a488855d936489f7e5a193d1d64a2e27f"><div class="ttname"><a href="class_common_1_1_ring_buffer.html#a488855d936489f7e5a193d1d64a2e27f">Common::RingBuffer::Push</a></div><div class="ttdeci">size_t Push(const void *new_slots, size_t slot_count)</div><div class="ttdoc">Pushes slots into the ring buffer. </div><div class="ttdef"><b>Definition:</b> <a href="ring__buffer_8h_source.html#l00039">ring_buffer.h:39</a></div></div>
<div class="ttc" id="namespace_core_timing_html_ab4899206b9bc7858155c3a47cb9bce6e"><div class="ttname"><a href="namespace_core_timing.html#ab4899206b9bc7858155c3a47cb9bce6e">CoreTiming::RegisterEvent</a></div><div class="ttdeci">EventType * RegisterEvent(const std::string &amp;name, TimedCallback callback)</div><div class="ttdoc">Returns the event_type identifier. </div><div class="ttdef"><b>Definition:</b> <a href="core__timing_8cpp_source.html#l00072">core_timing.cpp:72</a></div></div>
<div class="ttc" id="namespace_audio_core_html_abb56de564925a26265b0c0905f00220b"><div class="ttname"><a href="namespace_audio_core.html#abb56de564925a26265b0c0905f00220b">AudioCore::num_dsp_pipe</a></div><div class="ttdeci">constexpr std::size_t num_dsp_pipe</div><div class="ttdef"><b>Definition:</b> <a href="audio__types_8h_source.html#l00029">audio_types.h:29</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_ad715f1a3da7badadfb5ce9ce265814f9"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#ad715f1a3da7badadfb5ce9ce265814f9">AudioCore::DspHle::SetSink</a></div><div class="ttdeci">void SetSink(const std::string &amp;sink_id, const std::string &amp;audio_device)</div><div class="ttdoc">Select the sink to use based on sink id. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00388">hle.cpp:388</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a8cc75ab29be4d9c8272f997d88ba038b"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8cc75ab29be4d9c8272f997d88ba038b">AudioCore::DspHle::Impl::PipeWrite</a></div><div class="ttdeci">void PipeWrite(DspPipe pipe_number, const std::vector&lt; u8 &gt; &amp;buffer)</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00142">hle.cpp:142</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="applet_8cpp_source.html#l00023">applet.cpp:23</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_a15840611116281a23db3e11e62f2824f"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#a15840611116281a23db3e11e62f2824f">AudioCore::DspHle::perform_time_stretching</a></div><div class="ttdeci">std::atomic&lt; bool &gt; perform_time_stretching</div><div class="ttdef"><b>Definition:</b> <a href="hle_8h_source.html#l00084">hle.h:84</a></div></div>
<div class="ttc" id="class_audio_core_1_1_h_l_e_1_1_mixers_html"><div class="ttname"><a href="class_audio_core_1_1_h_l_e_1_1_mixers.html">AudioCore::HLE::Mixers</a></div><div class="ttdef"><b>Definition:</b> <a href="mixers_8h_source.html#l00013">mixers.h:13</a></div></div>
<div class="ttc" id="namespace_core_timing_html_struct_core_timing_1_1_event_type"><div class="ttname"><a href="namespace_core_timing.html#struct_core_timing_1_1_event_type">CoreTiming::EventType</a></div><div class="ttdef"><b>Definition:</b> <a href="core__timing_8cpp_source.html#l00024">core_timing.cpp:24</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a58b9d055686585797e64c0d086810170"><div class="ttname"><a href="namespace_audio_core.html#a58b9d055686585797e64c0d086810170">AudioCore::GetSinkDetails</a></div><div class="ttdeci">const SinkDetails &amp; GetSinkDetails(const std::string &amp;sink_id)</div><div class="ttdef"><b>Definition:</b> <a href="sink__details_8cpp_source.html#l00033">sink_details.cpp:33</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a5718f6c9956f0821827504552dc77088"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a5718f6c9956f0821827504552dc77088">AudioCore::DspHle::Impl::~Impl</a></div><div class="ttdeci">~Impl()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00092">hle.cpp:92</a></div></div>
<div class="ttc" id="common__types_8h_html_a6b4b768cf996a113477ec9617bb48d40"><div class="ttname"><a href="common__types_8h.html#a6b4b768cf996a113477ec9617bb48d40">s16</a></div><div class="ttdeci">std::int16_t s16</div><div class="ttdoc">16-bit signed short </div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00041">common_types.h:41</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a3c183d00949fa664c7aa06ba2839b110"><div class="ttname"><a href="namespace_audio_core.html#a3c183d00949fa664c7aa06ba2839b110">AudioCore::audio_frame_ticks</a></div><div class="ttdeci">static constexpr u64 audio_frame_ticks</div><div class="ttdoc">Units: ARM11 cycles. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00026">hle.cpp:26</a></div></div>
<div class="ttc" id="log_8h_html_a8b510d36fc8a109f98395ce9b6ada954"><div class="ttname"><a href="log_8h.html#a8b510d36fc8a109f98395ce9b6ada954">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING(log_class,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00133">log.h:133</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a3a4ae581f97d8e16a206af0f2d61b3f9"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3a4ae581f97d8e16a206af0f2d61b3f9">AudioCore::DspHle::Impl::pipe_data</a></div><div class="ttdeci">std::array&lt; std::vector&lt; u8 &gt;, num_dsp_pipe &gt; pipe_data</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00065">hle.cpp:65</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a54bb7832d5cbdcab00a520e82f3c4c24"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a54bb7832d5cbdcab00a520e82f3c4c24">AudioCore::DspHle::Impl::parent</a></div><div class="ttdeci">DspHle &amp; parent</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00077">hle.cpp:77</a></div></div>
<div class="ttc" id="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p_html_a33adad8f8a8009bef3f429779e2850a8a2ab1f3f893823298751fdf60b4e0365a"><div class="ttname"><a href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html#a33adad8f8a8009bef3f429779e2850a8a2ab1f3f893823298751fdf60b4e0365a">Service::DSP::DSP_DSP::InterruptType::Pipe</a></div></div>
<div class="ttc" id="namespace_audio_core_1_1_h_l_e_html_a563739bec4c3851aeabd49ad7683622d"><div class="ttname"><a href="namespace_audio_core_1_1_h_l_e.html#a563739bec4c3851aeabd49ad7683622d">AudioCore::HLE::SourceStatus::status</a></div><div class="ttdeci">Status status[num_sources]</div><div class="ttdef"><b>Definition:</b> <a href="audio__core_2hle_2shared__memory_8h_source.html#l00326">shared_memory.h:326</a></div></div>
<div class="ttc" id="common__types_8h_html_a35714c97d4ec315cb8c6e79d7b2a1cbc"><div class="ttname"><a href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a></div><div class="ttdeci">std::int64_t s64</div><div class="ttdoc">64-bit signed int </div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00043">common_types.h:43</a></div></div>
<div class="ttc" id="common__types_8h_html"><div class="ttname"><a href="common__types_8h.html">common_types.h</a></div><div class="ttdoc">Copyright (C) 2005-2012 Gekko Emulator. </div></div>
<div class="ttc" id="log_8h_html_a51fb52bb5a30e10d1eff3cc23c71d747"><div class="ttname"><a href="log_8h.html#a51fb52bb5a30e10d1eff3cc23c71d747">LOG_CRITICAL</a></div><div class="ttdeci">#define LOG_CRITICAL(log_class,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00139">log.h:139</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a813444aa5d69549f03c60eda40103cbe"><div class="ttname"><a href="namespace_audio_core.html#a813444aa5d69549f03c60eda40103cbe">AudioCore::StereoFrame16</a></div><div class="ttdeci">std::array&lt; std::array&lt; s16, 2 &gt;, samples_per_frame &gt; StereoFrame16</div><div class="ttdoc">The final output to the speakers is stereo. Preprocessing output in Source is also stereo...</div><div class="ttdef"><b>Definition:</b> <a href="audio__types_8h_source.html#l00021">audio_types.h:21</a></div></div>
<div class="ttc" id="class_audio_core_1_1_h_l_e_1_1_mixers_html_a23fea2272e2b80b48824ffd61b91a277"><div class="ttname"><a href="class_audio_core_1_1_h_l_e_1_1_mixers.html#a23fea2272e2b80b48824ffd61b91a277">AudioCore::HLE::Mixers::GetOutput</a></div><div class="ttdeci">StereoFrame16 GetOutput() const</div><div class="ttdef"><b>Definition:</b> <a href="mixers_8h_source.html#l00024">mixers.h:24</a></div></div>
<div class="ttc" id="assert_8h_html"><div class="ttname"><a href="assert_8h.html">assert.h</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a9d3e0e4be64425f97dfdb11334b6d321"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a9d3e0e4be64425f97dfdb11334b6d321">AudioCore::DspHle::Impl::mixers</a></div><div class="ttdeci">HLE::Mixers mixers</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00075">hle.cpp:75</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a288b1b9295faf1f2fab7292f6d69a340"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a288b1b9295faf1f2fab7292f6d69a340">AudioCore::DspHle::Impl::GenerateCurrentFrame</a></div><div class="ttdeci">StereoFrame16 GenerateCurrentFrame()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00292">hle.cpp:292</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a4829313615ebac6e01f04a5fd0b9e6fe"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a4829313615ebac6e01f04a5fd0b9e6fe">AudioCore::DspHle::Impl::GetDspMemory</a></div><div class="ttdeci">std::array&lt; u8, Memory::DSP_RAM_SIZE &gt; &amp; GetDspMemory()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00208">hle.cpp:208</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_a1dc4ea8637560c3ca5ddbbbb182fe149"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#a1dc4ea8637560c3ca5ddbbbb182fe149">AudioCore::DspHle::GetDspState</a></div><div class="ttdeci">DspState GetDspState() const</div><div class="ttdoc">Get the state of the DSP. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00364">hle.cpp:364</a></div></div>
<div class="ttc" id="namespace_kernel_html_ac7460d5f540b785aea634c73c5430acd"><div class="ttname"><a href="namespace_kernel.html#ac7460d5f540b785aea634c73c5430acd">Kernel::g_current_process</a></div><div class="ttdeci">SharedPtr&lt; Process &gt; g_current_process</div><div class="ttdef"><b>Definition:</b> <a href="process_8cpp_source.html#l00333">process.cpp:333</a></div></div>
<div class="ttc" id="namespace_settings_html_adaae651c5cee72bd19a07b6ff390aff3"><div class="ttname"><a href="namespace_settings.html#adaae651c5cee72bd19a07b6ff390aff3">Settings::Values::headphones_connected</a></div><div class="ttdeci">bool headphones_connected</div><div class="ttdef"><b>Definition:</b> <a href="settings_8h_source.html#l00103">settings.h:103</a></div></div>
<div class="ttc" id="class_audio_core_1_1_h_l_e_1_1_source_html"><div class="ttname"><a href="class_audio_core_1_1_h_l_e_1_1_source.html">AudioCore::HLE::Source</a></div><div class="ttdoc">This module performs: </div><div class="ttdef"><b>Definition:</b> <a href="source_8h_source.html#l00029">source.h:29</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_ab31ebf89e6425e8d2e9b736d7fbc3584"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#ab31ebf89e6425e8d2e9b736d7fbc3584">AudioCore::DspHle::OutputCallback</a></div><div class="ttdeci">void OutputCallback(s16 *buffer, std::size_t num_frames)</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00418">hle.cpp:418</a></div></div>
<div class="ttc" id="namespace_cheat_core_html_a4c2d120d71465975153d17dfa69c492e"><div class="ttname"><a href="namespace_cheat_core.html#a4c2d120d71465975153d17dfa69c492e">CheatCore::Shutdown</a></div><div class="ttdeci">void Shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="cheat__core_8cpp_source.html#l00036">cheat_core.cpp:36</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a2081931b55d2fc2f5cd94ac6ccbe65f7"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a2081931b55d2fc2f5cd94ac6ccbe65f7">AudioCore::DspHle::Impl::dsp_dsp</a></div><div class="ttdeci">std::weak_ptr&lt; DSP_DSP &gt; dsp_dsp</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00080">hle.cpp:80</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a0ace3ccfcb1cd08b6a1d1c06e90824d9"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0ace3ccfcb1cd08b6a1d1c06e90824d9">AudioCore::DspHle::Impl::WriteRegion</a></div><div class="ttdeci">HLE::SharedMemory &amp; WriteRegion()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00288">hle.cpp:288</a></div></div>
<div class="ttc" id="common__types_8h_html_a66e1d499241ccae9a18a20a1f4f0590d"><div class="ttname"><a href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a></div><div class="ttdeci">std::uint64_t u64</div><div class="ttdoc">64-bit unsigned int </div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00038">common_types.h:38</a></div></div>
<div class="ttc" id="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p_html_a33adad8f8a8009bef3f429779e2850a8"><div class="ttname"><a href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html#a33adad8f8a8009bef3f429779e2850a8">Service::DSP::DSP_DSP::InterruptType</a></div><div class="ttdeci">InterruptType</div><div class="ttdef"><b>Definition:</b> <a href="dsp__dsp_8h_source.html#l00021">dsp_dsp.h:21</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_ae6838d5de620e8c3063c8c5c916f6e15"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ae6838d5de620e8c3063c8c5c916f6e15">AudioCore::DspHle::Impl::AudioPipeWriteStructAddresses</a></div><div class="ttdeci">void AudioPipeWriteStructAddresses()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00232">hle.cpp:232</a></div></div>
<div class="ttc" id="class_audio_core_1_1_time_stretcher_html_a4e82558836b7fd9a632f171d5746b203"><div class="ttname"><a href="class_audio_core_1_1_time_stretcher.html#a4e82558836b7fd9a632f171d5746b203">AudioCore::TimeStretcher::Flush</a></div><div class="ttdeci">void Flush()</div><div class="ttdef"><b>Definition:</b> <a href="time__stretch_8cpp_source.html#l00069">time_stretch.cpp:69</a></div></div>
<div class="ttc" id="sink__details_8h_html"><div class="ttname"><a href="sink__details_8h.html">sink_details.h</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a7a08196052bc78580b076e133f416500abddd4f44136f466c065a2c7a4c53e75b"><div class="ttname"><a href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500abddd4f44136f466c065a2c7a4c53e75b">AudioCore::DspState::Sleeping</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a89db714fad62f3bc5bb4f9a42ffcb8cd"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a89db714fad62f3bc5bb4f9a42ffcb8cd">AudioCore::DspHle::Impl::Impl</a></div><div class="ttdeci">Impl(DspHle &amp;parent)</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00083">hle.cpp:83</a></div></div>
<div class="ttc" id="namespace_core_timing_html_a1d0fc13b562a6c699cdcbfd4ccdfbc10"><div class="ttname"><a href="namespace_core_timing.html#a1d0fc13b562a6c699cdcbfd4ccdfbc10">CoreTiming::UnscheduleEvent</a></div><div class="ttdeci">void UnscheduleEvent(const EventType *event_type, u64 userdata)</div><div class="ttdef"><b>Definition:</b> <a href="core__timing_8cpp_source.html#l00151">core_timing.cpp:151</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_ac56ed2592dd1b4698c97cdbb55a33554"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#ac56ed2592dd1b4698c97cdbb55a33554">AudioCore::DspHle::OutputFrame</a></div><div class="ttdeci">void OutputFrame(StereoFrame16 &amp;frame)</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00411">hle.cpp:411</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_acc8feeb6a6bdd0f6d832886611962add"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#acc8feeb6a6bdd0f6d832886611962add">AudioCore::DspHle::impl</a></div><div class="ttdeci">std::unique_ptr&lt; Impl &gt; impl</div><div class="ttdef"><b>Definition:</b> <a href="hle_8h_source.html#l00092">hle.h:92</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a07ca5e8c2e2a998f9be3da35cc8dbb7cab22f0418e8ac915eb66f829d262d14a2"><div class="ttname"><a href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7cab22f0418e8ac915eb66f829d262d14a2">AudioCore::DspPipe::Audio</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_ad27e4f15307e34733bcb7b26051832fe"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#ad27e4f15307e34733bcb7b26051832fe">AudioCore::DspHle::IsOutputAllowed</a></div><div class="ttdeci">bool IsOutputAllowed()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00453">hle.cpp:453</a></div></div>
<div class="ttc" id="audio__core_2hle_2shared__memory_8h_html"><div class="ttname"><a href="audio__core_2hle_2shared__memory_8h.html">shared_memory.h</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_aa5120d6c133ddf119954908b38ab1c31"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#aa5120d6c133ddf119954908b38ab1c31">AudioCore::DspHle::Impl::AudioTickCallback</a></div><div class="ttdeci">void AudioTickCallback(s64 cycles_late)</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00347">hle.cpp:347</a></div></div>
<div class="ttc" id="core__timing_8h_html"><div class="ttname"><a href="core__timing_8h.html">core_timing.h</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_ac83d5b239d580c36301ecd441ae344e1"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#ac83d5b239d580c36301ecd441ae344e1">AudioCore::DspHle::GetSink</a></div><div class="ttdeci">Sink &amp; GetSink()</div><div class="ttdoc">Get the current sink. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00396">hle.cpp:396</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_a13fdd719a39f01a36dd92dd2f1659e62"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#a13fdd719a39f01a36dd92dd2f1659e62">AudioCore::DspHle::GetPipeReadableSize</a></div><div class="ttdeci">std::size_t GetPipeReadableSize(DspPipe pipe_number) const</div><div class="ttdoc">How much data is left in pipe. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00372">hle.cpp:372</a></div></div>
<div class="ttc" id="assert_8h_html_add09d39ec888c2d7e12877586f29368d"><div class="ttname"><a href="assert_8h.html#add09d39ec888c2d7e12877586f29368d">UNIMPLEMENTED</a></div><div class="ttdeci">#define UNIMPLEMENTED()</div><div class="ttdef"><b>Definition:</b> <a href="assert_8h_source.html#l00055">assert.h:55</a></div></div>
<div class="ttc" id="namespace_settings_html_a89bad2e81a950120963b3f26c691810a"><div class="ttname"><a href="namespace_settings.html#a89bad2e81a950120963b3f26c691810a">Settings::values</a></div><div class="ttdeci">Values values</div><div class="ttdef"><b>Definition:</b> <a href="settings_8cpp_source.html#l00015">settings.cpp:15</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a07ca5e8c2e2a998f9be3da35cc8dbb7c"><div class="ttname"><a href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7c">AudioCore::DspPipe</a></div><div class="ttdeci">DspPipe</div><div class="ttdef"><b>Definition:</b> <a href="audio__types_8h_source.html#l00030">audio_types.h:30</a></div></div>
<div class="ttc" id="common__types_8h_html_a65cf28726f89e62ccf2f1354bc2716df"><div class="ttname"><a href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a></div><div class="ttdeci">std::uint32_t u32</div><div class="ttdoc">32-bit unsigned word </div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00037">common_types.h:37</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a0565622678cba5a9e0bebdc4e2df9601"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0565622678cba5a9e0bebdc4e2df9601">AudioCore::DspHle::Impl::Tick</a></div><div class="ttdeci">bool Tick()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00323">hle.cpp:323</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a92b842904cd30a33571d5254b2b5c4e8"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a92b842904cd30a33571d5254b2b5c4e8">AudioCore::DspHle::Impl::SetServiceToInterrupt</a></div><div class="ttdeci">void SetServiceToInterrupt(std::weak_ptr&lt; DSP_DSP &gt; dsp)</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00212">hle.cpp:212</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_ad3c5b4c1f8ffda608dab3af43c792949"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#ad3c5b4c1f8ffda608dab3af43c792949">AudioCore::DspHle::Impl::WriteU16</a></div><div class="ttdeci">void WriteU16(DspPipe pipe_number, u16 value)</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00223">hle.cpp:223</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a07ca5e8c2e2a998f9be3da35cc8dbb7ca6ce976e8f061b2b5cfe4d0c50c3405dd"><div class="ttname"><a href="namespace_audio_core.html#a07ca5e8c2e2a998f9be3da35cc8dbb7ca6ce976e8f061b2b5cfe4d0c50c3405dd">AudioCore::DspPipe::Binary</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a8083200609e2bec6e4522ae6c94e24c7"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a8083200609e2bec6e4522ae6c94e24c7">AudioCore::DspHle::Impl::sources</a></div><div class="ttdeci">std::array&lt; HLE::Source, HLE::num_sources &gt; sources</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00068">hle.cpp:68</a></div></div>
<div class="ttc" id="common__types_8h_html_a917e58b0692c2df778a27350534cbfe7"><div class="ttname"><a href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a></div><div class="ttdeci">std::uint16_t u16</div><div class="ttdoc">16-bit unsigned short </div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00036">common_types.h:36</a></div></div>
<div class="ttc" id="source_8h_html"><div class="ttname"><a href="source_8h.html">source.h</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a7a08196052bc78580b076e133f416500a521c36a31c2762741cf0f8890cbe05e3"><div class="ttname"><a href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500a521c36a31c2762741cf0f8890cbe05e3">AudioCore::DspState::On</a></div></div>
<div class="ttc" id="settings_8h_html"><div class="ttname"><a href="settings_8h.html">settings.h</a></div></div>
<div class="ttc" id="class_audio_core_1_1_time_stretcher_html_a213a6c2e03b2bca91fa54deb83899c7c"><div class="ttname"><a href="class_audio_core_1_1_time_stretcher.html#a213a6c2e03b2bca91fa54deb83899c7c">AudioCore::TimeStretcher::SetOutputSampleRate</a></div><div class="ttdeci">void SetOutputSampleRate(size_t sample_rate)</div><div class="ttdef"><b>Definition:</b> <a href="time__stretch_8cpp_source.html#l00026">time_stretch.cpp:26</a></div></div>
<div class="ttc" id="log_8h_html_ae1a301a080359216e118c7936bbdbfd9"><div class="ttname"><a href="log_8h.html#ae1a301a080359216e118c7936bbdbfd9">LOG_INFO</a></div><div class="ttdeci">#define LOG_INFO(log_class,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00130">log.h:130</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a7a08196052bc78580b076e133f416500ad15305d7a4e34e02489c74a5ef542f36"><div class="ttname"><a href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500ad15305d7a4e34e02489c74a5ef542f36">AudioCore::DspState::Off</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a3564081d68f932686c999fb9d56adf60"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a3564081d68f932686c999fb9d56adf60">AudioCore::DspHle::Impl::PipeRead</a></div><div class="ttdeci">std::vector&lt; u8 &gt; PipeRead(DspPipe pipe_number, u32 length)</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00100">hle.cpp:100</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_aeca49bcf163864088f88294d966c30e4"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#aeca49bcf163864088f88294d966c30e4">AudioCore::DspHle::PipeWrite</a></div><div class="ttdeci">void PipeWrite(DspPipe pipe_number, const std::vector&lt; u8 &gt; &amp;buffer)</div><div class="ttdoc">Write to a DSP pipe. </div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00376">hle.cpp:376</a></div></div>
<div class="ttc" id="namespace_audio_core_1_1_h_l_e_html_union_audio_core_1_1_h_l_e_1_1_dsp_memory"><div class="ttname"><a href="namespace_audio_core_1_1_h_l_e.html#union_audio_core_1_1_h_l_e_1_1_dsp_memory">AudioCore::HLE::DspMemory</a></div><div class="ttdef"><b>Definition:</b> <a href="audio__core_2hle_2shared__memory_8h_source.html#l00511">shared_memory.h:511</a></div></div>
<div class="ttc" id="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p_html"><div class="ttname"><a href="class_service_1_1_d_s_p_1_1_d_s_p___d_s_p.html">Service::DSP::DSP_DSP</a></div><div class="ttdef"><b>Definition:</b> <a href="dsp__dsp_8h_source.html#l00014">dsp_dsp.h:14</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a5a135c4f8e70425151d92496795a9cb3"><div class="ttname"><a href="namespace_audio_core.html#a5a135c4f8e70425151d92496795a9cb3">AudioCore::titles_output_allowed_shell_closed</a></div><div class="ttdeci">static const std::unordered_set&lt; u64 &gt; titles_output_allowed_shell_closed</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00028">hle.cpp:28</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_abe3216cdf3026bc7831270689e2608d8"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#abe3216cdf3026bc7831270689e2608d8">AudioCore::DspHle::Impl::ReadRegion</a></div><div class="ttdeci">HLE::SharedMemory &amp; ReadRegion()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00284">hle.cpp:284</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_aee1764b29a4238fbc8de3c10165496a1"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#aee1764b29a4238fbc8de3c10165496a1">AudioCore::DspHle::fifo</a></div><div class="ttdeci">Common::RingBuffer&lt; s16, 0x2000, 2 &gt; fifo</div><div class="ttdef"><b>Definition:</b> <a href="hle_8h_source.html#l00086">hle.h:86</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_h_l_e_1_1_shared_memory_html"><div class="ttname"><a href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html">AudioCore::HLE::SharedMemory</a></div><div class="ttdef"><b>Definition:</b> <a href="audio__core_2hle_2shared__memory_8h_source.html#l00465">shared_memory.h:465</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_a308e1fc52818a39e30c121bd1641654e"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#a308e1fc52818a39e30c121bd1641654e">AudioCore::DspHle::flushing_time_stretcher</a></div><div class="ttdeci">std::atomic&lt; bool &gt; flushing_time_stretcher</div><div class="ttdef"><b>Definition:</b> <a href="hle_8h_source.html#l00085">hle.h:85</a></div></div>
<div class="ttc" id="class_common_1_1_ring_buffer_html_afd706926e126d36afe4fab20193311be"><div class="ttname"><a href="class_common_1_1_ring_buffer.html#afd706926e126d36afe4fab20193311be">Common::RingBuffer::Pop</a></div><div class="ttdeci">size_t Pop(void *output, size_t max_slots=~size_t(0))</div><div class="ttdoc">Pops slots from the ring buffer. </div><div class="ttdef"><b>Definition:</b> <a href="ring__buffer_8h_source.html#l00066">ring_buffer.h:66</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_h_l_e_1_1_shared_memory_html_a534589adbeffad24193caf7d386dd930"><div class="ttname"><a href="struct_audio_core_1_1_h_l_e_1_1_shared_memory.html#a534589adbeffad24193caf7d386dd930">AudioCore::HLE::SharedMemory::source_statuses</a></div><div class="ttdeci">SourceStatus source_statuses</div><div class="ttdef"><b>Definition:</b> <a href="audio__core_2hle_2shared__memory_8h_source.html#l00475">shared_memory.h:475</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html">AudioCore::DspHle::Impl</a></div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00034">hle.cpp:34</a></div></div>
<div class="ttc" id="class_core_1_1_system_html_ab2f9ff357787ec877567d8c4ffe2a2d4"><div class="ttname"><a href="class_core_1_1_system.html#ab2f9ff357787ec877567d8c4ffe2a2d4">Core::System::GetInstance</a></div><div class="ttdeci">static System &amp; GetInstance()</div><div class="ttdoc">Gets the instance of the System singleton class. </div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00049">core.h:49</a></div></div>
<div class="ttc" id="namespace_audio_core_html_a7a08196052bc78580b076e133f416500"><div class="ttname"><a href="namespace_audio_core.html#a7a08196052bc78580b076e133f416500">AudioCore::DspState</a></div><div class="ttdeci">DspState</div><div class="ttdef"><b>Definition:</b> <a href="audio__types_8h_source.html#l00037">audio_types.h:37</a></div></div>
<div class="ttc" id="assert_8h_html_a9f920d5e0c0e8780d4ce9bfb15bfd9e2"><div class="ttname"><a href="assert_8h.html#a9f920d5e0c0e8780d4ce9bfb15bfd9e2">ASSERT</a></div><div class="ttdeci">#define ASSERT(_a_)</div><div class="ttdef"><b>Definition:</b> <a href="assert_8h_source.html#l00030">assert.h:30</a></div></div>
<div class="ttc" id="log_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a6f18492244e69e10b8a8cbee46e3d850"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a6f18492244e69e10b8a8cbee46e3d850">AudioCore::DspHle::Impl::CurrentRegionIndex</a></div><div class="ttdeci">std::size_t CurrentRegionIndex() const</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00265">hle.cpp:265</a></div></div>
<div class="ttc" id="namespace_audio_core_1_1_h_l_e_html_aa411a205db7fc57847a2f5d6ec369d0b"><div class="ttname"><a href="namespace_audio_core_1_1_h_l_e.html#aa411a205db7fc57847a2f5d6ec369d0b">AudioCore::HLE::num_sources</a></div><div class="ttdeci">constexpr std::size_t num_sources</div><div class="ttdef"><b>Definition:</b> <a href="audio__core_2hle_2common_8h_source.html#l00012">common.h:12</a></div></div>
<div class="ttc" id="class_audio_core_1_1_time_stretcher_html_a1654b9ad3979cec7fcbcaad3641040e5"><div class="ttname"><a href="class_audio_core_1_1_time_stretcher.html#a1654b9ad3979cec7fcbcaad3641040e5">AudioCore::TimeStretcher::Process</a></div><div class="ttdeci">size_t Process(const s16 *in, size_t num_in, s16 *out, size_t num_out)</div><div class="ttdef"><b>Definition:</b> <a href="time__stretch_8cpp_source.html#l00031">time_stretch.cpp:31</a></div></div>
<div class="ttc" id="class_audio_core_1_1_sink_html"><div class="ttname"><a href="class_audio_core_1_1_sink.html">AudioCore::Sink</a></div><div class="ttdoc">This class is an interface for an audio sink. </div><div class="ttdef"><b>Definition:</b> <a href="sink_8h_source.html#l00019">sink.h:19</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a81fb74000f9c2ce306a9f8fa39f170dc"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a81fb74000f9c2ce306a9f8fa39f170dc">AudioCore::DspHle::Impl::IsOutputAllowed</a></div><div class="ttdeci">bool IsOutputAllowed()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00337">hle.cpp:337</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_a31e078156150e483fd018052f0cad6c3"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#a31e078156150e483fd018052f0cad6c3">AudioCore::DspHle::DspHle</a></div><div class="ttdeci">DspHle()</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00361">hle.cpp:361</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_sink_details_html"><div class="ttname"><a href="struct_audio_core_1_1_sink_details.html">AudioCore::SinkDetails</a></div><div class="ttdef"><b>Definition:</b> <a href="sink__details_8h_source.html#l00016">sink_details.h:16</a></div></div>
<div class="ttc" id="class_audio_core_1_1_dsp_hle_html_a087aeaefefa4ab8756b83b8c841a3520"><div class="ttname"><a href="class_audio_core_1_1_dsp_hle.html#a087aeaefefa4ab8756b83b8c841a3520">AudioCore::DspHle::sink</a></div><div class="ttdeci">std::unique_ptr&lt; Sink &gt; sink</div><div class="ttdef"><b>Definition:</b> <a href="hle_8h_source.html#l00083">hle.h:83</a></div></div>
<div class="ttc" id="hle_8h_html"><div class="ttname"><a href="hle_8h.html">hle.h</a></div></div>
<div class="ttc" id="audio__core_2hle_2common_8h_html"><div class="ttname"><a href="audio__core_2hle_2common_8h.html">common.h</a></div></div>
<div class="ttc" id="struct_audio_core_1_1_dsp_hle_1_1_impl_html_a0e49d2af234beabaf6ec8226d9f346cf"><div class="ttname"><a href="struct_audio_core_1_1_dsp_hle_1_1_impl.html#a0e49d2af234beabaf6ec8226d9f346cf">AudioCore::DspHle::Impl::dsp_memory</a></div><div class="ttdeci">HLE::DspMemory dsp_memory</div><div class="ttdef"><b>Definition:</b> <a href="hle_8cpp_source.html#l00067">hle.cpp:67</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_d347157373afa198ba020a430d2bf08b.html">audio_core</a></li><li class="navelem"><a class="el" href="dir_08081220432349ff005c8a7c399d1361.html">hle</a></li><li class="navelem"><a class="el" href="hle_8cpp.html">hle.cpp</a></li>
    <li class="footer">Generated on Thu Sep 13 2018 12:49:43 for Citra by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
