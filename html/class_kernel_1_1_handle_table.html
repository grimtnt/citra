<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Citra: Kernel::HandleTable Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="doc-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Citra
   </div>
   <div id="projectbrief">Nintendo 3DS emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_kernel_1_1_handle_table.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_kernel_1_1_handle_table-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Kernel::HandleTable Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>This class allows the creation of Handles, which are references to objects that can be tested for validity and looked up.  
 <a href="class_kernel_1_1_handle_table.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="handle__table_8h_source.html">handle_table.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Kernel::HandleTable:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_kernel_1_1_handle_table.png" usemap="#Kernel::HandleTable_map" alt=""/>
  <map id="Kernel::HandleTable_map" name="Kernel::HandleTable_map">
<area href="class_non_copyable.html" alt="NonCopyable" shape="rect" coords="0,0,126,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a54c36c97db7fa34ce2440d78729173bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a54c36c97db7fa34ce2440d78729173bf">HandleTable</a> ()</td></tr>
<tr class="separator:a54c36c97db7fa34ce2440d78729173bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b29630a4f933d886325cdf00528f46e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_result_val.html">ResultVal</a>&lt; <a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a5b29630a4f933d886325cdf00528f46e">Create</a> (<a class="el" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">SharedPtr</a>&lt; <a class="el" href="class_kernel_1_1_object.html">Object</a> &gt; obj)</td></tr>
<tr class="memdesc:a5b29630a4f933d886325cdf00528f46e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a handle for the given object.  <a href="#a5b29630a4f933d886325cdf00528f46e">More...</a><br /></td></tr>
<tr class="separator:a5b29630a4f933d886325cdf00528f46e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a297af11b73a13e7cd6a7b8ab16fc9f95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_result_val.html">ResultVal</a>&lt; <a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a297af11b73a13e7cd6a7b8ab16fc9f95">Duplicate</a> (<a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> handle)</td></tr>
<tr class="memdesc:a297af11b73a13e7cd6a7b8ab16fc9f95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a new handle that points to the same object as the passed in handle.  <a href="#a297af11b73a13e7cd6a7b8ab16fc9f95">More...</a><br /></td></tr>
<tr class="separator:a297af11b73a13e7cd6a7b8ab16fc9f95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f8903aec8da59b47d359239430de93d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="union_result_code.html">ResultCode</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a1f8903aec8da59b47d359239430de93d">Close</a> (<a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> handle)</td></tr>
<tr class="memdesc:a1f8903aec8da59b47d359239430de93d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a handle, removing it from the table and decreasing the object's ref-count.  <a href="#a1f8903aec8da59b47d359239430de93d">More...</a><br /></td></tr>
<tr class="separator:a1f8903aec8da59b47d359239430de93d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5e61c8520d15199d85711185b4d786a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#aa5e61c8520d15199d85711185b4d786a">IsValid</a> (<a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> handle) const</td></tr>
<tr class="memdesc:aa5e61c8520d15199d85711185b4d786a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if a handle is valid and points to an existing object.  <a href="#aa5e61c8520d15199d85711185b4d786a">More...</a><br /></td></tr>
<tr class="separator:aa5e61c8520d15199d85711185b4d786a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac798012d75b374f0c3de6b5f8a901400"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">SharedPtr</a>&lt; <a class="el" href="class_kernel_1_1_object.html">Object</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#ac798012d75b374f0c3de6b5f8a901400">GetGeneric</a> (<a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> handle) const</td></tr>
<tr class="memdesc:ac798012d75b374f0c3de6b5f8a901400"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up a handle.  <a href="#ac798012d75b374f0c3de6b5f8a901400">More...</a><br /></td></tr>
<tr class="separator:ac798012d75b374f0c3de6b5f8a901400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49b9a4eb348b1528afac22d7fdd34a3a"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a49b9a4eb348b1528afac22d7fdd34a3a"><td class="memTemplItemLeft" align="right" valign="top"><a class="el" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">SharedPtr</a>&lt; T &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a49b9a4eb348b1528afac22d7fdd34a3a">Get</a> (<a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> handle) const</td></tr>
<tr class="memdesc:a49b9a4eb348b1528afac22d7fdd34a3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up a handle while verifying its type.  <a href="#a49b9a4eb348b1528afac22d7fdd34a3a">More...</a><br /></td></tr>
<tr class="separator:a49b9a4eb348b1528afac22d7fdd34a3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c545db877143908068dbb06b4f9f36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a99c545db877143908068dbb06b4f9f36">Clear</a> ()</td></tr>
<tr class="memdesc:a99c545db877143908068dbb06b4f9f36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes all handles held in this table.  <a href="#a99c545db877143908068dbb06b4f9f36">More...</a><br /></td></tr>
<tr class="separator:a99c545db877143908068dbb06b4f9f36"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:ae19e8e9e518b808bab8b73c4dd6f25f8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#ae19e8e9e518b808bab8b73c4dd6f25f8">GetSlot</a> (<a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> handle)</td></tr>
<tr class="separator:ae19e8e9e518b808bab8b73c4dd6f25f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e2e2acb6f7572de3fe77188a566870"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#ab1e2e2acb6f7572de3fe77188a566870">GetGeneration</a> (<a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> handle)</td></tr>
<tr class="separator:ab1e2e2acb6f7572de3fe77188a566870"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aca536e60ca2649ff706dfabb68fd14d1"><td class="memItemLeft" align="right" valign="top">std::array&lt; <a class="el" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">SharedPtr</a>&lt; <a class="el" href="class_kernel_1_1_object.html">Object</a> &gt;, <a class="el" href="class_kernel_1_1_handle_table.html#aa6d631a657df9707db513085509ac7e7">MAX_COUNT</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#aca536e60ca2649ff706dfabb68fd14d1">objects</a></td></tr>
<tr class="memdesc:aca536e60ca2649ff706dfabb68fd14d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores the <a class="el" href="class_kernel_1_1_object.html">Object</a> referenced by the handle or null if the slot is empty.  <a href="#aca536e60ca2649ff706dfabb68fd14d1">More...</a><br /></td></tr>
<tr class="separator:aca536e60ca2649ff706dfabb68fd14d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d9afdd1ed45b3dfaf1c2cbcf2d5ac94"><td class="memItemLeft" align="right" valign="top">std::array&lt; <a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a>, <a class="el" href="class_kernel_1_1_handle_table.html#aa6d631a657df9707db513085509ac7e7">MAX_COUNT</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a6d9afdd1ed45b3dfaf1c2cbcf2d5ac94">generations</a></td></tr>
<tr class="memdesc:a6d9afdd1ed45b3dfaf1c2cbcf2d5ac94"><td class="mdescLeft">&#160;</td><td class="mdescRight">The value of <code>next_generation</code> when the handle was created, used to check for validity.  <a href="#a6d9afdd1ed45b3dfaf1c2cbcf2d5ac94">More...</a><br /></td></tr>
<tr class="separator:a6d9afdd1ed45b3dfaf1c2cbcf2d5ac94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d24ebc98b989513abb48d474e419000"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a7d24ebc98b989513abb48d474e419000">next_generation</a></td></tr>
<tr class="memdesc:a7d24ebc98b989513abb48d474e419000"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global counter of the number of created handles.  <a href="#a7d24ebc98b989513abb48d474e419000">More...</a><br /></td></tr>
<tr class="separator:a7d24ebc98b989513abb48d474e419000"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3aa936b5cbd41a2c12756e03919ca72b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#a3aa936b5cbd41a2c12756e03919ca72b">next_free_slot</a></td></tr>
<tr class="memdesc:a3aa936b5cbd41a2c12756e03919ca72b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Head of the free slots linked list.  <a href="#a3aa936b5cbd41a2c12756e03919ca72b">More...</a><br /></td></tr>
<tr class="separator:a3aa936b5cbd41a2c12756e03919ca72b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:aa6d631a657df9707db513085509ac7e7"><td class="memItemLeft" align="right" valign="top">static const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_kernel_1_1_handle_table.html#aa6d631a657df9707db513085509ac7e7">MAX_COUNT</a> = 4096</td></tr>
<tr class="memdesc:aa6d631a657df9707db513085509ac7e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the maximum limit of handles allowed per process in CTR-OS.  <a href="#aa6d631a657df9707db513085509ac7e7">More...</a><br /></td></tr>
<tr class="separator:aa6d631a657df9707db513085509ac7e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_methods_class_non_copyable"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_class_non_copyable')"><img src="closed.png" alt="-"/>&#160;Private Member Functions inherited from <a class="el" href="class_non_copyable.html">NonCopyable</a></td></tr>
<tr class="memitem:a1ad188c18b22b716581cb81f07ca0377 inherit pub_methods_class_non_copyable"><td class="memItemLeft" align="right" valign="top">constexpr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_non_copyable.html#a1ad188c18b22b716581cb81f07ca0377">NonCopyable</a> ()=default</td></tr>
<tr class="separator:a1ad188c18b22b716581cb81f07ca0377 inherit pub_methods_class_non_copyable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7571895e9a3514424751a43b90dfb2bb inherit pub_methods_class_non_copyable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_non_copyable.html#a7571895e9a3514424751a43b90dfb2bb">~NonCopyable</a> ()=default</td></tr>
<tr class="separator:a7571895e9a3514424751a43b90dfb2bb inherit pub_methods_class_non_copyable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501d34ffcc34b30de6d541887a901057 inherit pub_methods_class_non_copyable"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_non_copyable.html#a501d34ffcc34b30de6d541887a901057">NonCopyable</a> (const <a class="el" href="class_non_copyable.html">NonCopyable</a> &amp;)=delete</td></tr>
<tr class="separator:a501d34ffcc34b30de6d541887a901057 inherit pub_methods_class_non_copyable"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae6391564aa27ce3e54de788f5b33bad inherit pub_methods_class_non_copyable"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_non_copyable.html">NonCopyable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_non_copyable.html#aae6391564aa27ce3e54de788f5b33bad">operator=</a> (const <a class="el" href="class_non_copyable.html">NonCopyable</a> &amp;)=delete</td></tr>
<tr class="separator:aae6391564aa27ce3e54de788f5b33bad inherit pub_methods_class_non_copyable"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class allows the creation of Handles, which are references to objects that can be tested for validity and looked up. </p>
<p>Here they are used to pass references to kernel objects to/from the emulated process. it has been designed so that it follows the same handle format and has approximately the same restrictions as the handle manager in the CTR-OS.</p>
<p>Handles contain two sub-fields: a slot index (bits 31:15) and a generation value (bits 14:0). The slot index is used to index into the arrays in this class to access the data corresponding to the Handle.</p>
<p>To prevent accidental use of a freed Handle whose slot has already been reused, a global counter is kept and incremented every time a Handle is created. This is the Handle's "generation". The value of the counter is stored into the Handle as well as in the handle table (in the "generations" array). When looking up a handle, the Handle's generation must match with the value stored on the class, otherwise the Handle is considered invalid.</p>
<p>To find free slots when allocating a Handle without needing to scan the entire object array, the generations field of unallocated slots is re-purposed as a linked list of indices to free slots. When a Handle is created, an index is popped off the list and used for the new Handle. When it is destroyed, it is again pushed onto the list to be re-used by the next allocation. It is likely that this allocation strategy differs from the one used in CTR-OS, but this hasn't been verified and isn't likely to cause any problems. </p>

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00043">43</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a54c36c97db7fa34ce2440d78729173bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54c36c97db7fa34ce2440d78729173bf">&#9670;&nbsp;</a></span>HandleTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Kernel::HandleTable::HandleTable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handle__table_8cpp_source.html#l00017">17</a> of file <a class="el" href="handle__table_8cpp_source.html">handle_table.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a99c545db877143908068dbb06b4f9f36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99c545db877143908068dbb06b4f9f36">&#9670;&nbsp;</a></span>Clear()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Kernel::HandleTable::Clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes all handles held in this table. </p>

<p class="definition">Definition at line <a class="el" href="handle__table_8cpp_source.html#l00088">88</a> of file <a class="el" href="handle__table_8cpp_source.html">handle_table.cpp</a>.</p>

</div>
</div>
<a id="a1f8903aec8da59b47d359239430de93d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f8903aec8da59b47d359239430de93d">&#9670;&nbsp;</a></span>Close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="union_result_code.html">ResultCode</a> Kernel::HandleTable::Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes a handle, removing it from the table and decreasing the object's ref-count. </p>
<dl class="section return"><dt>Returns</dt><dd><code>RESULT_SUCCESS</code> or one of the following errors:<ul>
<li><code>ERR_INVALID_HANDLE</code>: an invalid handle was passed in. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="handle__table_8cpp_source.html#l00055">55</a> of file <a class="el" href="handle__table_8cpp_source.html">handle_table.cpp</a>.</p>

</div>
</div>
<a id="a5b29630a4f933d886325cdf00528f46e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b29630a4f933d886325cdf00528f46e">&#9670;&nbsp;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_result_val.html">ResultVal</a>&lt; <a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> &gt; Kernel::HandleTable::Create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">SharedPtr</a>&lt; <a class="el" href="class_kernel_1_1_object.html">Object</a> &gt;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a handle for the given object. </p>
<dl class="section return"><dt>Returns</dt><dd>The created Handle or one of the following errors:<ul>
<li><code>ERR_OUT_OF_HANDLES</code>: the maximum number of handles has been exceeded. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="handle__table_8cpp_source.html#l00022">22</a> of file <a class="el" href="handle__table_8cpp_source.html">handle_table.cpp</a>.</p>

</div>
</div>
<a id="a297af11b73a13e7cd6a7b8ab16fc9f95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a297af11b73a13e7cd6a7b8ab16fc9f95">&#9670;&nbsp;</a></span>Duplicate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_result_val.html">ResultVal</a>&lt; <a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a> &gt; Kernel::HandleTable::Duplicate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a new handle that points to the same object as the passed in handle. </p>
<dl class="section return"><dt>Returns</dt><dd>The duplicated Handle or one of the following errors:<ul>
<li><code>ERR_INVALID_HANDLE</code>: an invalid handle was passed in.</li>
<li>Any errors returned by <code><a class="el" href="class_kernel_1_1_handle_table.html#a5b29630a4f933d886325cdf00528f46e" title="Allocates a handle for the given object. ">Create()</a></code>. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="handle__table_8cpp_source.html#l00046">46</a> of file <a class="el" href="handle__table_8cpp_source.html">handle_table.cpp</a>.</p>

</div>
</div>
<a id="a49b9a4eb348b1528afac22d7fdd34a3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49b9a4eb348b1528afac22d7fdd34a3a">&#9670;&nbsp;</a></span>Get()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">SharedPtr</a>&lt;T&gt; Kernel::HandleTable::Get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Looks up a handle while verifying its type. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the looked-up object, or <code>nullptr</code> if the handle is not valid or its type differs from the requested one. </dd></dl>

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00084">84</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>

</div>
</div>
<a id="ab1e2e2acb6f7572de3fe77188a566870"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e2e2acb6f7572de3fe77188a566870">&#9670;&nbsp;</a></span>GetGeneration()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> Kernel::HandleTable::GetGeneration </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00101">101</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>

</div>
</div>
<a id="ac798012d75b374f0c3de6b5f8a901400"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac798012d75b374f0c3de6b5f8a901400">&#9670;&nbsp;</a></span>GetGeneric()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">SharedPtr</a>&lt; <a class="el" href="class_kernel_1_1_object.html">Object</a> &gt; Kernel::HandleTable::GetGeneric </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Looks up a handle. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the looked-up object, or <code>nullptr</code> if the handle is not valid. </dd></dl>

<p class="definition">Definition at line <a class="el" href="handle__table_8cpp_source.html#l00075">75</a> of file <a class="el" href="handle__table_8cpp_source.html">handle_table.cpp</a>.</p>

</div>
</div>
<a id="ae19e8e9e518b808bab8b73c4dd6f25f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae19e8e9e518b808bab8b73c4dd6f25f8">&#9670;&nbsp;</a></span>GetSlot()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> Kernel::HandleTable::GetSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00098">98</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>

</div>
</div>
<a id="aa5e61c8520d15199d85711185b4d786a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5e61c8520d15199d85711185b4d786a">&#9670;&nbsp;</a></span>IsValid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Kernel::HandleTable::IsValid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_kernel.html#ad6b2714868b2c2be12c3b00822d18b2e">Handle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if a handle is valid and points to an existing object. </p>

<p class="definition">Definition at line <a class="el" href="handle__table_8cpp_source.html#l00068">68</a> of file <a class="el" href="handle__table_8cpp_source.html">handle_table.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6d9afdd1ed45b3dfaf1c2cbcf2d5ac94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d9afdd1ed45b3dfaf1c2cbcf2d5ac94">&#9670;&nbsp;</a></span>generations</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt;<a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a>, <a class="el" href="class_kernel_1_1_handle_table.html#aa6d631a657df9707db513085509ac7e7">MAX_COUNT</a>&gt; Kernel::HandleTable::generations</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The value of <code>next_generation</code> when the handle was created, used to check for validity. </p>
<p>For empty slots, contains the index of the next free slot in the list. </p>

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00112">112</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>

</div>
</div>
<a id="aa6d631a657df9707db513085509ac7e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6d631a657df9707db513085509ac7e7">&#9670;&nbsp;</a></span>MAX_COUNT</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::size_t Kernel::HandleTable::MAX_COUNT = 4096</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the maximum limit of handles allowed per process in CTR-OS. </p>
<p>It can be further reduced by ExHeader values, but this is not emulated here. </p>

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00096">96</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>

</div>
</div>
<a id="a3aa936b5cbd41a2c12756e03919ca72b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3aa936b5cbd41a2c12756e03919ca72b">&#9670;&nbsp;</a></span>next_free_slot</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> Kernel::HandleTable::next_free_slot</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Head of the free slots linked list. </p>

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00121">121</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>

</div>
</div>
<a id="a7d24ebc98b989513abb48d474e419000"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d24ebc98b989513abb48d474e419000">&#9670;&nbsp;</a></span>next_generation</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common__types_8h.html#a917e58b0692c2df778a27350534cbfe7">u16</a> Kernel::HandleTable::next_generation</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global counter of the number of created handles. </p>
<p>Stored in <code>generations</code> when a handle is created, and wraps around to 1 when it hits 0x8000. </p>

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00118">118</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>

</div>
</div>
<a id="aca536e60ca2649ff706dfabb68fd14d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca536e60ca2649ff706dfabb68fd14d1">&#9670;&nbsp;</a></span>objects</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::array&lt;<a class="el" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">SharedPtr</a>&lt;<a class="el" href="class_kernel_1_1_object.html">Object</a>&gt;, <a class="el" href="class_kernel_1_1_handle_table.html#aa6d631a657df9707db513085509ac7e7">MAX_COUNT</a>&gt; Kernel::HandleTable::objects</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stores the <a class="el" href="class_kernel_1_1_object.html">Object</a> referenced by the handle or null if the slot is empty. </p>

<p class="definition">Definition at line <a class="el" href="handle__table_8h_source.html#l00106">106</a> of file <a class="el" href="handle__table_8h_source.html">handle_table.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/core/hle/kernel/<a class="el" href="handle__table_8h_source.html">handle_table.h</a></li>
<li>src/core/hle/kernel/<a class="el" href="handle__table_8cpp_source.html">handle_table.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_kernel.html">Kernel</a></li><li class="navelem"><a class="el" href="class_kernel_1_1_handle_table.html">HandleTable</a></li>
    <li class="footer">Generated on Thu Sep 13 2018 12:49:45 for Citra by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
