<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Citra: src/core/hle/service/fs/archive.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="doc-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Citra
   </div>
   <div id="projectbrief">Nintendo 3DS emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('archive_8cpp_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">archive.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="archive_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright 2014 Citra Emulator Project</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// Licensed under GPLv2 or any later version</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Refer to the license.txt file included.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;cinttypes&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;cstddef&gt;</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;memory&gt;</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &lt;system_error&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;type_traits&gt;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;boost/container/flat_map.hpp&gt;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="assert_8h.html">common/assert.h</a>&quot;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common__types_8h.html">common/common_types.h</a>&quot;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="file__util_8h.html">common/file_util.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_8h.html">common/logging/log.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__backend_8h.html">core/file_sys/archive_backend.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__extsavedata_8h.html">core/file_sys/archive_extsavedata.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__ncch_8h.html">core/file_sys/archive_ncch.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__other__savedata_8h.html">core/file_sys/archive_other_savedata.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__savedata_8h.html">core/file_sys/archive_savedata.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__sdmc_8h.html">core/file_sys/archive_sdmc.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__sdmcwriteonly_8h.html">core/file_sys/archive_sdmcwriteonly.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__selfncch_8h.html">core/file_sys/archive_selfncch.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive__systemsavedata_8h.html">core/file_sys/archive_systemsavedata.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="directory__backend_8h.html">core/file_sys/directory_backend.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="file__sys_2errors_8h.html">core/file_sys/errors.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="file__backend_8h.html">core/file_sys/file_backend.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ipc_8h.html">core/hle/ipc.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="ipc__helpers_8h.html">core/hle/ipc_helpers.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="client__port_8h.html">core/hle/kernel/client_port.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="client__session_8h.html">core/hle/kernel/client_session.h</a>&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="core_2hle_2kernel_2event_8h.html">core/hle/kernel/event.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="handle__table_8h.html">core/hle/kernel/handle_table.h</a>&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="server__session_8h.html">core/hle/kernel/server_session.h</a>&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="result_8h.html">core/hle/result.h</a>&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="archive_8h.html">core/hle/service/fs/archive.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="fs__user_8h.html">core/hle/service/fs/fs_user.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="service_8h.html">core/hle/service/service.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="memory_8h.html">core/memory.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="settings_8h.html">core/settings.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespace_service_1_1_f_s.html">Service::FS</a> {</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// Command to access directory</span></div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956">   47</a></span>&#160;<span class="keyword">enum class</span> <a class="code" href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956">DirectoryCommand</a> : <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> {</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956ac2279ca85d3e1f824a9d710ef0a5654f">Dummy1</a> = 0x000100C6,</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956aa1595abbb4c3a326636dd178757cd6c1">Control</a> = 0x040100C4,</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956a7a1a5f3e79fdc91edf2f5ead9d66abb4">Read</a> = 0x08010042,</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956ad3d2e617335f08df83599665eef8a418">Close</a> = 0x08020000,</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;};</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a9d40a35f287812fa7532b000028b48c1">   54</a></span>&#160;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a9d40a35f287812fa7532b000028b48c1">File::File</a>(std::unique_ptr&lt;FileSys::FileBackend&gt;&amp;&amp; backend, <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; path)</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    : <a class="code" href="class_service_1_1_service_framework.html">ServiceFramework</a>(<span class="stringliteral">&quot;&quot;</span>, 1), path(path), backend(<a class="code" href="namespacestd.html">std</a>::move(backend)) {</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> FunctionInfo functions[] = {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        {0x08010100, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a67cc38959143fdbf5a2b8f84930f6e51">File::OpenSubFile</a>, <span class="stringliteral">&quot;OpenSubFile&quot;</span>},</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        {0x080200C2, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a81c627de6734b9f3e30f9c5b0b3a7904">File::Read</a>, <span class="stringliteral">&quot;Read&quot;</span>},</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        {0x08030102, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a990d8ee1742d9ae86adfd1f85744c679">File::Write</a>, <span class="stringliteral">&quot;Write&quot;</span>},</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        {0x08040000, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a2fd71fc9ff8fe0bc94065ff5130e1f81">File::GetSize</a>, <span class="stringliteral">&quot;GetSize&quot;</span>},</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        {0x08050080, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#af3f86190d11be9126fc8e57244dc50d0">File::SetSize</a>, <span class="stringliteral">&quot;SetSize&quot;</span>},</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        {0x08080000, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a2afa4dcac29008bcf0218193f25b3550">File::Close</a>, <span class="stringliteral">&quot;Close&quot;</span>},</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        {0x08090000, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a2ca21dceac9a4edef48d6ba0c39b3f2e">File::Flush</a>, <span class="stringliteral">&quot;Flush&quot;</span>},</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        {0x080A0040, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a6c9fefbac6c1690f009115bedf297459">File::SetPriority</a>, <span class="stringliteral">&quot;SetPriority&quot;</span>},</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        {0x080B0000, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#a2ba14cd2e0f7b2f54d2543910c230029">File::GetPriority</a>, <span class="stringliteral">&quot;GetPriority&quot;</span>},</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        {0x080C0000, &amp;<a class="code" href="class_service_1_1_f_s_1_1_file.html#ad863bb15de59f59d1750f1eb25b744c7">File::OpenLinkFile</a>, <span class="stringliteral">&quot;OpenLinkFile&quot;</span>},</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    };</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <a class="code" href="class_service_1_1_service_framework.html#a54307718519bef2198366da0a7e69e0e">RegisterHandlers</a>(functions);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;}</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a81c627de6734b9f3e30f9c5b0b3a7904">   71</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#a81c627de6734b9f3e30f9c5b0b3a7904">File::Read</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0802, 3, 2};</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a> offset{rp.Pop&lt;<a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a>&gt;()};</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> length{rp.Pop&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;()};</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="keyword">auto</span>&amp; buffer{rp.PopMappedBuffer()};</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="log_8h.html#ae9fb9e5f54be61c473be717ec6e71298">LOG_TRACE</a>(Service_FS, <span class="stringliteral">&quot;Read {}: offset=0x{:X} length=0x{:08X}&quot;</span>, <a class="code" href="class_service_1_1_f_s_1_1_file.html#a3c1fa30aaa1fbf8275d3bc3166e7b88a">GetName</a>(), offset, length);</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="keywordflow">if</span> (file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a04a760f3333d0f3f3141befb2d18e64b">subfile</a> &amp;&amp; length &gt; file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#aca816d28745ca04ede4429fca81146ac">size</a>) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        <a class="code" href="log_8h.html#a8b510d36fc8a109f98395ce9b6ada954">LOG_WARNING</a>(Service_FS, <span class="stringliteral">&quot;Trying to read beyond the subfile size, truncating&quot;</span>);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        length = <span class="keyword">static_cast&lt;</span><a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a><span class="keyword">&gt;</span>(file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#aca816d28745ca04ede4429fca81146ac">size</a>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    }</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// This file session might have a specific offset from where to start reading, apply it.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    offset += file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a54d36011a07f9e5095228164ebeffe16">offset</a>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (offset + length &gt; <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;GetSize()) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Service_FS,</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                  <span class="stringliteral">&quot;Reading from out of bounds offset=0x{:X} length=0x{:08X} file_size=0x{:X}&quot;</span>,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                  offset, length, <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;GetSize());</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(2, 2)};</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    std::vector&lt;u8&gt; data(length);</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    <a class="code" href="class_result_val.html">ResultVal&lt;std::size_t&gt;</a> read = <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;Read(offset, data.size(), data.data());</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keywordflow">if</span> (read.<a class="code" href="class_result_val.html#a956e71b2e8b8f38eab385784b1d24ff3">Failed</a>()) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        rb.Push(read.<a class="code" href="class_result_val.html#a27e58a273946089f7f58f1eba1d73b99">Code</a>());</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        rb.Push&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;(0);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        buffer.Write(data.data(), 0, *read);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        rb.Push(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        rb.Push&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;(<span class="keyword">static_cast&lt;</span><a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a><span class="keyword">&gt;</span>(*read));</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    rb.PushMappedBuffer(buffer);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    std::chrono::nanoseconds read_timeout_ns{<a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;GetReadDelayNs(length)};</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#ac140c041a57b50c94a05e1db1e31da8a">SleepClientThread</a>(<a class="code" href="namespace_kernel.html#a468effefd7385726635010b18e69a625">Kernel::GetCurrentThread</a>(), <span class="stringliteral">&quot;file::read&quot;</span>, read_timeout_ns,</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                          [](<a class="code" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">Kernel::SharedPtr&lt;Kernel::Thread&gt;</a> thread,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                             <a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx, <a class="code" href="thread_8h.html#a36bd654753f9fb7e2b269831f4e6ad80">ThreadWakeupReason</a> reason) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                              <span class="comment">// Nothing to do here</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                          });</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a990d8ee1742d9ae86adfd1f85744c679">  116</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#a990d8ee1742d9ae86adfd1f85744c679">File::Write</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0803, 4, 2};</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a> offset{rp.Pop&lt;<a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a>&gt;()};</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> length{rp.Pop&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;()};</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> flush{rp.Pop&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;()};</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="keyword">auto</span>&amp; buffer{rp.PopMappedBuffer()};</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="log_8h.html#ae9fb9e5f54be61c473be717ec6e71298">LOG_TRACE</a>(Service_FS, <span class="stringliteral">&quot;Write {}: offset=0x{:X}, length={}, flush=0x{:x}&quot;</span>, <a class="code" href="class_service_1_1_f_s_1_1_file.html#a3c1fa30aaa1fbf8275d3bc3166e7b88a">GetName</a>(), offset,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;              length, flush);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(2, 2)};</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// Subfiles can not be written to</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">if</span> (file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a04a760f3333d0f3f3141befb2d18e64b">subfile</a>) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        rb.Push(<a class="code" href="namespace_file_sys.html#a2e897a20234df21d4b40fe311bffdae8">FileSys::ERROR_UNSUPPORTED_OPEN_FLAGS</a>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        rb.Push&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;(0);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        rb.PushMappedBuffer(buffer);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    std::vector&lt;u8&gt; data(length);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    buffer.Read(data.data(), 0, data.size());</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="class_result_val.html">ResultVal&lt;std::size_t&gt;</a> written = <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;Write(offset, data.size(), flush != 0, data.data());</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (written.<a class="code" href="class_result_val.html#a956e71b2e8b8f38eab385784b1d24ff3">Failed</a>()) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        rb.Push(written.<a class="code" href="class_result_val.html#a27e58a273946089f7f58f1eba1d73b99">Code</a>());</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        rb.Push&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;(0);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        rb.Push(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        rb.Push&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;(<span class="keyword">static_cast&lt;</span><a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a><span class="keyword">&gt;</span>(*written));</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    rb.PushMappedBuffer(buffer);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;}</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a2fd71fc9ff8fe0bc94065ff5130e1f81">  150</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#a2fd71fc9ff8fe0bc94065ff5130e1f81">File::GetSize</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0804, 0, 0};</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(3, 0)};</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    rb.<a class="code" href="class_i_p_c_1_1_response_builder.html#a12d9068ceac4de2e8c19e34ec42ce54e">Push</a>(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    rb.Push&lt;<a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a>&gt;(file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#aca816d28745ca04ede4429fca81146ac">size</a>);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#af3f86190d11be9126fc8e57244dc50d0">  160</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#af3f86190d11be9126fc8e57244dc50d0">File::SetSize</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0805, 2, 0};</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a> size{rp.Pop&lt;<a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a>&gt;()};</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(1, 0)};</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="comment">// SetSize can not be called on subfiles.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (file-&gt;subfile) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        rb.<a class="code" href="class_i_p_c_1_1_response_builder.html#a12d9068ceac4de2e8c19e34ec42ce54e">Push</a>(<a class="code" href="namespace_file_sys.html#a2e897a20234df21d4b40fe311bffdae8">FileSys::ERROR_UNSUPPORTED_OPEN_FLAGS</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    file-&gt;size = size;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;SetSize(size);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    rb.Push(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a2afa4dcac29008bcf0218193f25b3550">  179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#a2afa4dcac29008bcf0218193f25b3550">File::Close</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0808, 0, 0};</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <span class="comment">// TODO(Subv): Only close the backend if this client is the only one left.</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_kernel_1_1_session_request_handler.html#ae593407d92997bb19855d1b4a07ca664">connected_sessions</a>.size() &gt; 1)</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <a class="code" href="log_8h.html#a8b510d36fc8a109f98395ce9b6ada954">LOG_WARNING</a>(Service_FS, <span class="stringliteral">&quot;Closing File backend but {} clients still connected&quot;</span>,</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    <a class="code" href="class_kernel_1_1_session_request_handler.html#ae593407d92997bb19855d1b4a07ca664">connected_sessions</a>.size());</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;Close();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(1, 0)};</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    rb.<a class="code" href="class_i_p_c_1_1_response_builder.html#a12d9068ceac4de2e8c19e34ec42ce54e">Push</a>(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;}</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a2ca21dceac9a4edef48d6ba0c39b3f2e">  192</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#a2ca21dceac9a4edef48d6ba0c39b3f2e">File::Flush</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0809, 0, 0};</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(1, 0)};</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="comment">// Subfiles can not be flushed.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span> (file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a04a760f3333d0f3f3141befb2d18e64b">subfile</a>) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        rb.Push(<a class="code" href="namespace_file_sys.html#a2e897a20234df21d4b40fe311bffdae8">FileSys::ERROR_UNSUPPORTED_OPEN_FLAGS</a>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;Flush();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    rb.Push(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a6c9fefbac6c1690f009115bedf297459">  209</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#a6c9fefbac6c1690f009115bedf297459">File::SetPriority</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x080A, 1, 0};</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#ab5fb097919e34dab50fedf9b9e173593">priority</a> = rp.Pop&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(1, 0)};</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    rb.<a class="code" href="class_i_p_c_1_1_response_builder.html#a12d9068ceac4de2e8c19e34ec42ce54e">Push</a>(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;}</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a2ba14cd2e0f7b2f54d2543910c230029">  219</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#a2ba14cd2e0f7b2f54d2543910c230029">File::GetPriority</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x080B, 0, 0};</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(2, 0)};</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    rb.<a class="code" href="class_i_p_c_1_1_response_builder.html#a12d9068ceac4de2e8c19e34ec42ce54e">Push</a>(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    rb.Push(file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#ab5fb097919e34dab50fedf9b9e173593">priority</a>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#ad863bb15de59f59d1750f1eb25b744c7">  228</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#ad863bb15de59f59d1750f1eb25b744c7">File::OpenLinkFile</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keyword">using</span> <a class="code" href="class_kernel_1_1_client_session.html">Kernel::ClientSession</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="keyword">using</span> <a class="code" href="class_kernel_1_1_server_session.html">Kernel::ServerSession</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">Kernel::SharedPtr</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x080C, 0, 0};</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(1, 2)};</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keyword">auto</span> sessions = ServerSession::CreateSessionPair(<a class="code" href="class_service_1_1_f_s_1_1_file.html#a3c1fa30aaa1fbf8275d3bc3166e7b88a">GetName</a>());</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">auto</span> server = std::get&lt;SharedPtr&lt;ServerSession&gt;&gt;(sessions);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="class_kernel_1_1_session_request_handler.html#a77182c9acb26334f70e3f76ef51e9a3e">ClientConnected</a>(server);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* slot = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(server);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* original_file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#ab5fb097919e34dab50fedf9b9e173593">priority</a> = original_file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#ab5fb097919e34dab50fedf9b9e173593">priority</a>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a54d36011a07f9e5095228164ebeffe16">offset</a> = 0;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#aca816d28745ca04ede4429fca81146ac">size</a> = <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;GetSize();</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a04a760f3333d0f3f3141befb2d18e64b">subfile</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    rb.Push(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    rb.PushMoveObjects(std::get&lt;SharedPtr&lt;ClientSession&gt;&gt;(sessions));</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <a class="code" href="log_8h.html#a8b510d36fc8a109f98395ce9b6ada954">LOG_WARNING</a>(Service_FS, <span class="stringliteral">&quot;(STUBBED) File command OpenLinkFile {}&quot;</span>, <a class="code" href="class_service_1_1_f_s_1_1_file.html#a3c1fa30aaa1fbf8275d3bc3166e7b88a">GetName</a>());</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;}</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#a67cc38959143fdbf5a2b8f84930f6e51">  252</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html#a67cc38959143fdbf5a2b8f84930f6e51">File::OpenSubFile</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0801, 4, 0};</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a> offset{rp.PopRaw&lt;<a class="code" href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a>&gt;()};</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a> size{rp.PopRaw&lt;<a class="code" href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a>&gt;()};</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(1, 2)};</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <span class="keyword">const</span> <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* original_file = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(ctx.<a class="code" href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Session</a>());</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span> (original_file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a04a760f3333d0f3f3141befb2d18e64b">subfile</a>) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        <span class="comment">// OpenSubFile can not be called on a file which is already as subfile</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        rb.Push(<a class="code" href="namespace_file_sys.html#a2e897a20234df21d4b40fe311bffdae8">FileSys::ERROR_UNSUPPORTED_OPEN_FLAGS</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">if</span> (offset &lt; 0 || size &lt; 0) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        rb.Push(<a class="code" href="namespace_file_sys.html#ab2de365c7b9bfcd623b7ea93c55c9f2a">FileSys::ERR_WRITE_BEYOND_END</a>);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    std::size_t end = offset + size;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    <span class="comment">// TODO(Subv): Check for overflow and return ERR_WRITE_BEYOND_END</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (end &gt; original_file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#aca816d28745ca04ede4429fca81146ac">size</a>) {</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        rb.Push(<a class="code" href="namespace_file_sys.html#ab2de365c7b9bfcd623b7ea93c55c9f2a">FileSys::ERR_WRITE_BEYOND_END</a>);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <span class="keyword">using</span> <a class="code" href="class_kernel_1_1_client_session.html">Kernel::ClientSession</a>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="keyword">using</span> <a class="code" href="class_kernel_1_1_server_session.html">Kernel::ServerSession</a>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keyword">using</span> <a class="code" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">Kernel::SharedPtr</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <span class="keyword">auto</span> sessions = ServerSession::CreateSessionPair(<a class="code" href="class_service_1_1_f_s_1_1_file.html#a3c1fa30aaa1fbf8275d3bc3166e7b88a">GetName</a>());</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keyword">auto</span> server = std::get&lt;SharedPtr&lt;ServerSession&gt;&gt;(sessions);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="class_kernel_1_1_session_request_handler.html#a77182c9acb26334f70e3f76ef51e9a3e">ClientConnected</a>(server);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* slot = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(server);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#ab5fb097919e34dab50fedf9b9e173593">priority</a> = original_file-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#ab5fb097919e34dab50fedf9b9e173593">priority</a>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a54d36011a07f9e5095228164ebeffe16">offset</a> = offset;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#aca816d28745ca04ede4429fca81146ac">size</a> = size;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a04a760f3333d0f3f3141befb2d18e64b">subfile</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    rb.Push(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    rb.PushMoveObjects(std::get&lt;SharedPtr&lt;ClientSession&gt;&gt;(sessions));</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_file.html#afe53c8394c17f37f1f2051cfcba87206">  298</a></span>&#160;<a class="code" href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">Kernel::SharedPtr&lt;Kernel::ClientSession&gt;</a> <a class="code" href="class_service_1_1_f_s_1_1_file.html#afe53c8394c17f37f1f2051cfcba87206">File::Connect</a>() {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keyword">auto</span> sessions = <a class="code" href="class_kernel_1_1_server_session.html#ad3458ca0e25d7fa242abe3900d4f3bd8">Kernel::ServerSession::CreateSessionPair</a>(<a class="code" href="class_service_1_1_f_s_1_1_file.html#a3c1fa30aaa1fbf8275d3bc3166e7b88a">GetName</a>());</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keyword">auto</span> server = std::get&lt;Kernel::SharedPtr&lt;Kernel::ServerSession&gt;&gt;(sessions);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="class_kernel_1_1_session_request_handler.html#a77182c9acb26334f70e3f76ef51e9a3e">ClientConnected</a>(server);</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html">FileSessionSlot</a>* slot = <a class="code" href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">GetSessionData</a>(server);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#ab5fb097919e34dab50fedf9b9e173593">priority</a> = 0;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a54d36011a07f9e5095228164ebeffe16">offset</a> = 0;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#aca816d28745ca04ede4429fca81146ac">size</a> = <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>-&gt;GetSize();</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    slot-&gt;<a class="code" href="struct_service_1_1_f_s_1_1_file_session_slot.html#a04a760f3333d0f3f3141befb2d18e64b">subfile</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="keywordflow">return</span> std::get&lt;Kernel::SharedPtr&lt;Kernel::ClientSession&gt;&gt;(sessions);</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;}</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_directory.html#a34b5b0841919ab1cf17295ada5b6f452">  312</a></span>&#160;<a class="code" href="class_service_1_1_f_s_1_1_directory.html#a34b5b0841919ab1cf17295ada5b6f452">Directory::Directory</a>(std::unique_ptr&lt;FileSys::DirectoryBackend&gt;&amp;&amp; <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>,</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                     <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_file.html#a7eaa73ab54fc609b879b038ee7969db3">path</a>)</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    : <a class="code" href="class_service_1_1_service_framework.html">ServiceFramework</a>(<span class="stringliteral">&quot;&quot;</span>, 1), path(path), <a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>(<a class="code" href="namespacestd.html">std</a>::move(<a class="code" href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">backend</a>)) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> FunctionInfo functions[] = {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="comment">// clang-format off</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        {0x08010042, &amp;<a class="code" href="class_service_1_1_f_s_1_1_directory.html#a6690825b86e5cda0076a2a7bf7843f9d">Directory::Read</a>, <span class="stringliteral">&quot;Read&quot;</span>},</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        {0x08020000, &amp;<a class="code" href="class_service_1_1_f_s_1_1_directory.html#a35e097ff4610f9eeb2d81a9072a659f7">Directory::Close</a>, <span class="stringliteral">&quot;Close&quot;</span>},</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="comment">// clang-format on</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    };</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <a class="code" href="class_service_1_1_service_framework.html#a54307718519bef2198366da0a7e69e0e">RegisterHandlers</a>(functions);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_directory.html#aaed3f41b73531e2190cf981378bf0040">  324</a></span>&#160;<a class="code" href="class_service_1_1_f_s_1_1_directory.html#aaed3f41b73531e2190cf981378bf0040">Directory::~Directory</a>() {}</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_directory.html#a6690825b86e5cda0076a2a7bf7843f9d">  326</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a6690825b86e5cda0076a2a7bf7843f9d">Directory::Read</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0801, 1, 2};</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> count{rp.Pop&lt;<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>&gt;()};</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <span class="keyword">auto</span>&amp; buffer{rp.PopMappedBuffer()};</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    std::vector&lt;FileSys::Entry&gt; entries(count);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <a class="code" href="log_8h.html#ae9fb9e5f54be61c473be717ec6e71298">LOG_TRACE</a>(Service_FS, <span class="stringliteral">&quot;Read {}: count={}&quot;</span>, <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a56bead251f73efe38d8000a8b0ee0290">GetName</a>(), count);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="comment">// Number of entries actually read</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> read = <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a>-&gt;Read(static_cast&lt;u32&gt;(entries.size()), entries.data());</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    buffer.Write(entries.data(), 0, read * <span class="keyword">sizeof</span>(<a class="code" href="namespace_file_sys.html#struct_file_sys_1_1_entry">FileSys::Entry</a>));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(2, 2)};</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    rb.<a class="code" href="class_i_p_c_1_1_response_builder.html#a12d9068ceac4de2e8c19e34ec42ce54e">Push</a>(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    rb.Push(read);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;    rb.PushMappedBuffer(buffer);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;}</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno"><a class="line" href="class_service_1_1_f_s_1_1_directory.html#a35e097ff4610f9eeb2d81a9072a659f7">  342</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a35e097ff4610f9eeb2d81a9072a659f7">Directory::Close</a>(<a class="code" href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a>&amp; ctx) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    <a class="code" href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a> rp{ctx, 0x0802, 0, 0};</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    <a class="code" href="log_8h.html#ae9fb9e5f54be61c473be717ec6e71298">LOG_TRACE</a>(Service_FS, <span class="stringliteral">&quot;Close {}&quot;</span>, <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a56bead251f73efe38d8000a8b0ee0290">GetName</a>());</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a>-&gt;Close();</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <a class="code" href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a> rb{rp.MakeBuilder(1, 0)};</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    rb.<a class="code" href="class_i_p_c_1_1_response_builder.html#a12d9068ceac4de2e8c19e34ec42ce54e">Push</a>(<a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="keyword">using</span> <a class="code" href="class_file_sys_1_1_archive_backend.html">FileSys::ArchiveBackend</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="keyword">using</span> <a class="code" href="class_file_sys_1_1_archive_factory.html">FileSys::ArchiveFactory</a>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a0d3c37f7c8383023ab811e9efa52576d">  360</a></span>&#160;<span class="keyword">static</span> boost::container::flat_map&lt;ArchiveIdCode, std::unique_ptr&lt;ArchiveFactory&gt;&gt; <a class="code" href="namespace_service_1_1_f_s.html#a0d3c37f7c8383023ab811e9efa52576d">id_code_map</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00365"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#af1a992e6f2512579351bec958bc768a2">  365</a></span>&#160;<span class="keyword">static</span> std::unordered_map&lt;ArchiveHandle, std::unique_ptr&lt;ArchiveBackend&gt;&gt; <a class="code" href="namespace_service_1_1_f_s.html#af1a992e6f2512579351bec958bc768a2">handle_map</a>;</div><div class="line"><a name="l00366"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#aba271fc98081246a48664ecdb5962d75">  366</a></span>&#160;<span class="keyword">static</span> <a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> <a class="code" href="namespace_service_1_1_f_s.html#aba271fc98081246a48664ecdb5962d75">next_handle</a>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">  368</a></span>&#160;<span class="keyword">static</span> <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> handle) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keyword">auto</span> itr = handle_map.find(handle);</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    <span class="keywordflow">return</span> (itr == handle_map.end()) ? <span class="keyword">nullptr</span> : itr-&gt;second.get();</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;}</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a84c9413b4585001e5f40a473639565f6">  373</a></span>&#160;<a class="code" href="class_result_val.html">ResultVal&lt;ArchiveHandle&gt;</a> <a class="code" href="namespace_service_1_1_f_s.html#a84c9413b4585001e5f40a473639565f6">OpenArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4">ArchiveIdCode</a> id_code, <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; archive_path) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <a class="code" href="log_8h.html#ae9fb9e5f54be61c473be717ec6e71298">LOG_TRACE</a>(Service_FS, <span class="stringliteral">&quot;Opening archive with id code 0x{:08X}&quot;</span>, static_cast&lt;u32&gt;(id_code));</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keyword">auto</span> itr = id_code_map.find(id_code);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordflow">if</span> (itr == id_code_map.end()) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#a69b013b2a317fa34e691da0e10a962f4">FileSys::ERROR_NOT_FOUND</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <a class="code" href="result_8h.html#aca0b5ac34e07a0e4711c70908d45c528">CASCADE_RESULT</a>(std::unique_ptr&lt;ArchiveBackend&gt; res, itr-&gt;second-&gt;Open(archive_path));</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="comment">// This should never even happen in the first place with 64-bit handles,</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;    <span class="keywordflow">while</span> (handle_map.count(next_handle) != 0) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        ++<a class="code" href="namespace_service_1_1_f_s.html#aba271fc98081246a48664ecdb5962d75">next_handle</a>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    handle_map.emplace(next_handle, std::move(res));</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordflow">return</span> MakeResult&lt;ArchiveHandle&gt;(next_handle++);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a36a2e43d04fef490d27c12c590b667ac">  391</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#a36a2e43d04fef490d27c12c590b667ac">CloseArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> handle) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">if</span> (handle_map.erase(handle) == 0)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;}</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">// TODO(yuriks): This might be what the fs:REG service is for. See the Register/Unregister calls in</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">// http://3dbrew.org/wiki/Filesystem_services#ProgramRegistry_service_.22fs:REG.22</span></div><div class="line"><a name="l00400"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">  400</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::unique_ptr&lt;FileSys::ArchiveFactory&gt;&amp;&amp; factory,</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                               <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4">ArchiveIdCode</a> id_code) {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keyword">auto</span> result = id_code_map.emplace(id_code, std::move(factory));</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    <span class="keywordtype">bool</span> inserted = result.second;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    <a class="code" href="assert_8h.html#a4b432fb3d47e2ca732caf965691a54d7">ASSERT_MSG</a>(inserted, <span class="stringliteral">&quot;Tried to register more than one archive with same id code&quot;</span>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;    <span class="keyword">auto</span>&amp; archive = result.first-&gt;second;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;    <a class="code" href="log_8h.html#add982f3fbcbb8bfd9e729ab9356efb34">LOG_DEBUG</a>(Service_FS, <span class="stringliteral">&quot;Registered archive {} with id code 0x{:08X}&quot;</span>, archive-&gt;GetName(),</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;              <span class="keyword">static_cast&lt;</span><a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a><span class="keyword">&gt;</span>(id_code));</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#aa11a720fd25c2133ece9592244835863">  413</a></span>&#160;<a class="code" href="class_result_val.html">ResultVal&lt;std::shared_ptr&lt;File&gt;</a>&gt; <a class="code" href="namespace_service_1_1_f_s.html#aa11a720fd25c2133ece9592244835863">OpenFileFromArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> archive_handle,</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a>,</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                                     <span class="keyword">const</span> <a class="code" href="namespace_file_sys.html#union_file_sys_1_1_mode">FileSys::Mode</a> mode) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(archive_handle);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    <span class="keywordflow">if</span> (archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;    <span class="keyword">auto</span> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a> = archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#a95978a60e7a1fc0f98a888d1f6de554d">OpenFile</a>(path, mode);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a>.Failed())</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a>.Code();</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    <span class="keyword">auto</span> file = std::shared_ptr&lt;File&gt;(<span class="keyword">new</span> <a class="code" href="class_service_1_1_f_s_1_1_file.html">File</a>(std::move(<a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a>).Unwrap(), path));</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordflow">return</span> MakeResult&lt;std::shared_ptr&lt;File&gt;&gt;(std::move(file));</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;}</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#abba3c4495626896da870fea685d89788">  428</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#abba3c4495626896da870fea685d89788">DeleteFileFromArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> archive_handle, <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a>) {</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(archive_handle);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;    <span class="keywordflow">if</span> (archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">return</span> archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#a628bad3bd96a9e01a48662e7b362d7f6">DeleteFile</a>(path);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;}</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a0313b983360dc09288e79a1f8caa93a2">  436</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#a0313b983360dc09288e79a1f8caa93a2">RenameFileBetweenArchives</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> src_archive_handle,</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; src_path,</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                                     <a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> dest_archive_handle,</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                                     <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; dest_path) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* src_archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(src_archive_handle);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* dest_archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(dest_archive_handle);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keywordflow">if</span> (src_archive == <span class="keyword">nullptr</span> || dest_archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    <span class="keywordflow">if</span> (src_archive == dest_archive) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        <span class="keywordflow">return</span> src_archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#aa8b8be2bedfc5274d846d2a1742c7c15">RenameFile</a>(src_path, dest_path);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="comment">// TODO: Implement renaming across archives</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="result_8h.html#a83c370da33c4c24a4238cc28b78b5595">UnimplementedFunction</a>(<a class="code" href="result_8h.html#a67158ef38e1ab9113151768007433e3aa4a436c564cf21ff91983ab79399fa185">ErrorModule::FS</a>);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a6f3f74f36e50bdc42d234ae273d29b52">  453</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#a6f3f74f36e50bdc42d234ae273d29b52">DeleteDirectoryFromArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> archive_handle, <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a>) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(archive_handle);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">if</span> (archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordflow">return</span> archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#a75516510be3bea9aa99069535d2052de">DeleteDirectory</a>(path);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;}</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#ac00084e4d5ced6fd4c50197edab6c96c">  461</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#ac00084e4d5ced6fd4c50197edab6c96c">DeleteDirectoryRecursivelyFromArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> archive_handle,</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                                                 <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a>) {</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(archive_handle);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">if</span> (archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <span class="keywordflow">return</span> archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#ae057369b0f0e783524b550c387f73502">DeleteDirectoryRecursively</a>(path);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#aa2651f86139bdab36114c8c47ab0354f">  470</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#aa2651f86139bdab36114c8c47ab0354f">CreateFileInArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> archive_handle, <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a>,</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                               <a class="code" href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a> file_size) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(archive_handle);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;    <span class="keywordflow">if</span> (archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;    <span class="keywordflow">return</span> archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#a49d09a82d46d8aa677690398257bf226">CreateFile</a>(path, file_size);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;}</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a659b449d3d1249cfb4a6a4c56a1882a5">  479</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#a659b449d3d1249cfb4a6a4c56a1882a5">CreateDirectoryFromArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> archive_handle, <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a>) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(archive_handle);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    <span class="keywordflow">if</span> (archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="keywordflow">return</span> archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#a58870144645b7409829f3e60f159a121">CreateDirectory</a>(path);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;}</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a20f57a47f98ee4873856f02ebd1bc38b">  487</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#a20f57a47f98ee4873856f02ebd1bc38b">RenameDirectoryBetweenArchives</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> src_archive_handle,</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; src_path,</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                                          <a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> dest_archive_handle,</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; dest_path) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* src_archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(src_archive_handle);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* dest_archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(dest_archive_handle);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span> (src_archive == <span class="keyword">nullptr</span> || dest_archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordflow">if</span> (src_archive == dest_archive) {</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        <span class="keywordflow">return</span> src_archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#ab2ad8445abdf9c903511fb1efefb3d6f">RenameDirectory</a>(src_path, dest_path);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">// TODO: Implement renaming across archives</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="result_8h.html#a83c370da33c4c24a4238cc28b78b5595">UnimplementedFunction</a>(<a class="code" href="result_8h.html#a67158ef38e1ab9113151768007433e3aa4a436c564cf21ff91983ab79399fa185">ErrorModule::FS</a>);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    }</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a5dab9d6fbe5ff6e50acc2f8869bcf98d">  504</a></span>&#160;<a class="code" href="class_result_val.html">ResultVal&lt;std::shared_ptr&lt;Directory&gt;</a>&gt; <a class="code" href="namespace_service_1_1_f_s.html#a5dab9d6fbe5ff6e50acc2f8869bcf98d">OpenDirectoryFromArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> archive_handle,</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                                                               <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a>) {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(archive_handle);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="keywordflow">if</span> (archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="keyword">auto</span> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a> = archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#a5aaa0f939da9c5fdd068d5e6a6f1c27f">OpenDirectory</a>(path);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a>.Failed())</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a>.Code();</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keyword">auto</span> directory = std::shared_ptr&lt;Directory&gt;(<span class="keyword">new</span> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a34b5b0841919ab1cf17295ada5b6f452">Directory</a>(std::move(<a class="code" href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">backend</a>).Unwrap(), path));</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordflow">return</span> MakeResult&lt;std::shared_ptr&lt;Directory&gt;&gt;(std::move(directory));</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#ae49d1eec2e38bb5b3db8817d7ccbd5e5">  518</a></span>&#160;<a class="code" href="class_result_val.html">ResultVal&lt;u64&gt;</a> <a class="code" href="namespace_service_1_1_f_s.html#ae49d1eec2e38bb5b3db8817d7ccbd5e5">GetFreeBytesInArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">ArchiveHandle</a> archive_handle) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    <a class="code" href="class_file_sys_1_1_archive_backend.html">ArchiveBackend</a>* archive = <a class="code" href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">GetArchive</a>(archive_handle);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span> (archive == <span class="keyword">nullptr</span>)</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;    <span class="keywordflow">return</span> MakeResult&lt;u64&gt;(archive-&gt;<a class="code" href="class_file_sys_1_1_archive_backend.html#a5d82ec8546edd8ce54ff9cd808c01700">GetFreeBytes</a>());</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;}</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#ac3845cf491f7c8e3134ed27d51142bd2">  525</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#ac3845cf491f7c8e3134ed27d51142bd2">FormatArchive</a>(<a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4">ArchiveIdCode</a> id_code, <span class="keyword">const</span> <a class="code" href="namespace_file_sys.html#struct_file_sys_1_1_archive_format_info">FileSys::ArchiveFormatInfo</a>&amp; format_info,</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                         <span class="keyword">const</span> <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a>) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;    <span class="keyword">auto</span> archive_itr = id_code_map.find(id_code);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordflow">if</span> (archive_itr == id_code_map.end()) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="result_8h.html#a83c370da33c4c24a4238cc28b78b5595">UnimplementedFunction</a>(<a class="code" href="result_8h.html#a67158ef38e1ab9113151768007433e3aa4a436c564cf21ff91983ab79399fa185">ErrorModule::FS</a>); <span class="comment">// TODO(Subv): Find the right error</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    <span class="keywordflow">return</span> archive_itr-&gt;second-&gt;Format(path, format_info);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;}</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#aeeefbc7f826e571319cb35be0b877571">  535</a></span>&#160;<a class="code" href="class_result_val.html">ResultVal&lt;FileSys::ArchiveFormatInfo&gt;</a> <a class="code" href="namespace_service_1_1_f_s.html#aeeefbc7f826e571319cb35be0b877571">GetArchiveFormatInfo</a>(<a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4">ArchiveIdCode</a> id_code,</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                                           <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a>&amp; archive_path) {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keyword">auto</span> archive = id_code_map.find(id_code);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <span class="keywordflow">if</span> (archive == id_code_map.end()) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="result_8h.html#a83c370da33c4c24a4238cc28b78b5595">UnimplementedFunction</a>(<a class="code" href="result_8h.html#a67158ef38e1ab9113151768007433e3aa4a436c564cf21ff91983ab79399fa185">ErrorModule::FS</a>); <span class="comment">// TODO(Subv): Find the right error</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span> archive-&gt;second-&gt;GetFormatInfo(archive_path);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;}</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#aeb22d463389eca7585cd86e22e9c8052">  545</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#aeb22d463389eca7585cd86e22e9c8052">CreateExtSaveData</a>(<a class="code" href="namespace_service_1_1_f_s.html#a7f952d6dea27a7fce6ac6d17ee9e0464">MediaType</a> media_type, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> high, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> low,</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                             <span class="keyword">const</span> std::vector&lt;u8&gt;&amp; smdh_icon,</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                             <span class="keyword">const</span> <a class="code" href="namespace_file_sys.html#struct_file_sys_1_1_archive_format_info">FileSys::ArchiveFormatInfo</a>&amp; format_info) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    <span class="comment">// Construct the binary path to the archive first</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a> =</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;        <a class="code" href="namespace_file_sys.html#acdfab7ee50619a483d1cbc3d93072074">FileSys::ConstructExtDataBinaryPath</a>(static_cast&lt;u32&gt;(media_type), high, low);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;    <span class="keyword">auto</span> archive = id_code_map.find(media_type == <a class="code" href="namespace_service_1_1_f_s.html#a7f952d6dea27a7fce6ac6d17ee9e0464a3be5b8730412d64c809e4d73ce34649f">MediaType::NAND</a> ? <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4ad92ada12b11ef3c4f417b0c7e0b62cf9">ArchiveIdCode::SharedExtSaveData</a></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                                                  : <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4aa0096deb654fc19c16c158db7ce0f5df">ArchiveIdCode::ExtSaveData</a>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    <span class="keywordflow">if</span> (archive == id_code_map.end()) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="result_8h.html#a83c370da33c4c24a4238cc28b78b5595">UnimplementedFunction</a>(<a class="code" href="result_8h.html#a67158ef38e1ab9113151768007433e3aa4a436c564cf21ff91983ab79399fa185">ErrorModule::FS</a>); <span class="comment">// TODO(Subv): Find the right error</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    }</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keyword">auto</span> ext_savedata = <span class="keyword">static_cast&lt;</span><a class="code" href="class_file_sys_1_1_archive_factory___ext_save_data.html">FileSys::ArchiveFactory_ExtSaveData</a>*<span class="keyword">&gt;</span>(archive-&gt;second.get());</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    <a class="code" href="union_result_code.html">ResultCode</a> result = ext_savedata-&gt;Format(path, format_info);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;    <span class="keywordflow">if</span> (result.<a class="code" href="union_result_code.html#a9cc6b19a3cc45be3b09c4844fddca9bc">IsError</a>())</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;    ext_savedata-&gt;WriteIcon(path, smdh_icon.data(), smdh_icon.size());</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a61ee50209a92f4ce2e79c35d378a7578">  569</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#a61ee50209a92f4ce2e79c35d378a7578">DeleteExtSaveData</a>(<a class="code" href="namespace_service_1_1_f_s.html#a7f952d6dea27a7fce6ac6d17ee9e0464">MediaType</a> media_type, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> high, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> low) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    <span class="comment">// Construct the binary path to the archive first</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a> =</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        <a class="code" href="namespace_file_sys.html#acdfab7ee50619a483d1cbc3d93072074">FileSys::ConstructExtDataBinaryPath</a>(static_cast&lt;u32&gt;(media_type), high, low);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;    std::string media_type_directory;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;    <span class="keywordflow">if</span> (media_type == <a class="code" href="namespace_service_1_1_f_s.html#a7f952d6dea27a7fce6ac6d17ee9e0464a3be5b8730412d64c809e4d73ce34649f">MediaType::NAND</a>) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        media_type_directory = <a class="code" href="namespace_file_util.html#adbc41c59e18851aa67888e18020d0328">FileUtil::GetUserPath</a>(<a class="code" href="file__util_8h.html#a7ff5f2dff38e7639981794c43dc9167badcd0cd8932c53f0ca52ce1a7671ca61c">D_NAND_IDX</a>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (media_type == <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4acbba1ec025a6a4d28c5fa7dcbf511f81">MediaType::SDMC</a>) {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        media_type_directory = <a class="code" href="namespace_settings.html#a89bad2e81a950120963b3f26c691810a">Settings::values</a>.<a class="code" href="namespace_settings.html#a1f5494002f8072f8dc119e77077f3fa3">sd_card_directory</a>.empty()</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                   ? <a class="code" href="namespace_file_util.html#adbc41c59e18851aa67888e18020d0328">FileUtil::GetUserPath</a>(<a class="code" href="file__util_8h.html#a7ff5f2dff38e7639981794c43dc9167ba8b82189e268c9c002de7c48c5521bf24">D_SDMC_IDX</a>)</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                                   : <a class="code" href="namespace_settings.html#a89bad2e81a950120963b3f26c691810a">Settings::values</a>.<a class="code" href="namespace_settings.html#a1f5494002f8072f8dc119e77077f3fa3">sd_card_directory</a> + <span class="stringliteral">&quot;/&quot;</span>;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Service_FS, <span class="stringliteral">&quot;Unsupported media type {}&quot;</span>, static_cast&lt;u32&gt;(media_type));</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="union_result_code.html">ResultCode</a>(-1); <span class="comment">// TODO(Subv): Find the right error code</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    <span class="comment">// Delete all directories (/user, /boss) and the icon file.</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    std::string base_path =</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <a class="code" href="namespace_file_sys.html#a2973137a359f7c418e8cfa40b5cfdd96">FileSys::GetExtDataContainerPath</a>(media_type_directory, media_type == <a class="code" href="namespace_service_1_1_f_s.html#a7f952d6dea27a7fce6ac6d17ee9e0464a3be5b8730412d64c809e4d73ce34649f">MediaType::NAND</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;    std::string extsavedata_path = <a class="code" href="namespace_file_sys.html#a61574015c4d60b23e76f93cc34cb639b">FileSys::GetExtSaveDataPath</a>(base_path, path);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="namespace_file_util.html#a126a7f8161f55179223bcb7b948c1370">FileUtil::Exists</a>(extsavedata_path) &amp;&amp; !<a class="code" href="namespace_file_util.html#af25b0250f98f307f2bf432e934242ce1">FileUtil::DeleteDirRecursively</a>(extsavedata_path))</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="union_result_code.html">ResultCode</a>(-1); <span class="comment">// TODO(Subv): Find the right error code</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#aa542303872e9045245bd889e203626a4">  595</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#aa542303872e9045245bd889e203626a4">DeleteSystemSaveData</a>(<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> high, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> low) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// Construct the binary path to the archive first</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a> = <a class="code" href="namespace_file_sys.html#a4c74dbfb4ef79c1d257894fa30f722d0">FileSys::ConstructSystemSaveDataBinaryPath</a>(high, low);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;    std::string nand_directory = <a class="code" href="namespace_file_util.html#adbc41c59e18851aa67888e18020d0328">FileUtil::GetUserPath</a>(<a class="code" href="file__util_8h.html#a7ff5f2dff38e7639981794c43dc9167badcd0cd8932c53f0ca52ce1a7671ca61c">D_NAND_IDX</a>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;    std::string base_path = <a class="code" href="namespace_file_sys.html#a8436d40702c85e36b8f24236ac8c2cf6">FileSys::GetSystemSaveDataContainerPath</a>(nand_directory);</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    std::string systemsavedata_path = <a class="code" href="namespace_file_sys.html#af1c7bf3528d68a00ab1413a134171773">FileSys::GetSystemSaveDataPath</a>(base_path, path);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespace_file_util.html#af25b0250f98f307f2bf432e934242ce1">FileUtil::DeleteDirRecursively</a>(systemsavedata_path))</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="union_result_code.html">ResultCode</a>(-1); <span class="comment">// TODO(Subv): Find the right error code</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;}</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#ab8fe8f399181c1acb34563960b16bf7c">  607</a></span>&#160;<a class="code" href="union_result_code.html">ResultCode</a> <a class="code" href="namespace_service_1_1_f_s.html#ab8fe8f399181c1acb34563960b16bf7c">CreateSystemSaveData</a>(<a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> high, <a class="code" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> low) {</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    <span class="comment">// Construct the binary path to the archive first</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;    <a class="code" href="class_file_sys_1_1_path.html">FileSys::Path</a> <a class="code" href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">path</a> = <a class="code" href="namespace_file_sys.html#a4c74dbfb4ef79c1d257894fa30f722d0">FileSys::ConstructSystemSaveDataBinaryPath</a>(high, low);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    std::string nand_directory = <a class="code" href="namespace_file_util.html#adbc41c59e18851aa67888e18020d0328">FileUtil::GetUserPath</a>(<a class="code" href="file__util_8h.html#a7ff5f2dff38e7639981794c43dc9167badcd0cd8932c53f0ca52ce1a7671ca61c">D_NAND_IDX</a>);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    std::string base_path = <a class="code" href="namespace_file_sys.html#a8436d40702c85e36b8f24236ac8c2cf6">FileSys::GetSystemSaveDataContainerPath</a>(nand_directory);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    std::string systemsavedata_path = <a class="code" href="namespace_file_sys.html#af1c7bf3528d68a00ab1413a134171773">FileSys::GetSystemSaveDataPath</a>(base_path, path);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="namespace_file_util.html#a2b5d7e95698e54b1cb337c20fb518e8d">FileUtil::CreateFullPath</a>(systemsavedata_path))</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="union_result_code.html">ResultCode</a>(-1); <span class="comment">// TODO(Subv): Find the right error code</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a>;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;}</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;</div><div class="line"><a name="l00619"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a9c7e1c8ca4bc570c3a2a657bc47ef625">  619</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_service_1_1_f_s.html#a9c7e1c8ca4bc570c3a2a657bc47ef625">RegisterArchiveTypes</a>() {</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    <span class="comment">// TODO(Subv): Add the other archive types (see here for the known types:</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="comment">// http://3dbrew.org/wiki/FS:OpenArchive#Archive_idcodes).</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    std::string sdmc_directory = <a class="code" href="namespace_settings.html#a89bad2e81a950120963b3f26c691810a">Settings::values</a>.<a class="code" href="namespace_settings.html#a1f5494002f8072f8dc119e77077f3fa3">sd_card_directory</a>.empty()</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                     ? <a class="code" href="namespace_file_util.html#adbc41c59e18851aa67888e18020d0328">FileUtil::GetUserPath</a>(<a class="code" href="file__util_8h.html#a7ff5f2dff38e7639981794c43dc9167ba8b82189e268c9c002de7c48c5521bf24">D_SDMC_IDX</a>)</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                                     : <a class="code" href="namespace_settings.html#a89bad2e81a950120963b3f26c691810a">Settings::values</a>.<a class="code" href="namespace_settings.html#a1f5494002f8072f8dc119e77077f3fa3">sd_card_directory</a> + <span class="stringliteral">&quot;/&quot;</span>;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;    std::string nand_directory = <a class="code" href="namespace_file_util.html#adbc41c59e18851aa67888e18020d0328">FileUtil::GetUserPath</a>(<a class="code" href="file__util_8h.html#a7ff5f2dff38e7639981794c43dc9167badcd0cd8932c53f0ca52ce1a7671ca61c">D_NAND_IDX</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;    <span class="keyword">auto</span> sdmc_factory = std::make_unique&lt;FileSys::ArchiveFactory_SDMC&gt;(sdmc_directory);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;    <span class="keywordflow">if</span> (sdmc_factory-&gt;Initialize())</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(sdmc_factory), <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4acbba1ec025a6a4d28c5fa7dcbf511f81">ArchiveIdCode::SDMC</a>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Service_FS, <span class="stringliteral">&quot;Can&#39;t instantiate SDMC archive with path {}&quot;</span>, sdmc_directory);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keyword">auto</span> sdmcwo_factory = std::make_unique&lt;FileSys::ArchiveFactory_SDMCWriteOnly&gt;(sdmc_directory);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    <span class="keywordflow">if</span> (sdmcwo_factory-&gt;Initialize())</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(sdmcwo_factory), <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4af57ceb7523989669c3d25b6343690b42">ArchiveIdCode::SDMCWriteOnly</a>);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Service_FS, <span class="stringliteral">&quot;Can&#39;t instantiate SDMCWriteOnly archive with path {}&quot;</span>,</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                  sdmc_directory);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="comment">// Create the SaveData archive</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;    <span class="keyword">auto</span> sd_savedata_source = std::make_shared&lt;FileSys::ArchiveSource_SDSaveData&gt;(sdmc_directory);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;    <span class="keyword">auto</span> savedata_factory = std::make_unique&lt;FileSys::ArchiveFactory_SaveData&gt;(sd_savedata_source);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(savedata_factory), <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4acce37f2634222301e969645a9b5677be">ArchiveIdCode::SaveData</a>);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;    <span class="keyword">auto</span> other_savedata_permitted_factory =</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;        std::make_unique&lt;FileSys::ArchiveFactory_OtherSaveDataPermitted&gt;(sd_savedata_source);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(other_savedata_permitted_factory),</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                        <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4a01c4e8b89910da17df6169c95775c1d3">ArchiveIdCode::OtherSaveDataPermitted</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="keyword">auto</span> other_savedata_general_factory =</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;        std::make_unique&lt;FileSys::ArchiveFactory_OtherSaveDataGeneral&gt;(sd_savedata_source);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(other_savedata_general_factory),</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                        <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4af3cef270c27dccc012a5beef949b5ea6">ArchiveIdCode::OtherSaveDataGeneral</a>);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    <span class="keyword">auto</span> extsavedata_factory =</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        std::make_unique&lt;FileSys::ArchiveFactory_ExtSaveData&gt;(sdmc_directory, <span class="keyword">false</span>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;    <span class="keywordflow">if</span> (extsavedata_factory-&gt;Initialize())</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;        <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(extsavedata_factory), <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4aa0096deb654fc19c16c158db7ce0f5df">ArchiveIdCode::ExtSaveData</a>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Service_FS, <span class="stringliteral">&quot;Can&#39;t instantiate ExtSaveData archive with path {}&quot;</span>,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                  extsavedata_factory-&gt;GetMountPoint().c_str());</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <span class="keyword">auto</span> sharedextsavedata_factory =</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;        std::make_unique&lt;FileSys::ArchiveFactory_ExtSaveData&gt;(nand_directory, <span class="keyword">true</span>);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="keywordflow">if</span> (sharedextsavedata_factory-&gt;Initialize())</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;        <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(sharedextsavedata_factory), <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4ad92ada12b11ef3c4f417b0c7e0b62cf9">ArchiveIdCode::SharedExtSaveData</a>);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Service_FS, <span class="stringliteral">&quot;Can&#39;t instantiate SharedExtSaveData archive with path {}&quot;</span>,</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                  sharedextsavedata_factory-&gt;GetMountPoint().c_str());</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// Create the NCCH archive, basically a small variation of the RomFS archive</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keyword">auto</span> savedatacheck_factory = std::make_unique&lt;FileSys::ArchiveFactory_NCCH&gt;();</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(savedatacheck_factory), <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4afa803dbe2351b9471f36bd60e2fab7ff">ArchiveIdCode::NCCH</a>);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="keyword">auto</span> systemsavedata_factory =</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;        std::make_unique&lt;FileSys::ArchiveFactory_SystemSaveData&gt;(nand_directory);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(systemsavedata_factory), <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4a42293c7ae0724dc220ac1f209fe2f74a">ArchiveIdCode::SystemSaveData</a>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="keyword">auto</span> selfncch_factory = std::make_unique&lt;FileSys::ArchiveFactory_SelfNCCH&gt;();</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">RegisterArchiveType</a>(std::move(selfncch_factory), <a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4a9f8bdbcb2bf6d158ec5db69cac639e6f">ArchiveIdCode::SelfNCCH</a>);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;}</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a19f65578f9ddbf1c8be0d98676307938">  681</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_service_1_1_f_s.html#a19f65578f9ddbf1c8be0d98676307938">RegisterSelfNCCH</a>(<a class="code" href="class_loader_1_1_app_loader.html">Loader::AppLoader</a>&amp; app_loader) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keyword">auto</span> itr = id_code_map.find(<a class="code" href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4a9f8bdbcb2bf6d158ec5db69cac639e6f">ArchiveIdCode::SelfNCCH</a>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">if</span> (itr == id_code_map.end()) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        <a class="code" href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a>(Service_FS,</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;                  <span class="stringliteral">&quot;Could not register a new NCCH because the SelfNCCH archive hasn&#39;t been created&quot;</span>);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keyword">auto</span>* factory = <span class="keyword">static_cast&lt;</span><a class="code" href="class_file_sys_1_1_archive_factory___self_n_c_c_h.html">FileSys::ArchiveFactory_SelfNCCH</a>*<span class="keyword">&gt;</span>(itr-&gt;second.get());</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    factory-&gt;<a class="code" href="class_file_sys_1_1_archive_factory___self_n_c_c_h.html#a0733faacc80da86c0a5cb34196721980">Register</a>(app_loader);</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#aaaf9692f037ca32682257ab923e36216">  693</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_service_1_1_f_s.html#aaaf9692f037ca32682257ab923e36216">UnregisterArchiveTypes</a>() {</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    id_code_map.clear();</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;}</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#a4bc98685423e27bc36568a23af9472e4">  698</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_service_1_1_f_s.html#a4bc98685423e27bc36568a23af9472e4">ArchiveInit</a>() {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    next_handle = 1;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#a9c7e1c8ca4bc570c3a2a657bc47ef625">RegisterArchiveTypes</a>();</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;}</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="namespace_service_1_1_f_s.html#acca04d4ffaa95f06e922468671bdcf8b">  704</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="namespace_service_1_1_f_s.html#acca04d4ffaa95f06e922468671bdcf8b">ArchiveShutdown</a>() {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    handle_map.clear();</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    <a class="code" href="namespace_service_1_1_f_s.html#aaaf9692f037ca32682257ab923e36216">UnregisterArchiveTypes</a>();</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;}</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;} <span class="comment">// namespace Service::FS</span></div><div class="ttc" id="class_service_1_1_f_s_1_1_directory_html_a35e097ff4610f9eeb2d81a9072a659f7"><div class="ttname"><a href="class_service_1_1_f_s_1_1_directory.html#a35e097ff4610f9eeb2d81a9072a659f7">Service::FS::Directory::Close</a></div><div class="ttdeci">void Close(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00342">archive.cpp:342</a></div></div>
<div class="ttc" id="result_8h_html_ac66ebacde94a19df5a65f34e8238cf79"><div class="ttname"><a href="result_8h.html#ac66ebacde94a19df5a65f34e8238cf79">RESULT_SUCCESS</a></div><div class="ttdeci">constexpr ResultCode RESULT_SUCCESS(0)</div><div class="ttdoc">The default success ResultCode. </div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a0313b983360dc09288e79a1f8caa93a2"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a0313b983360dc09288e79a1f8caa93a2">Service::FS::RenameFileBetweenArchives</a></div><div class="ttdeci">ResultCode RenameFileBetweenArchives(ArchiveHandle src_archive_handle, const FileSys::Path &amp;src_path, ArchiveHandle dest_archive_handle, const FileSys::Path &amp;dest_path)</div><div class="ttdoc">Rename a File between two Archives. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00436">archive.cpp:436</a></div></div>
<div class="ttc" id="log_8h_html_ae9fb9e5f54be61c473be717ec6e71298"><div class="ttname"><a href="log_8h.html#ae9fb9e5f54be61c473be717ec6e71298">LOG_TRACE</a></div><div class="ttdeci">#define LOG_TRACE(log_class, fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00124">log.h:124</a></div></div>
<div class="ttc" id="file__sys_2errors_8h_html"><div class="ttname"><a href="file__sys_2errors_8h.html">errors.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a20f57a47f98ee4873856f02ebd1bc38b"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a20f57a47f98ee4873856f02ebd1bc38b">Service::FS::RenameDirectoryBetweenArchives</a></div><div class="ttdeci">ResultCode RenameDirectoryBetweenArchives(ArchiveHandle src_archive_handle, const FileSys::Path &amp;src_path, ArchiveHandle dest_archive_handle, const FileSys::Path &amp;dest_path)</div><div class="ttdoc">Rename a Directory between two Archives. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00487">archive.cpp:487</a></div></div>
<div class="ttc" id="client__port_8h_html"><div class="ttname"><a href="client__port_8h.html">client_port.h</a></div></div>
<div class="ttc" id="class_result_val_html_a956e71b2e8b8f38eab385784b1d24ff3"><div class="ttname"><a href="class_result_val.html#a956e71b2e8b8f38eab385784b1d24ff3">ResultVal::Failed</a></div><div class="ttdeci">bool Failed() const</div><div class="ttdoc">Returns true if the ResultVal contains an error code and no value. </div><div class="ttdef"><b>Definition:</b> <a href="result_8h_source.html#l00363">result.h:363</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4af57ceb7523989669c3d25b6343690b42"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4af57ceb7523989669c3d25b6343690b42">Service::FS::ArchiveIdCode::SDMCWriteOnly</a></div></div>
<div class="ttc" id="class_i_p_c_1_1_response_builder_html_a12d9068ceac4de2e8c19e34ec42ce54e"><div class="ttname"><a href="class_i_p_c_1_1_response_builder.html#a12d9068ceac4de2e8c19e34ec42ce54e">IPC::ResponseBuilder::Push</a></div><div class="ttdeci">void Push(T value)</div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_directory_html_a03883c98f39989cb2babd71f13ad6913"><div class="ttname"><a href="class_service_1_1_f_s_1_1_directory.html#a03883c98f39989cb2babd71f13ad6913">Service::FS::Directory::backend</a></div><div class="ttdeci">std::unique_ptr&lt; FileSys::DirectoryBackend &gt; backend</div><div class="ttdoc">File backend interface. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00099">archive.h:99</a></div></div>
<div class="ttc" id="memory_8h_html"><div class="ttname"><a href="memory_8h.html">memory.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4af3cef270c27dccc012a5beef949b5ea6"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4af3cef270c27dccc012a5beef949b5ea6">Service::FS::ArchiveIdCode::OtherSaveDataGeneral</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a7f952d6dea27a7fce6ac6d17ee9e0464"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a7f952d6dea27a7fce6ac6d17ee9e0464">Service::FS::MediaType</a></div><div class="ttdeci">MediaType</div><div class="ttdoc">Media types for the archives. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00048">archive.h:48</a></div></div>
<div class="ttc" id="class_result_val_html"><div class="ttname"><a href="class_result_val.html">ResultVal</a></div><div class="ttdoc">This is an optional value type. </div><div class="ttdef"><b>Definition:</b> <a href="result_8h_source.html#l00285">result.h:285</a></div></div>
<div class="ttc" id="class_i_p_c_1_1_request_parser_html"><div class="ttname"><a href="class_i_p_c_1_1_request_parser.html">IPC::RequestParser</a></div><div class="ttdef"><b>Definition:</b> <a href="ipc__helpers_8h_source.html#l00197">ipc_helpers.h:197</a></div></div>
<div class="ttc" id="log_8h_html_add982f3fbcbb8bfd9e729ab9356efb34"><div class="ttname"><a href="log_8h.html#add982f3fbcbb8bfd9e729ab9356efb34">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG(log_class,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00127">log.h:127</a></div></div>
<div class="ttc" id="core_2hle_2kernel_2event_8h_html"><div class="ttname"><a href="core_2hle_2kernel_2event_8h.html">event.h</a></div></div>
<div class="ttc" id="result_8h_html_a83c370da33c4c24a4238cc28b78b5595"><div class="ttname"><a href="result_8h.html#a83c370da33c4c24a4238cc28b78b5595">UnimplementedFunction</a></div><div class="ttdeci">constexpr ResultCode UnimplementedFunction(ErrorModule module)</div><div class="ttdoc">Might be returned instead of a dummy success for unimplemented APIs. </div><div class="ttdef"><b>Definition:</b> <a href="result_8h_source.html#l00247">result.h:247</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a5cd483aec21f2c327d150e4805a692db"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a5cd483aec21f2c327d150e4805a692db">Service::FS::ArchiveHandle</a></div><div class="ttdeci">u64 ArchiveHandle</div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00050">archive.h:50</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4afa803dbe2351b9471f36bd60e2fab7ff"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4afa803dbe2351b9471f36bd60e2fab7ff">Service::FS::ArchiveIdCode::NCCH</a></div></div>
<div class="ttc" id="archive__backend_8h_html"><div class="ttname"><a href="archive__backend_8h.html">archive_backend.h</a></div></div>
<div class="ttc" id="namespace_kernel_html_afc9bde79933dd23864df0768adeb6cfe"><div class="ttname"><a href="namespace_kernel.html#afc9bde79933dd23864df0768adeb6cfe">Kernel::SharedPtr</a></div><div class="ttdeci">boost::intrusive_ptr&lt; T &gt; SharedPtr</div><div class="ttdef"><b>Definition:</b> <a href="object_8h_source.html#l00093">object.h:93</a></div></div>
<div class="ttc" id="log_8h_html_a2f872ec42bda0e5baf8783313a28494c"><div class="ttname"><a href="log_8h.html#a2f872ec42bda0e5baf8783313a28494c">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR(log_class,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00136">log.h:136</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aab3718e789be2301fa9f23c241bcc956aa1595abbb4c3a326636dd178757cd6c1"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956aa1595abbb4c3a326636dd178757cd6c1">Service::FS::DirectoryCommand::Control</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_a49d09a82d46d8aa677690398257bf226"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#a49d09a82d46d8aa677690398257bf226">FileSys::ArchiveBackend::CreateFile</a></div><div class="ttdeci">virtual ResultCode CreateFile(const Path &amp;path, u64 size) const =0</div><div class="ttdoc">Create a file specified by its path. </div></div>
<div class="ttc" id="namespace_file_sys_html_a69b013b2a317fa34e691da0e10a962f4"><div class="ttname"><a href="namespace_file_sys.html#a69b013b2a317fa34e691da0e10a962f4">FileSys::ERROR_NOT_FOUND</a></div><div class="ttdeci">constexpr ResultCode ERROR_NOT_FOUND(ErrCodes::NotFound, ErrorModule::FS, ErrorSummary::NotFound, ErrorLevel::Status)</div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_directory_html_a34b5b0841919ab1cf17295ada5b6f452"><div class="ttname"><a href="class_service_1_1_f_s_1_1_directory.html#a34b5b0841919ab1cf17295ada5b6f452">Service::FS::Directory::Directory</a></div><div class="ttdeci">Directory(std::unique_ptr&lt; FileSys::DirectoryBackend &gt; &amp;&amp;backend, const FileSys::Path &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00312">archive.cpp:312</a></div></div>
<div class="ttc" id="struct_service_1_1_f_s_1_1_file_session_slot_html_ab5fb097919e34dab50fedf9b9e173593"><div class="ttname"><a href="struct_service_1_1_f_s_1_1_file_session_slot.html#ab5fb097919e34dab50fedf9b9e173593">Service::FS::FileSessionSlot::priority</a></div><div class="ttdeci">u32 priority</div><div class="ttdoc">Priority of the file. TODO(Subv): Find out what this means. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00053">archive.h:53</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4acbba1ec025a6a4d28c5fa7dcbf511f81"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4acbba1ec025a6a4d28c5fa7dcbf511f81">Service::FS::ArchiveIdCode::SDMC</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a0d3c37f7c8383023ab811e9efa52576d"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a0d3c37f7c8383023ab811e9efa52576d">Service::FS::id_code_map</a></div><div class="ttdeci">static boost::container::flat_map&lt; ArchiveIdCode, std::unique_ptr&lt; ArchiveFactory &gt; &gt; id_code_map</div><div class="ttdoc">Map of registered archives, identified by id code. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00360">archive.cpp:360</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a6f3f74f36e50bdc42d234ae273d29b52"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a6f3f74f36e50bdc42d234ae273d29b52">Service::FS::DeleteDirectoryFromArchive</a></div><div class="ttdeci">ResultCode DeleteDirectoryFromArchive(ArchiveHandle archive_handle, const FileSys::Path &amp;path)</div><div class="ttdoc">Delete a Directory from an Archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00453">archive.cpp:453</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div><div class="ttdef"><b>Definition:</b> <a href="applet_8cpp_source.html#l00023">applet.cpp:23</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_a628bad3bd96a9e01a48662e7b362d7f6"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#a628bad3bd96a9e01a48662e7b362d7f6">FileSys::ArchiveBackend::DeleteFile</a></div><div class="ttdeci">virtual ResultCode DeleteFile(const Path &amp;path) const =0</div><div class="ttdoc">Delete a file specified by its path. </div></div>
<div class="ttc" id="archive_8h_html"><div class="ttname"><a href="archive_8h.html">archive.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_ac3845cf491f7c8e3134ed27d51142bd2"><div class="ttname"><a href="namespace_service_1_1_f_s.html#ac3845cf491f7c8e3134ed27d51142bd2">Service::FS::FormatArchive</a></div><div class="ttdeci">ResultCode FormatArchive(ArchiveIdCode id_code, const FileSys::ArchiveFormatInfo &amp;format_info, const FileSys::Path &amp;path)</div><div class="ttdoc">Erases the contents of the physical folder that contains the archive identified by the specified id c...</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00525">archive.cpp:525</a></div></div>
<div class="ttc" id="struct_service_1_1_f_s_1_1_file_session_slot_html_a54d36011a07f9e5095228164ebeffe16"><div class="ttname"><a href="struct_service_1_1_f_s_1_1_file_session_slot.html#a54d36011a07f9e5095228164ebeffe16">Service::FS::FileSessionSlot::offset</a></div><div class="ttdeci">u64 offset</div><div class="ttdoc">Offset that this session will start reading from. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00054">archive.h:54</a></div></div>
<div class="ttc" id="archive__other__savedata_8h_html"><div class="ttname"><a href="archive__other__savedata_8h.html">archive_other_savedata.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a4bc98685423e27bc36568a23af9472e4"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a4bc98685423e27bc36568a23af9472e4">Service::FS::ArchiveInit</a></div><div class="ttdeci">void ArchiveInit()</div><div class="ttdoc">Initialize archives. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00698">archive.cpp:698</a></div></div>
<div class="ttc" id="namespace_file_sys_html_struct_file_sys_1_1_archive_format_info"><div class="ttname"><a href="namespace_file_sys.html#struct_file_sys_1_1_archive_format_info">FileSys::ArchiveFormatInfo</a></div><div class="ttdoc">Parameters of the archive, as specified in the Create or Format call. </div><div class="ttdef"><b>Definition:</b> <a href="archive__backend_8h_source.html#l00066">archive_backend.h:66</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_ad863bb15de59f59d1750f1eb25b744c7"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#ad863bb15de59f59d1750f1eb25b744c7">Service::FS::File::OpenLinkFile</a></div><div class="ttdeci">void OpenLinkFile(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00228">archive.cpp:228</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_abba3c4495626896da870fea685d89788"><div class="ttname"><a href="namespace_service_1_1_f_s.html#abba3c4495626896da870fea685d89788">Service::FS::DeleteFileFromArchive</a></div><div class="ttdeci">ResultCode DeleteFileFromArchive(ArchiveHandle archive_handle, const FileSys::Path &amp;path)</div><div class="ttdoc">Delete a File from an Archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00428">archive.cpp:428</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a2afa4dcac29008bcf0218193f25b3550"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a2afa4dcac29008bcf0218193f25b3550">Service::FS::File::Close</a></div><div class="ttdeci">void Close(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00179">archive.cpp:179</a></div></div>
<div class="ttc" id="namespace_file_sys_html_union_file_sys_1_1_mode"><div class="ttname"><a href="namespace_file_sys.html#union_file_sys_1_1_mode">FileSys::Mode</a></div><div class="ttdef"><b>Definition:</b> <a href="archive__backend_8h_source.html#l00030">archive_backend.h:30</a></div></div>
<div class="ttc" id="archive__sdmc_8h_html"><div class="ttname"><a href="archive__sdmc_8h.html">archive_sdmc.h</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_af3f86190d11be9126fc8e57244dc50d0"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#af3f86190d11be9126fc8e57244dc50d0">Service::FS::File::SetSize</a></div><div class="ttdeci">void SetSize(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00160">archive.cpp:160</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_ab8fe8f399181c1acb34563960b16bf7c"><div class="ttname"><a href="namespace_service_1_1_f_s.html#ab8fe8f399181c1acb34563960b16bf7c">Service::FS::CreateSystemSaveData</a></div><div class="ttdeci">ResultCode CreateSystemSaveData(u32 high, u32 low)</div><div class="ttdoc">Creates the SystemSaveData archive folder for the specified save data id. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00607">archive.cpp:607</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_factory___ext_save_data_html"><div class="ttname"><a href="class_file_sys_1_1_archive_factory___ext_save_data.html">FileSys::ArchiveFactory_ExtSaveData</a></div><div class="ttdoc">File system interface to the ExtSaveData archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive__extsavedata_8h_source.html#l00019">archive_extsavedata.h:19</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aab3718e789be2301fa9f23c241bcc956ad3d2e617335f08df83599665eef8a418"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956ad3d2e617335f08df83599665eef8a418">Service::FS::DirectoryCommand::Close</a></div></div>
<div class="ttc" id="namespace_file_sys_html_a2e897a20234df21d4b40fe311bffdae8"><div class="ttname"><a href="namespace_file_sys.html#a2e897a20234df21d4b40fe311bffdae8">FileSys::ERROR_UNSUPPORTED_OPEN_FLAGS</a></div><div class="ttdeci">constexpr ResultCode ERROR_UNSUPPORTED_OPEN_FLAGS(ErrCodes::UnsupportedOpenFlags, ErrorModule::FS, ErrorSummary::NotSupported, ErrorLevel::Usage)</div></div>
<div class="ttc" id="class_kernel_1_1_client_session_html"><div class="ttname"><a href="class_kernel_1_1_client_session.html">Kernel::ClientSession</a></div><div class="ttdef"><b>Definition:</b> <a href="client__session_8h_source.html#l00019">client_session.h:19</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_a5d82ec8546edd8ce54ff9cd808c01700"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#a5d82ec8546edd8ce54ff9cd808c01700">FileSys::ArchiveBackend::GetFreeBytes</a></div><div class="ttdeci">virtual u64 GetFreeBytes() const =0</div><div class="ttdoc">Get the free space. </div></div>
<div class="ttc" id="log_8h_html_a8b510d36fc8a109f98395ce9b6ada954"><div class="ttname"><a href="log_8h.html#a8b510d36fc8a109f98395ce9b6ada954">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING(log_class,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00133">log.h:133</a></div></div>
<div class="ttc" id="fs__user_8h_html"><div class="ttname"><a href="fs__user_8h.html">fs_user.h</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_directory_html_a6690825b86e5cda0076a2a7bf7843f9d"><div class="ttname"><a href="class_service_1_1_f_s_1_1_directory.html#a6690825b86e5cda0076a2a7bf7843f9d">Service::FS::Directory::Read</a></div><div class="ttdeci">void Read(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00326">archive.cpp:326</a></div></div>
<div class="ttc" id="file__backend_8h_html"><div class="ttname"><a href="file__backend_8h.html">file_backend.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4a01c4e8b89910da17df6169c95775c1d3"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4a01c4e8b89910da17df6169c95775c1d3">Service::FS::ArchiveIdCode::OtherSaveDataPermitted</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4acce37f2634222301e969645a9b5677be"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4acce37f2634222301e969645a9b5677be">Service::FS::ArchiveIdCode::SaveData</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a7f952d6dea27a7fce6ac6d17ee9e0464a3be5b8730412d64c809e4d73ce34649f"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a7f952d6dea27a7fce6ac6d17ee9e0464a3be5b8730412d64c809e4d73ce34649f">Service::FS::MediaType::NAND</a></div></div>
<div class="ttc" id="class_service_1_1_service_framework_html"><div class="ttname"><a href="class_service_1_1_service_framework.html">Service::ServiceFramework</a></div><div class="ttdoc">Framework for implementing HLE services. </div><div class="ttdef"><b>Definition:</b> <a href="service_8h_source.html#l00118">service.h:118</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a9d40a35f287812fa7532b000028b48c1"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a9d40a35f287812fa7532b000028b48c1">Service::FS::File::File</a></div><div class="ttdeci">File(std::unique_ptr&lt; FileSys::FileBackend &gt; &amp;&amp;backend, const FileSys::Path &amp;path)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00054">archive.cpp:54</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a3c1fa30aaa1fbf8275d3bc3166e7b88a"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a3c1fa30aaa1fbf8275d3bc3166e7b88a">Service::FS::File::GetName</a></div><div class="ttdeci">std::string GetName() const</div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00066">archive.h:66</a></div></div>
<div class="ttc" id="common__types_8h_html_a35714c97d4ec315cb8c6e79d7b2a1cbc"><div class="ttname"><a href="common__types_8h.html#a35714c97d4ec315cb8c6e79d7b2a1cbc">s64</a></div><div class="ttdeci">std::int64_t s64</div><div class="ttdoc">64-bit signed int </div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00043">common_types.h:43</a></div></div>
<div class="ttc" id="class_kernel_1_1_h_l_e_request_context_html_ac140c041a57b50c94a05e1db1e31da8a"><div class="ttname"><a href="class_kernel_1_1_h_l_e_request_context.html#ac140c041a57b50c94a05e1db1e31da8a">Kernel::HLERequestContext::SleepClientThread</a></div><div class="ttdeci">SharedPtr&lt; Event &gt; SleepClientThread(SharedPtr&lt; Thread &gt; thread, const std::string &amp;reason, std::chrono::nanoseconds timeout, WakeupCallback &amp;&amp;callback)</div><div class="ttdoc">Puts the specified guest thread to sleep until the returned event is signaled or until the specified ...</div><div class="ttdef"><b>Definition:</b> <a href="hle__ipc_8cpp_source.html#l00034">hle_ipc.cpp:34</a></div></div>
<div class="ttc" id="common__types_8h_html"><div class="ttname"><a href="common__types_8h.html">common_types.h</a></div><div class="ttdoc">Copyright (C) 2005-2012 Gekko Emulator. </div></div>
<div class="ttc" id="struct_service_1_1_f_s_1_1_file_session_slot_html_aca816d28745ca04ede4429fca81146ac"><div class="ttname"><a href="struct_service_1_1_f_s_1_1_file_session_slot.html#aca816d28745ca04ede4429fca81146ac">Service::FS::FileSessionSlot::size</a></div><div class="ttdeci">u64 size</div><div class="ttdoc">Max size of the file that this session is allowed to access. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00055">archive.h:55</a></div></div>
<div class="ttc" id="assert_8h_html_a4b432fb3d47e2ca732caf965691a54d7"><div class="ttname"><a href="assert_8h.html#a4b432fb3d47e2ca732caf965691a54d7">ASSERT_MSG</a></div><div class="ttdeci">#define ASSERT_MSG(_a_,...)</div><div class="ttdef"><b>Definition:</b> <a href="assert_8h_source.html#l00037">assert.h:37</a></div></div>
<div class="ttc" id="result_8h_html"><div class="ttname"><a href="result_8h.html">result.h</a></div></div>
<div class="ttc" id="class_service_1_1_service_framework_html_a0e0eab0a6f934590d07248fc95fce693"><div class="ttname"><a href="class_service_1_1_service_framework.html#a0e0eab0a6f934590d07248fc95fce693">Service::ServiceFramework&lt; File, FileSessionSlot &gt;::GetSessionData</a></div><div class="ttdeci">FileSessionSlot * GetSessionData(Kernel::SharedPtr&lt; Kernel::ServerSession &gt; server_session)</div><div class="ttdef"><b>Definition:</b> <a href="service_8h_source.html#l00167">service.h:167</a></div></div>
<div class="ttc" id="assert_8h_html"><div class="ttname"><a href="assert_8h.html">assert.h</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_afe53c8394c17f37f1f2051cfcba87206"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#afe53c8394c17f37f1f2051cfcba87206">Service::FS::File::Connect</a></div><div class="ttdeci">Kernel::SharedPtr&lt; Kernel::ClientSession &gt; Connect()</div><div class="ttdoc">Creates a new session to this File and returns the ClientSession part of the connection. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00298">archive.cpp:298</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a990d8ee1742d9ae86adfd1f85744c679"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a990d8ee1742d9ae86adfd1f85744c679">Service::FS::File::Write</a></div><div class="ttdeci">void Write(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00116">archive.cpp:116</a></div></div>
<div class="ttc" id="archive__savedata_8h_html"><div class="ttname"><a href="archive__savedata_8h.html">archive_savedata.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aba271fc98081246a48664ecdb5962d75"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aba271fc98081246a48664ecdb5962d75">Service::FS::next_handle</a></div><div class="ttdeci">static ArchiveHandle next_handle</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00366">archive.cpp:366</a></div></div>
<div class="ttc" id="namespace_file_sys_html_a2973137a359f7c418e8cfa40b5cfdd96"><div class="ttname"><a href="namespace_file_sys.html#a2973137a359f7c418e8cfa40b5cfdd96">FileSys::GetExtDataContainerPath</a></div><div class="ttdeci">std::string GetExtDataContainerPath(const std::string &amp;mount_point, bool shared)</div><div class="ttdoc">Constructs a path to the base folder to hold concrete ExtSaveData archives in the host file system...</div><div class="ttdef"><b>Definition:</b> <a href="archive__extsavedata_8cpp_source.html#l00174">archive_extsavedata.cpp:174</a></div></div>
<div class="ttc" id="class_kernel_1_1_h_l_e_request_context_html_a478f18a9dc986e85fea92d88924f9d39"><div class="ttname"><a href="class_kernel_1_1_h_l_e_request_context.html#a478f18a9dc986e85fea92d88924f9d39">Kernel::HLERequestContext::Session</a></div><div class="ttdeci">SharedPtr&lt; ServerSession &gt; Session() const</div><div class="ttdoc">Returns the session through which this request was made. </div><div class="ttdef"><b>Definition:</b> <a href="hle__ipc_8h_source.html#l00169">hle_ipc.h:169</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_ae057369b0f0e783524b550c387f73502"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#ae057369b0f0e783524b550c387f73502">FileSys::ArchiveBackend::DeleteDirectoryRecursively</a></div><div class="ttdeci">virtual ResultCode DeleteDirectoryRecursively(const Path &amp;path) const =0</div><div class="ttdoc">Delete a directory specified by its path and anything under it. </div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_ae49d1eec2e38bb5b3db8817d7ccbd5e5"><div class="ttname"><a href="namespace_service_1_1_f_s.html#ae49d1eec2e38bb5b3db8817d7ccbd5e5">Service::FS::GetFreeBytesInArchive</a></div><div class="ttdeci">ResultVal&lt; u64 &gt; GetFreeBytesInArchive(ArchiveHandle archive_handle)</div><div class="ttdoc">Get the free space in an Archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00518">archive.cpp:518</a></div></div>
<div class="ttc" id="namespace_file_util_html_af25b0250f98f307f2bf432e934242ce1"><div class="ttname"><a href="namespace_file_util.html#af25b0250f98f307f2bf432e934242ce1">FileUtil::DeleteDirRecursively</a></div><div class="ttdeci">bool DeleteDirRecursively(const std::string &amp;directory, unsigned int recursion)</div><div class="ttdef"><b>Definition:</b> <a href="file__util_8cpp_source.html#l00479">file_util.cpp:479</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aeb22d463389eca7585cd86e22e9c8052"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aeb22d463389eca7585cd86e22e9c8052">Service::FS::CreateExtSaveData</a></div><div class="ttdeci">ResultCode CreateExtSaveData(MediaType media_type, u32 high, u32 low, const std::vector&lt; u8 &gt; &amp;smdh_icon, const FileSys::ArchiveFormatInfo &amp;format_info)</div><div class="ttdoc">Creates a blank SharedExtSaveData archive for the specified extdata ID. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00545">archive.cpp:545</a></div></div>
<div class="ttc" id="ipc__helpers_8h_html"><div class="ttname"><a href="ipc__helpers_8h.html">ipc_helpers.h</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a67cc38959143fdbf5a2b8f84930f6e51"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a67cc38959143fdbf5a2b8f84930f6e51">Service::FS::File::OpenSubFile</a></div><div class="ttdeci">void OpenSubFile(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00252">archive.cpp:252</a></div></div>
<div class="ttc" id="archive__extsavedata_8h_html"><div class="ttname"><a href="archive__extsavedata_8h.html">archive_extsavedata.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4ad92ada12b11ef3c4f417b0c7e0b62cf9"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4ad92ada12b11ef3c4f417b0c7e0b62cf9">Service::FS::ArchiveIdCode::SharedExtSaveData</a></div></div>
<div class="ttc" id="common__types_8h_html_a66e1d499241ccae9a18a20a1f4f0590d"><div class="ttname"><a href="common__types_8h.html#a66e1d499241ccae9a18a20a1f4f0590d">u64</a></div><div class="ttdeci">std::uint64_t u64</div><div class="ttdoc">64-bit unsigned int </div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00038">common_types.h:38</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a9c7e1c8ca4bc570c3a2a657bc47ef625"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a9c7e1c8ca4bc570c3a2a657bc47ef625">Service::FS::RegisterArchiveTypes</a></div><div class="ttdeci">void RegisterArchiveTypes()</div><div class="ttdoc">Register all archive types. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00619">archive.cpp:619</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4a9f8bdbcb2bf6d158ec5db69cac639e6f"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4a9f8bdbcb2bf6d158ec5db69cac639e6f">Service::FS::ArchiveIdCode::SelfNCCH</a></div></div>
<div class="ttc" id="archive__selfncch_8h_html"><div class="ttname"><a href="archive__selfncch_8h.html">archive_selfncch.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a84c9413b4585001e5f40a473639565f6"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a84c9413b4585001e5f40a473639565f6">Service::FS::OpenArchive</a></div><div class="ttdeci">ResultVal&lt; ArchiveHandle &gt; OpenArchive(ArchiveIdCode id_code, FileSys::Path &amp;archive_path)</div><div class="ttdoc">Opens an archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00373">archive.cpp:373</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_aa8b8be2bedfc5274d846d2a1742c7c15"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#aa8b8be2bedfc5274d846d2a1742c7c15">FileSys::ArchiveBackend::RenameFile</a></div><div class="ttdeci">virtual ResultCode RenameFile(const Path &amp;src_path, const Path &amp;dest_path) const =0</div><div class="ttdoc">Rename a File specified by its path. </div></div>
<div class="ttc" id="struct_service_1_1_f_s_1_1_file_session_slot_html"><div class="ttname"><a href="struct_service_1_1_f_s_1_1_file_session_slot.html">Service::FS::FileSessionSlot</a></div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00052">archive.h:52</a></div></div>
<div class="ttc" id="class_kernel_1_1_h_l_e_request_context_html"><div class="ttname"><a href="class_kernel_1_1_h_l_e_request_context.html">Kernel::HLERequestContext</a></div><div class="ttdoc">Class containing information about an in-flight IPC request being handled by an HLE service implement...</div><div class="ttdef"><b>Definition:</b> <a href="hle__ipc_8h_source.html#l00155">hle_ipc.h:155</a></div></div>
<div class="ttc" id="namespace_file_util_html_adbc41c59e18851aa67888e18020d0328"><div class="ttname"><a href="namespace_file_util.html#adbc41c59e18851aa67888e18020d0328">FileUtil::GetUserPath</a></div><div class="ttdeci">const std::string &amp; GetUserPath(const unsigned int DirIDX, const std::string &amp;newPath)</div><div class="ttdef"><b>Definition:</b> <a href="file__util_8cpp_source.html#l00619">file_util.cpp:619</a></div></div>
<div class="ttc" id="handle__table_8h_html"><div class="ttname"><a href="handle__table_8h.html">handle_table.h</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a367b0da6a5c6d6307d2348a6b6059c97"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a367b0da6a5c6d6307d2348a6b6059c97">Service::FS::File::backend</a></div><div class="ttdeci">std::unique_ptr&lt; FileSys::FileBackend &gt; backend</div><div class="ttdoc">File backend interface. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00071">archive.h:71</a></div></div>
<div class="ttc" id="thread_8h_html_a36bd654753f9fb7e2b269831f4e6ad80"><div class="ttname"><a href="thread_8h.html#a36bd654753f9fb7e2b269831f4e6ad80">ThreadWakeupReason</a></div><div class="ttdeci">ThreadWakeupReason</div><div class="ttdef"><b>Definition:</b> <a href="thread_8h_source.html#l00047">thread.h:47</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_directory_html_a150c0a84213ceb24941a58e9dca43b97"><div class="ttname"><a href="class_service_1_1_f_s_1_1_directory.html#a150c0a84213ceb24941a58e9dca43b97">Service::FS::Directory::path</a></div><div class="ttdeci">FileSys::Path path</div><div class="ttdoc">Path of the directory. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00098">archive.h:98</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a5dab9d6fbe5ff6e50acc2f8869bcf98d"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a5dab9d6fbe5ff6e50acc2f8869bcf98d">Service::FS::OpenDirectoryFromArchive</a></div><div class="ttdeci">ResultVal&lt; std::shared_ptr&lt; Directory &gt; &gt; OpenDirectoryFromArchive(ArchiveHandle archive_handle, const FileSys::Path &amp;path)</div><div class="ttdoc">Open a Directory from an Archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00504">archive.cpp:504</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_directory_html_a56bead251f73efe38d8000a8b0ee0290"><div class="ttname"><a href="class_service_1_1_f_s_1_1_directory.html#a56bead251f73efe38d8000a8b0ee0290">Service::FS::Directory::GetName</a></div><div class="ttdeci">std::string GetName() const</div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00094">archive.h:94</a></div></div>
<div class="ttc" id="file__util_8h_html"><div class="ttname"><a href="file__util_8h.html">file_util.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_acca04d4ffaa95f06e922468671bdcf8b"><div class="ttname"><a href="namespace_service_1_1_f_s.html#acca04d4ffaa95f06e922468671bdcf8b">Service::FS::ArchiveShutdown</a></div><div class="ttdeci">void ArchiveShutdown()</div><div class="ttdoc">Shutdown archives. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00704">archive.cpp:704</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4">Service::FS::ArchiveIdCode</a></div><div class="ttdeci">ArchiveIdCode</div><div class="ttdoc">Supported archive types. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00034">archive.h:34</a></div></div>
<div class="ttc" id="namespace_file_sys_html_a61574015c4d60b23e76f93cc34cb639b"><div class="ttname"><a href="namespace_file_sys.html#a61574015c4d60b23e76f93cc34cb639b">FileSys::GetExtSaveDataPath</a></div><div class="ttdeci">std::string GetExtSaveDataPath(const std::string &amp;mount_point, const Path &amp;path)</div><div class="ttdoc">Constructs a path to the concrete ExtData archive in the host filesystem based on the input Path and ...</div><div class="ttdef"><b>Definition:</b> <a href="archive__extsavedata_8cpp_source.html#l00165">archive_extsavedata.cpp:165</a></div></div>
<div class="ttc" id="result_8h_html_a67158ef38e1ab9113151768007433e3aa4a436c564cf21ff91983ab79399fa185"><div class="ttname"><a href="result_8h.html#a67158ef38e1ab9113151768007433e3aa4a436c564cf21ff91983ab79399fa185">ErrorModule::FS</a></div></div>
<div class="ttc" id="struct_service_1_1_f_s_1_1_file_session_slot_html_a04a760f3333d0f3f3141befb2d18e64b"><div class="ttname"><a href="struct_service_1_1_f_s_1_1_file_session_slot.html#a04a760f3333d0f3f3141befb2d18e64b">Service::FS::FileSessionSlot::subfile</a></div><div class="ttdeci">bool subfile</div><div class="ttdoc">Whether this file was opened via OpenSubFile or not. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00056">archive.h:56</a></div></div>
<div class="ttc" id="namespace_file_sys_html_acdfab7ee50619a483d1cbc3d93072074"><div class="ttname"><a href="namespace_file_sys.html#acdfab7ee50619a483d1cbc3d93072074">FileSys::ConstructExtDataBinaryPath</a></div><div class="ttdeci">Path ConstructExtDataBinaryPath(u32 media_type, u32 high, u32 low)</div><div class="ttdoc">Constructs a FileSys::Path object that refers to the ExtData archive identified by the specified medi...</div><div class="ttdef"><b>Definition:</b> <a href="archive__extsavedata_8cpp_source.html#l00181">archive_extsavedata.cpp:181</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_adeb378ff716608c370dc5ff67ee08bba"><div class="ttname"><a href="namespace_service_1_1_f_s.html#adeb378ff716608c370dc5ff67ee08bba">Service::FS::GetArchive</a></div><div class="ttdeci">static ArchiveBackend * GetArchive(ArchiveHandle handle)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00368">archive.cpp:368</a></div></div>
<div class="ttc" id="class_service_1_1_service_framework_html_a54307718519bef2198366da0a7e69e0e"><div class="ttname"><a href="class_service_1_1_service_framework.html#a54307718519bef2198366da0a7e69e0e">Service::ServiceFramework&lt; File, FileSessionSlot &gt;::RegisterHandlers</a></div><div class="ttdeci">void RegisterHandlers(const FunctionInfo(&amp;functions)[N])</div><div class="ttdoc">Registers handlers in the service. </div><div class="ttdef"><b>Definition:</b> <a href="service_8h_source.html#l00151">service.h:151</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a6c9fefbac6c1690f009115bedf297459"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a6c9fefbac6c1690f009115bedf297459">Service::FS::File::SetPriority</a></div><div class="ttdeci">void SetPriority(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00209">archive.cpp:209</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aaaf9692f037ca32682257ab923e36216"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aaaf9692f037ca32682257ab923e36216">Service::FS::UnregisterArchiveTypes</a></div><div class="ttdeci">void UnregisterArchiveTypes()</div><div class="ttdoc">Unregister all archive types. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00693">archive.cpp:693</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a36a2e43d04fef490d27c12c590b667ac"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a36a2e43d04fef490d27c12c590b667ac">Service::FS::CloseArchive</a></div><div class="ttdeci">ResultCode CloseArchive(ArchiveHandle handle)</div><div class="ttdoc">Closes an archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00391">archive.cpp:391</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_factory_html"><div class="ttname"><a href="class_file_sys_1_1_archive_factory.html">FileSys::ArchiveFactory</a></div><div class="ttdef"><b>Definition:</b> <a href="archive__backend_8h_source.html#l00158">archive_backend.h:158</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html">Service::FS::File</a></div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00061">archive.h:61</a></div></div>
<div class="ttc" id="namespace_file_util_html_a126a7f8161f55179223bcb7b948c1370"><div class="ttname"><a href="namespace_file_util.html#a126a7f8161f55179223bcb7b948c1370">FileUtil::Exists</a></div><div class="ttdeci">bool Exists(const std::string &amp;filename)</div><div class="ttdef"><b>Definition:</b> <a href="file__util_8cpp_source.html#l00086">file_util.cpp:86</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_factory___self_n_c_c_h_html"><div class="ttname"><a href="class_file_sys_1_1_archive_factory___self_n_c_c_h.html">FileSys::ArchiveFactory_SelfNCCH</a></div><div class="ttdoc">File system interface to the SelfNCCH archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive__selfncch_8h_source.html#l00030">archive_selfncch.h:30</a></div></div>
<div class="ttc" id="class_kernel_1_1_session_request_handler_html_ae593407d92997bb19855d1b4a07ca664"><div class="ttname"><a href="class_kernel_1_1_session_request_handler.html#ae593407d92997bb19855d1b4a07ca664">Kernel::SessionRequestHandler::connected_sessions</a></div><div class="ttdeci">std::vector&lt; SessionInfo &gt; connected_sessions</div><div class="ttdoc">List of sessions that are connected to this handler. A ServerSession whose server endpoint is an HLE ...</div><div class="ttdef"><b>Definition:</b> <a href="hle__ipc_8h_source.html#l00093">hle_ipc.h:93</a></div></div>
<div class="ttc" id="result_8h_html_aca0b5ac34e07a0e4711c70908d45c528"><div class="ttname"><a href="result_8h.html#aca0b5ac34e07a0e4711c70908d45c528">CASCADE_RESULT</a></div><div class="ttdeci">#define CASCADE_RESULT(target, source)</div><div class="ttdoc">Check for the success of source (which must evaluate to a ResultVal). </div><div class="ttdef"><b>Definition:</b> <a href="result_8h_source.html#l00435">result.h:435</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a2ba14cd2e0f7b2f54d2543910c230029"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a2ba14cd2e0f7b2f54d2543910c230029">Service::FS::File::GetPriority</a></div><div class="ttdeci">void GetPriority(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00219">archive.cpp:219</a></div></div>
<div class="ttc" id="file__util_8h_html_a7ff5f2dff38e7639981794c43dc9167badcd0cd8932c53f0ca52ce1a7671ca61c"><div class="ttname"><a href="file__util_8h.html#a7ff5f2dff38e7639981794c43dc9167badcd0cd8932c53f0ca52ce1a7671ca61c">D_NAND_IDX</a></div><div class="ttdef"><b>Definition:</b> <a href="file__util_8h_source.html#l00027">file_util.h:27</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a81c627de6734b9f3e30f9c5b0b3a7904"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a81c627de6734b9f3e30f9c5b0b3a7904">Service::FS::File::Read</a></div><div class="ttdeci">void Read(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00071">archive.cpp:71</a></div></div>
<div class="ttc" id="namespace_settings_html_a89bad2e81a950120963b3f26c691810a"><div class="ttname"><a href="namespace_settings.html#a89bad2e81a950120963b3f26c691810a">Settings::values</a></div><div class="ttdeci">Values values</div><div class="ttdef"><b>Definition:</b> <a href="settings_8cpp_source.html#l00015">settings.cpp:15</a></div></div>
<div class="ttc" id="common__types_8h_html_a65cf28726f89e62ccf2f1354bc2716df"><div class="ttname"><a href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a></div><div class="ttdeci">std::uint32_t u32</div><div class="ttdoc">32-bit unsigned word </div><div class="ttdef"><b>Definition:</b> <a href="common__types_8h_source.html#l00037">common_types.h:37</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a659b449d3d1249cfb4a6a4c56a1882a5"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a659b449d3d1249cfb4a6a4c56a1882a5">Service::FS::CreateDirectoryFromArchive</a></div><div class="ttdeci">ResultCode CreateDirectoryFromArchive(ArchiveHandle archive_handle, const FileSys::Path &amp;path)</div><div class="ttdoc">Create a Directory from an Archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00479">archive.cpp:479</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_a58870144645b7409829f3e60f159a121"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#a58870144645b7409829f3e60f159a121">FileSys::ArchiveBackend::CreateDirectory</a></div><div class="ttdeci">virtual ResultCode CreateDirectory(const Path &amp;path) const =0</div><div class="ttdoc">Create a directory specified by its path. </div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4aa0096deb654fc19c16c158db7ce0f5df"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4aa0096deb654fc19c16c158db7ce0f5df">Service::FS::ArchiveIdCode::ExtSaveData</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a19f65578f9ddbf1c8be0d98676307938"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a19f65578f9ddbf1c8be0d98676307938">Service::FS::RegisterSelfNCCH</a></div><div class="ttdeci">void RegisterSelfNCCH(Loader::AppLoader &amp;app_loader)</div><div class="ttdoc">Registers a new NCCH file with the SelfNCCH archive factory. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00681">archive.cpp:681</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aab3718e789be2301fa9f23c241bcc956"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956">Service::FS::DirectoryCommand</a></div><div class="ttdeci">DirectoryCommand</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00047">archive.cpp:47</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aa2651f86139bdab36114c8c47ab0354f"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aa2651f86139bdab36114c8c47ab0354f">Service::FS::CreateFileInArchive</a></div><div class="ttdeci">ResultCode CreateFileInArchive(ArchiveHandle archive_handle, const FileSys::Path &amp;path, u64 file_size)</div><div class="ttdoc">Create a File in an Archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00470">archive.cpp:470</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a7eaa73ab54fc609b879b038ee7969db3"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a7eaa73ab54fc609b879b038ee7969db3">Service::FS::File::path</a></div><div class="ttdeci">FileSys::Path path</div><div class="ttdoc">Path of the file. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8h_source.html#l00070">archive.h:70</a></div></div>
<div class="ttc" id="union_result_code_html_a9cc6b19a3cc45be3b09c4844fddca9bc"><div class="ttname"><a href="union_result_code.html#a9cc6b19a3cc45be3b09c4844fddca9bc">ResultCode::IsError</a></div><div class="ttdeci">constexpr bool IsError() const</div><div class="ttdef"><b>Definition:</b> <a href="result_8h_source.html#l00228">result.h:228</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_directory_html_aaed3f41b73531e2190cf981378bf0040"><div class="ttname"><a href="class_service_1_1_f_s_1_1_directory.html#aaed3f41b73531e2190cf981378bf0040">Service::FS::Directory::~Directory</a></div><div class="ttdeci">~Directory()</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00324">archive.cpp:324</a></div></div>
<div class="ttc" id="service_8h_html"><div class="ttname"><a href="service_8h.html">service.h</a></div></div>
<div class="ttc" id="settings_8h_html"><div class="ttname"><a href="settings_8h.html">settings.h</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_a5aaa0f939da9c5fdd068d5e6a6f1c27f"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#a5aaa0f939da9c5fdd068d5e6a6f1c27f">FileSys::ArchiveBackend::OpenDirectory</a></div><div class="ttdeci">virtual ResultVal&lt; std::unique_ptr&lt; DirectoryBackend &gt; &gt; OpenDirectory(const Path &amp;path) const =0</div><div class="ttdoc">Open a directory specified by its path. </div></div>
<div class="ttc" id="namespace_file_sys_html_a4c74dbfb4ef79c1d257894fa30f722d0"><div class="ttname"><a href="namespace_file_sys.html#a4c74dbfb4ef79c1d257894fa30f722d0">FileSys::ConstructSystemSaveDataBinaryPath</a></div><div class="ttdeci">Path ConstructSystemSaveDataBinaryPath(u32 high, u32 low)</div><div class="ttdoc">Constructs a FileSys::Path object that refers to the SystemSaveData archive identified by the specifi...</div><div class="ttdef"><b>Definition:</b> <a href="archive__systemsavedata_8cpp_source.html#l00035">archive_systemsavedata.cpp:35</a></div></div>
<div class="ttc" id="class_file_sys_1_1_path_html"><div class="ttname"><a href="class_file_sys_1_1_path.html">FileSys::Path</a></div><div class="ttdef"><b>Definition:</b> <a href="archive__backend_8h_source.html#l00037">archive_backend.h:37</a></div></div>
<div class="ttc" id="namespace_settings_html_a1f5494002f8072f8dc119e77077f3fa3"><div class="ttname"><a href="namespace_settings.html#a1f5494002f8072f8dc119e77077f3fa3">Settings::Values::sd_card_directory</a></div><div class="ttdeci">std::string sd_card_directory</div><div class="ttdef"><b>Definition:</b> <a href="settings_8h_source.html#l00129">settings.h:129</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aab3718e789be2301fa9f23c241bcc956ac2279ca85d3e1f824a9d710ef0a5654f"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956ac2279ca85d3e1f824a9d710ef0a5654f">Service::FS::DirectoryCommand::Dummy1</a></div></div>
<div class="ttc" id="class_loader_1_1_app_loader_html"><div class="ttname"><a href="class_loader_1_1_app_loader.html">Loader::AppLoader</a></div><div class="ttdoc">Interface for loading an application. </div><div class="ttdef"><b>Definition:</b> <a href="loader_8h_source.html#l00086">loader.h:86</a></div></div>
<div class="ttc" id="namespace_kernel_html_a468effefd7385726635010b18e69a625"><div class="ttname"><a href="namespace_kernel.html#a468effefd7385726635010b18e69a625">Kernel::GetCurrentThread</a></div><div class="ttdeci">Thread * GetCurrentThread()</div><div class="ttdoc">Gets the current thread. </div><div class="ttdef"><b>Definition:</b> <a href="thread_8cpp_source.html#l00066">thread.cpp:66</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_af62d2625eaa1125905ba4d14033a9f07"><div class="ttname"><a href="namespace_service_1_1_f_s.html#af62d2625eaa1125905ba4d14033a9f07">Service::FS::RegisterArchiveType</a></div><div class="ttdeci">ResultCode RegisterArchiveType(std::unique_ptr&lt; FileSys::ArchiveFactory &gt; &amp;&amp;factory, ArchiveIdCode id_code)</div><div class="ttdoc">Registers an Archive type, instances of which can later be opened using its IdCode. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00400">archive.cpp:400</a></div></div>
<div class="ttc" id="class_kernel_1_1_session_request_handler_html_a77182c9acb26334f70e3f76ef51e9a3e"><div class="ttname"><a href="class_kernel_1_1_session_request_handler.html#a77182c9acb26334f70e3f76ef51e9a3e">Kernel::SessionRequestHandler::ClientConnected</a></div><div class="ttdeci">virtual void ClientConnected(SharedPtr&lt; ServerSession &gt; server_session)</div><div class="ttdoc">Signals that a client has just connected to this HLE handler and keeps the associated ServerSession a...</div><div class="ttdef"><b>Definition:</b> <a href="hle__ipc_8cpp_source.html#l00021">hle_ipc.cpp:21</a></div></div>
<div class="ttc" id="namespace_file_util_html_a2b5d7e95698e54b1cb337c20fb518e8d"><div class="ttname"><a href="namespace_file_util.html#a2b5d7e95698e54b1cb337c20fb518e8d">FileUtil::CreateFullPath</a></div><div class="ttdeci">bool CreateFullPath(const std::string &amp;full_path)</div><div class="ttdef"><b>Definition:</b> <a href="file__util_8cpp_source.html#l00193">file_util.cpp:193</a></div></div>
<div class="ttc" id="namespace_file_sys_html_struct_file_sys_1_1_entry"><div class="ttname"><a href="namespace_file_sys.html#struct_file_sys_1_1_entry">FileSys::Entry</a></div><div class="ttdef"><b>Definition:</b> <a href="directory__backend_8h_source.html#l00018">directory_backend.h:18</a></div></div>
<div class="ttc" id="archive__sdmcwriteonly_8h_html"><div class="ttname"><a href="archive__sdmcwriteonly_8h.html">archive_sdmcwriteonly.h</a></div></div>
<div class="ttc" id="namespace_file_sys_html_af1c7bf3528d68a00ab1413a134171773"><div class="ttname"><a href="namespace_file_sys.html#af1c7bf3528d68a00ab1413a134171773">FileSys::GetSystemSaveDataPath</a></div><div class="ttdeci">std::string GetSystemSaveDataPath(const std::string &amp;mount_point, const Path &amp;path)</div><div class="ttdoc">Constructs a path to the concrete SystemSaveData archive in the host filesystem based on the input Pa...</div><div class="ttdef"><b>Definition:</b> <a href="archive__systemsavedata_8cpp_source.html#l00022">archive_systemsavedata.cpp:22</a></div></div>
<div class="ttc" id="archive__ncch_8h_html"><div class="ttname"><a href="archive__ncch_8h.html">archive_ncch.h</a></div></div>
<div class="ttc" id="namespace_file_sys_html_ae425b3cd7741f8d030ca6e922c29a547"><div class="ttname"><a href="namespace_file_sys.html#ae425b3cd7741f8d030ca6e922c29a547">FileSys::ERR_INVALID_ARCHIVE_HANDLE</a></div><div class="ttdeci">constexpr ResultCode ERR_INVALID_ARCHIVE_HANDLE(ErrCodes::ArchiveNotMounted, ErrorModule::FS, ErrorSummary::NotFound, ErrorLevel::Status)</div><div class="ttdoc">Returned when a function is passed an invalid archive handle. </div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a61ee50209a92f4ce2e79c35d378a7578"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a61ee50209a92f4ce2e79c35d378a7578">Service::FS::DeleteExtSaveData</a></div><div class="ttdeci">ResultCode DeleteExtSaveData(MediaType media_type, u32 high, u32 low)</div><div class="ttdoc">Deletes the SharedExtSaveData archive for the specified extdata ID. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00569">archive.cpp:569</a></div></div>
<div class="ttc" id="namespace_file_sys_html_ab2de365c7b9bfcd623b7ea93c55c9f2a"><div class="ttname"><a href="namespace_file_sys.html#ab2de365c7b9bfcd623b7ea93c55c9f2a">FileSys::ERR_WRITE_BEYOND_END</a></div><div class="ttdeci">constexpr ResultCode ERR_WRITE_BEYOND_END(ErrCodes::WriteBeyondEnd, ErrorModule::FS, ErrorSummary::InvalidArgument, ErrorLevel::Usage)</div></div>
<div class="ttc" id="class_file_sys_1_1_archive_factory___self_n_c_c_h_html_a0733faacc80da86c0a5cb34196721980"><div class="ttname"><a href="class_file_sys_1_1_archive_factory___self_n_c_c_h.html#a0733faacc80da86c0a5cb34196721980">FileSys::ArchiveFactory_SelfNCCH::Register</a></div><div class="ttdeci">void Register(Loader::AppLoader &amp;app_loader)</div><div class="ttdoc">Registers a loaded application so that we can open its SelfNCCH archive when requested. </div><div class="ttdef"><b>Definition:</b> <a href="archive__selfncch_8cpp_source.html#l00234">archive_selfncch.cpp:234</a></div></div>
<div class="ttc" id="union_result_code_html"><div class="ttname"><a href="union_result_code.html">ResultCode</a></div><div class="ttdoc">Encapsulates a CTR-OS error code, allowing it to be separated into its constituent fields...</div><div class="ttdef"><b>Definition:</b> <a href="result_8h_source.html#l00195">result.h:195</a></div></div>
<div class="ttc" id="namespace_file_sys_html_a8436d40702c85e36b8f24236ac8c2cf6"><div class="ttname"><a href="namespace_file_sys.html#a8436d40702c85e36b8f24236ac8c2cf6">FileSys::GetSystemSaveDataContainerPath</a></div><div class="ttdeci">std::string GetSystemSaveDataContainerPath(const std::string &amp;mount_point)</div><div class="ttdoc">Constructs a path to the base folder to hold concrete SystemSaveData archives in the host file system...</div><div class="ttdef"><b>Definition:</b> <a href="archive__systemsavedata_8cpp_source.html#l00031">archive_systemsavedata.cpp:31</a></div></div>
<div class="ttc" id="class_kernel_1_1_server_session_html_ad3458ca0e25d7fa242abe3900d4f3bd8"><div class="ttname"><a href="class_kernel_1_1_server_session.html#ad3458ca0e25d7fa242abe3900d4f3bd8">Kernel::ServerSession::CreateSessionPair</a></div><div class="ttdeci">static SessionPair CreateSessionPair(const std::string &amp;name=&quot;Unknown&quot;, SharedPtr&lt; ClientPort &gt; client_port=nullptr)</div><div class="ttdoc">Creates a pair of ServerSession and an associated ClientSession. </div><div class="ttdef"><b>Definition:</b> <a href="server__session_8cpp_source.html#l00102">server_session.cpp:102</a></div></div>
<div class="ttc" id="ipc_8h_html"><div class="ttname"><a href="ipc_8h.html">ipc.h</a></div></div>
<div class="ttc" id="class_i_p_c_1_1_response_builder_html"><div class="ttname"><a href="class_i_p_c_1_1_response_builder.html">IPC::ResponseBuilder</a></div><div class="ttdef"><b>Definition:</b> <a href="ipc__helpers_8h_source.html#l00046">ipc_helpers.h:46</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_ac00084e4d5ced6fd4c50197edab6c96c"><div class="ttname"><a href="namespace_service_1_1_f_s.html#ac00084e4d5ced6fd4c50197edab6c96c">Service::FS::DeleteDirectoryRecursivelyFromArchive</a></div><div class="ttdeci">ResultCode DeleteDirectoryRecursivelyFromArchive(ArchiveHandle archive_handle, const FileSys::Path &amp;path)</div><div class="ttdoc">Delete a Directory and anything under it from an Archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00461">archive.cpp:461</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html">FileSys::ArchiveBackend</a></div><div class="ttdef"><b>Definition:</b> <a href="archive__backend_8h_source.html#l00074">archive_backend.h:74</a></div></div>
<div class="ttc" id="client__session_8h_html"><div class="ttname"><a href="client__session_8h.html">client_session.h</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_ab2ad8445abdf9c903511fb1efefb3d6f"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#ab2ad8445abdf9c903511fb1efefb3d6f">FileSys::ArchiveBackend::RenameDirectory</a></div><div class="ttdeci">virtual ResultCode RenameDirectory(const Path &amp;src_path, const Path &amp;dest_path) const =0</div><div class="ttdoc">Rename a Directory specified by its path. </div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aa11a720fd25c2133ece9592244835863"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aa11a720fd25c2133ece9592244835863">Service::FS::OpenFileFromArchive</a></div><div class="ttdeci">ResultVal&lt; std::shared_ptr&lt; File &gt; &gt; OpenFileFromArchive(ArchiveHandle archive_handle, const FileSys::Path &amp;path, const FileSys::Mode mode)</div><div class="ttdoc">Open a File from an Archive. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00413">archive.cpp:413</a></div></div>
<div class="ttc" id="log_8h_html"><div class="ttname"><a href="log_8h.html">log.h</a></div></div>
<div class="ttc" id="file__util_8h_html_a7ff5f2dff38e7639981794c43dc9167ba8b82189e268c9c002de7c48c5521bf24"><div class="ttname"><a href="file__util_8h.html#a7ff5f2dff38e7639981794c43dc9167ba8b82189e268c9c002de7c48c5521bf24">D_SDMC_IDX</a></div><div class="ttdef"><b>Definition:</b> <a href="file__util_8h_source.html#l00026">file_util.h:26</a></div></div>
<div class="ttc" id="class_kernel_1_1_server_session_html"><div class="ttname"><a href="class_kernel_1_1_server_session.html">Kernel::ServerSession</a></div><div class="ttdoc">Kernel object representing the server endpoint of an IPC session. </div><div class="ttdef"><b>Definition:</b> <a href="server__session_8h_source.html#l00037">server_session.h:37</a></div></div>
<div class="ttc" id="server__session_8h_html"><div class="ttname"><a href="server__session_8h.html">server_session.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aab3718e789be2301fa9f23c241bcc956a7a1a5f3e79fdc91edf2f5ead9d66abb4"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aab3718e789be2301fa9f23c241bcc956a7a1a5f3e79fdc91edf2f5ead9d66abb4">Service::FS::DirectoryCommand::Read</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a2ca21dceac9a4edef48d6ba0c39b3f2e"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a2ca21dceac9a4edef48d6ba0c39b3f2e">Service::FS::File::Flush</a></div><div class="ttdeci">void Flush(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00192">archive.cpp:192</a></div></div>
<div class="ttc" id="archive__systemsavedata_8h_html"><div class="ttname"><a href="archive__systemsavedata_8h.html">archive_systemsavedata.h</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aeeefbc7f826e571319cb35be0b877571"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aeeefbc7f826e571319cb35be0b877571">Service::FS::GetArchiveFormatInfo</a></div><div class="ttdeci">ResultVal&lt; FileSys::ArchiveFormatInfo &gt; GetArchiveFormatInfo(ArchiveIdCode id_code, FileSys::Path &amp;archive_path)</div><div class="ttdoc">Retrieves the format info about the archive of the specified type and path. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00535">archive.cpp:535</a></div></div>
<div class="ttc" id="class_service_1_1_f_s_1_1_file_html_a2fd71fc9ff8fe0bc94065ff5130e1f81"><div class="ttname"><a href="class_service_1_1_f_s_1_1_file.html#a2fd71fc9ff8fe0bc94065ff5130e1f81">Service::FS::File::GetSize</a></div><div class="ttdeci">void GetSize(Kernel::HLERequestContext &amp;ctx)</div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00150">archive.cpp:150</a></div></div>
<div class="ttc" id="directory__backend_8h_html"><div class="ttname"><a href="directory__backend_8h.html">directory_backend.h</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_a95978a60e7a1fc0f98a888d1f6de554d"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#a95978a60e7a1fc0f98a888d1f6de554d">FileSys::ArchiveBackend::OpenFile</a></div><div class="ttdeci">virtual ResultVal&lt; std::unique_ptr&lt; FileBackend &gt; &gt; OpenFile(const Path &amp;path, const Mode &amp;mode) const =0</div><div class="ttdoc">Open a file specified by its path, using the specified mode. </div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_aa542303872e9045245bd889e203626a4"><div class="ttname"><a href="namespace_service_1_1_f_s.html#aa542303872e9045245bd889e203626a4">Service::FS::DeleteSystemSaveData</a></div><div class="ttdeci">ResultCode DeleteSystemSaveData(u32 high, u32 low)</div><div class="ttdoc">Deletes the SystemSaveData archive folder for the specified save data id. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00595">archive.cpp:595</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html"><div class="ttname"><a href="namespace_service_1_1_f_s.html">Service::FS</a></div><div class="ttdef"><b>Definition:</b> <a href="archive__ncch_8h_source.html#l00016">archive_ncch.h:16</a></div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_af1a992e6f2512579351bec958bc768a2"><div class="ttname"><a href="namespace_service_1_1_f_s.html#af1a992e6f2512579351bec958bc768a2">Service::FS::handle_map</a></div><div class="ttdeci">static std::unordered_map&lt; ArchiveHandle, std::unique_ptr&lt; ArchiveBackend &gt; &gt; handle_map</div><div class="ttdoc">Map of active archive handles. </div><div class="ttdef"><b>Definition:</b> <a href="archive_8cpp_source.html#l00365">archive.cpp:365</a></div></div>
<div class="ttc" id="class_file_sys_1_1_archive_backend_html_a75516510be3bea9aa99069535d2052de"><div class="ttname"><a href="class_file_sys_1_1_archive_backend.html#a75516510be3bea9aa99069535d2052de">FileSys::ArchiveBackend::DeleteDirectory</a></div><div class="ttdeci">virtual ResultCode DeleteDirectory(const Path &amp;path) const =0</div><div class="ttdoc">Delete a directory specified by its path. </div></div>
<div class="ttc" id="namespace_service_1_1_f_s_html_a1378c9d9dd1ae1ac42cd498b96c1fcd4a42293c7ae0724dc220ac1f209fe2f74a"><div class="ttname"><a href="namespace_service_1_1_f_s.html#a1378c9d9dd1ae1ac42cd498b96c1fcd4a42293c7ae0724dc220ac1f209fe2f74a">Service::FS::ArchiveIdCode::SystemSaveData</a></div></div>
<div class="ttc" id="class_result_val_html_a27e58a273946089f7f58f1eba1d73b99"><div class="ttname"><a href="class_result_val.html#a27e58a273946089f7f58f1eba1d73b99">ResultVal::Code</a></div><div class="ttdeci">ResultCode Code() const</div><div class="ttdef"><b>Definition:</b> <a href="result_8h_source.html#l00367">result.h:367</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_aebb8dcc11953d78e620bbef0b9e2183.html">core</a></li><li class="navelem"><a class="el" href="dir_ad0974a1dfe0794d9a8a3cb5a67eca54.html">hle</a></li><li class="navelem"><a class="el" href="dir_d6865e650edf42fac86a46d438d89922.html">service</a></li><li class="navelem"><a class="el" href="dir_00164ba16b74bd124edeaa10b849ef79.html">fs</a></li><li class="navelem"><a class="el" href="archive_8cpp.html">archive.cpp</a></li>
    <li class="footer">Generated on Thu Sep 13 2018 12:49:44 for Citra by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
