<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Citra: HW::Y2R Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="doc-icon.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Citra
   </div>
   <div id="projectbrief">Nintendo 3DS emulator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespace_h_w_1_1_y2_r.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">HW::Y2R Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a649edc09c4df9646e7f2b65d6f9d93dc"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> = std::array&lt; <a class="el" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>, <a class="el" href="namespace_h_w_1_1_y2_r.html#a744898171fb343eb37c6b7ca3484070b">TILE_SIZE</a> &gt;</td></tr>
<tr class="separator:a649edc09c4df9646e7f2b65d6f9d93dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a45609ba1fd4df9e439b8b21310a5f805"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#a45609ba1fd4df9e439b8b21310a5f805">ConvertYUVToRGB</a> (<a class="el" href="namespace_service_1_1_y2_r.html#af59718ac2d5ce83d1f4e5396ad141984">InputFormat</a> input_format, const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> *input_Y, const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> *input_U, const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> *input_V, <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> output[], unsigned int width, unsigned int height, const <a class="el" href="namespace_service_1_1_y2_r.html#a9b14837447a62a30c81144426f601762">CoefficientSet</a> &amp;coefficients)</td></tr>
<tr class="memdesc:a45609ba1fd4df9e439b8b21310a5f805"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a image strip from the source YUV format into individual 8x8 RGB32 tiles.  <a href="#a45609ba1fd4df9e439b8b21310a5f805">More...</a><br /></td></tr>
<tr class="separator:a45609ba1fd4df9e439b8b21310a5f805"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa65a799e6b5c5dde403e138593e4e07"><td class="memTemplParams" colspan="2">template&lt;std::size_t N&gt; </td></tr>
<tr class="memitem:afa65a799e6b5c5dde403e138593e4e07"><td class="memTemplItemLeft" align="right" valign="top">static void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#afa65a799e6b5c5dde403e138593e4e07">ReceiveData</a> (<a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> *output, <a class="el" href="namespace_service_1_1_y2_r.html#struct_service_1_1_y2_r_1_1_conversion_buffer">ConversionBuffer</a> &amp;buf, std::size_t amount_of_data)</td></tr>
<tr class="memdesc:afa65a799e6b5c5dde403e138593e4e07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simulates an incoming CDMA transfer. The N parameter is used to automatically convert 16-bit formats to 8-bit.  <a href="#afa65a799e6b5c5dde403e138593e4e07">More...</a><br /></td></tr>
<tr class="separator:afa65a799e6b5c5dde403e138593e4e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81ec357eea14941ee5fa290a94cb7c06"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#a81ec357eea14941ee5fa290a94cb7c06">SendData</a> (const <a class="el" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> *input, <a class="el" href="namespace_service_1_1_y2_r.html#struct_service_1_1_y2_r_1_1_conversion_buffer">ConversionBuffer</a> &amp;buf, int amount_of_data, <a class="el" href="namespace_service_1_1_y2_r.html#ad03d4372de7ec786842e19e4a12490a1">OutputFormat</a> output_format, <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> alpha)</td></tr>
<tr class="memdesc:a81ec357eea14941ee5fa290a94cb7c06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert intermediate RGB32 format to the final output format while simulating an outgoing CDMA transfer.  <a href="#a81ec357eea14941ee5fa290a94cb7c06">More...</a><br /></td></tr>
<tr class="separator:a81ec357eea14941ee5fa290a94cb7c06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58c93dcc9cba71ef7828d0758b8167c1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#a58c93dcc9cba71ef7828d0758b8167c1">RotateTile0</a> (const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;input, <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;output, int height, const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> out_map[64])</td></tr>
<tr class="separator:a58c93dcc9cba71ef7828d0758b8167c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f3a1a701089386397a7416cc194d3d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#a95f3a1a701089386397a7416cc194d3d">RotateTile90</a> (const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;input, <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;output, int height, const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> out_map[64])</td></tr>
<tr class="separator:a95f3a1a701089386397a7416cc194d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6a754ace9285534d8fc1a0dc336b567"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#ad6a754ace9285534d8fc1a0dc336b567">RotateTile180</a> (const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;input, <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;output, int height, const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> out_map[64])</td></tr>
<tr class="separator:ad6a754ace9285534d8fc1a0dc336b567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd6ae2e13f8b5928d21cb78d60b90054"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#acd6ae2e13f8b5928d21cb78d60b90054">RotateTile270</a> (const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;input, <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;output, int height, const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> out_map[64])</td></tr>
<tr class="separator:acd6ae2e13f8b5928d21cb78d60b90054"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1cbc3737aed6a51d1dd719318fd0f9c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#aa1cbc3737aed6a51d1dd719318fd0f9c">WriteTileToOutput</a> (<a class="el" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> *output, const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;tile, int height, int line_stride)</td></tr>
<tr class="separator:aa1cbc3737aed6a51d1dd719318fd0f9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e9c85ca5a99d9187f3195db1468f64d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#a1e9c85ca5a99d9187f3195db1468f64d">PerformConversion</a> (<a class="el" href="struct_service_1_1_y2_r_1_1_conversion_configuration.html">ConversionConfiguration</a> &amp;cvt)</td></tr>
<tr class="memdesc:a1e9c85ca5a99d9187f3195db1468f64d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a <a class="el" href="namespace_h_w_1_1_y2_r.html">Y2R</a> colorspace conversion.  <a href="#a1e9c85ca5a99d9187f3195db1468f64d">More...</a><br /></td></tr>
<tr class="separator:a1e9c85ca5a99d9187f3195db1468f64d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a82938fe8e0ef374b144b3906a23005fc"><td class="memItemLeft" align="right" valign="top">static const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#a82938fe8e0ef374b144b3906a23005fc">MAX_TILES</a> = 1024 / 8</td></tr>
<tr class="separator:a82938fe8e0ef374b144b3906a23005fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744898171fb343eb37c6b7ca3484070b"><td class="memItemLeft" align="right" valign="top">static const std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#a744898171fb343eb37c6b7ca3484070b">TILE_SIZE</a> = 8 * 8</td></tr>
<tr class="separator:a744898171fb343eb37c6b7ca3484070b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa61196f67dc8ab13ce7d881e426ed817"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#aa61196f67dc8ab13ce7d881e426ed817">linear_lut</a> [<a class="el" href="namespace_h_w_1_1_y2_r.html#a744898171fb343eb37c6b7ca3484070b">TILE_SIZE</a>]</td></tr>
<tr class="separator:aa61196f67dc8ab13ce7d881e426ed817"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0531943bfb7ec8289b9c465a2fc35f7"><td class="memItemLeft" align="right" valign="top">static const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespace_h_w_1_1_y2_r.html#ab0531943bfb7ec8289b9c465a2fc35f7">morton_lut</a> [<a class="el" href="namespace_h_w_1_1_y2_r.html#a744898171fb343eb37c6b7ca3484070b">TILE_SIZE</a>]</td></tr>
<tr class="separator:ab0531943bfb7ec8289b9c465a2fc35f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a649edc09c4df9646e7f2b65d6f9d93dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a649edc09c4df9646e7f2b65d6f9d93dc">&#9670;&nbsp;</a></span>ImageTile</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">HW::Y2R::ImageTile</a> = typedef std::array&lt;<a class="el" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a>, <a class="el" href="namespace_h_w_1_1_y2_r.html#a744898171fb343eb37c6b7ca3484070b">TILE_SIZE</a>&gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00023">23</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a45609ba1fd4df9e439b8b21310a5f805"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45609ba1fd4df9e439b8b21310a5f805">&#9670;&nbsp;</a></span>ConvertYUVToRGB()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HW::Y2R::ConvertYUVToRGB </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_service_1_1_y2_r.html#af59718ac2d5ce83d1f4e5396ad141984">InputFormat</a>&#160;</td>
          <td class="paramname"><em>input_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> *&#160;</td>
          <td class="paramname"><em>input_Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> *&#160;</td>
          <td class="paramname"><em>input_U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> *&#160;</td>
          <td class="paramname"><em>input_V</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a>&#160;</td>
          <td class="paramname"><em>output</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_service_1_1_y2_r.html#a9b14837447a62a30c81144426f601762">CoefficientSet</a> &amp;&#160;</td>
          <td class="paramname"><em>coefficients</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a image strip from the source YUV format into individual 8x8 RGB32 tiles. </p>

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00026">26</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="a1e9c85ca5a99d9187f3195db1468f64d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e9c85ca5a99d9187f3195db1468f64d">&#9670;&nbsp;</a></span>PerformConversion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HW::Y2R::PerformConversion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_service_1_1_y2_r_1_1_conversion_configuration.html">ConversionConfiguration</a> &amp;&#160;</td>
          <td class="paramname"><em>cvt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a <a class="el" href="namespace_h_w_1_1_y2_r.html">Y2R</a> colorspace conversion. </p>
<p>The <a class="el" href="namespace_h_w_1_1_y2_r.html">Y2R</a> hardware implements hardware-accelerated YUV to RGB colorspace conversions. It is most commonly used for video playback or to display camera input to the screen.</p>
<p>The conversion process is quite configurable, and can be divided in distinct steps. From observation, it appears that the hardware buffers a single 8-pixel tall strip of image data internally and converts it in one go before writing to the output and loading the next strip.</p>
<p>The steps taken to convert one strip of image data are:</p>
<ul>
<li>The hardware receives data via CDMA (<a href="http://3dbrew.org/wiki/Corelink_DMA_Engines">http://3dbrew.org/wiki/Corelink_DMA_Engines</a>), which is presumably stored in one or more internal buffers. This process can be done in several separate transfers, as long as they don't exceed the size of the internal image buffer. This allows flexibility in input strides.</li>
<li>The input data is decoded into a YUV tuple. Several formats are suported, see the <code>InputFormat</code> enum.</li>
<li>The YUV tuple is converted, using fixed point calculations, to RGB. This step can be configured using a set of coefficients to support different colorspace standards. See <code>CoefficientSet</code>.</li>
<li>The strip can be optionally rotated 90, 180 or 270 degrees. Since each strip is processed independently, this notably rotates each <em>strip</em>, not the entire image. This means that for 90 or 270 degree rotations, the output will be in terms of several 8 x height images, and for any non-zero rotation the strips will have to be re-arranged so that the parts of the image will not be shuffled together. This limitation makes this a feature of somewhat dubious utility. 90 or 270 degree rotations in images with non-even height don't seem to work properly.</li>
<li>The data is converted to the output RGB format. See the <code>OutputFormat</code> enum.</li>
<li>The data can be output either linearly line-by-line or in the swizzled 8x8 tile format used by the PICA. This is decided by the <code>BlockAlignment</code> enum. If 8x8 alignment is used, then the image must have a height divisible by 8. The image width must always be divisible by 8.</li>
<li>The final data is then CDMAed out to main memory and the next image strip is processed. This offers the same flexibility as the input stage.</li>
</ul>
<p>In this implementation, to avoid the combinatorial explosion of parameter combinations, common intermediate formats are used and where possible tables or parameters are used instead of diverging code paths to keep the amount of branches in check. Some steps are also merged to increase efficiency.</p>
<p>Output for all valid settings combinations matches hardware, however output in some edge-cases differs:</p>
<ul>
<li><code>Block8x8</code> alignment with non-mod8 height produces different garbage patterns on the last strip, especially when combined with rotation.</li>
<li>Hardware, when using <code>Linear</code> alignment with a non-even height and 90 or 270 degree rotation produces misaligned output on the last strip. This implmentation produces output with the correct "expected" alignment.</li>
</ul>
<p>Hardware behaves strangely (doesn't fire the completion interrupt, for example) in these cases, so they are believed to be invalid configurations anyway. </p>

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00261">261</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="afa65a799e6b5c5dde403e138593e4e07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa65a799e6b5c5dde403e138593e4e07">&#9670;&nbsp;</a></span>ReceiveData()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;std::size_t N&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HW::Y2R::ReceiveData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_service_1_1_y2_r.html#struct_service_1_1_y2_r_1_1_conversion_buffer">ConversionBuffer</a> &amp;&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>amount_of_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Simulates an incoming CDMA transfer. The N parameter is used to automatically convert 16-bit formats to 8-bit. </p>

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00081">81</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="a58c93dcc9cba71ef7828d0758b8167c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58c93dcc9cba71ef7828d0758b8167c1">&#9670;&nbsp;</a></span>RotateTile0()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HW::Y2R::RotateTile0 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a>&#160;</td>
          <td class="paramname"><em>out_map</em>[64]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00168">168</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="ad6a754ace9285534d8fc1a0dc336b567"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6a754ace9285534d8fc1a0dc336b567">&#9670;&nbsp;</a></span>RotateTile180()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HW::Y2R::RotateTile180 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a>&#160;</td>
          <td class="paramname"><em>out_map</em>[64]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00185">185</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="acd6ae2e13f8b5928d21cb78d60b90054"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd6ae2e13f8b5928d21cb78d60b90054">&#9670;&nbsp;</a></span>RotateTile270()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HW::Y2R::RotateTile270 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a>&#160;</td>
          <td class="paramname"><em>out_map</em>[64]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00193">193</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="a95f3a1a701089386397a7416cc194d3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f3a1a701089386397a7416cc194d3d">&#9670;&nbsp;</a></span>RotateTile90()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HW::Y2R::RotateTile90 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a>&#160;</td>
          <td class="paramname"><em>out_map</em>[64]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00175">175</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="a81ec357eea14941ee5fa290a94cb7c06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81ec357eea14941ee5fa290a94cb7c06">&#9670;&nbsp;</a></span>SendData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HW::Y2R::SendData </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> *&#160;</td>
          <td class="paramname"><em>input</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_service_1_1_y2_r.html#struct_service_1_1_y2_r_1_1_conversion_buffer">ConversionBuffer</a> &amp;&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>amount_of_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_service_1_1_y2_r.html#ad03d4372de7ec786842e19e4a12490a1">OutputFormat</a>&#160;</td>
          <td class="paramname"><em>output_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a>&#160;</td>
          <td class="paramname"><em>alpha</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Convert intermediate RGB32 format to the final output format while simulating an outgoing CDMA transfer. </p>

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00103">103</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="aa1cbc3737aed6a51d1dd719318fd0f9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1cbc3737aed6a51d1dd719318fd0f9c">&#9670;&nbsp;</a></span>WriteTileToOutput()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void HW::Y2R::WriteTileToOutput </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="common__types_8h.html#a65cf28726f89e62ccf2f1354bc2716df">u32</a> *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespace_h_w_1_1_y2_r.html#a649edc09c4df9646e7f2b65d6f9d93dc">ImageTile</a> &amp;&#160;</td>
          <td class="paramname"><em>tile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line_stride</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00203">203</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa61196f67dc8ab13ce7d881e426ed817"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa61196f67dc8ab13ce7d881e426ed817">&#9670;&nbsp;</a></span>linear_lut</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> HW::Y2R::linear_lut[<a class="el" href="namespace_h_w_1_1_y2_r.html#a744898171fb343eb37c6b7ca3484070b">TILE_SIZE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    </div><div class="line">     0,  1,  2,  3,  4,  5,  6,  7,</div><div class="line">     8,  9, 10, 11, 12, 13, 14, 15,</div><div class="line">    16, 17, 18, 19, 20, 21, 22, 23,</div><div class="line">    24, 25, 26, 27, 28, 29, 30, 31,</div><div class="line">    32, 33, 34, 35, 36, 37, 38, 39,</div><div class="line">    40, 41, 42, 43, 44, 45, 46, 47,</div><div class="line">    48, 49, 50, 51, 52, 53, 54, 55,</div><div class="line">    56, 57, 58, 59, 60, 61, 62, 63,</div><div class="line">    </div><div class="line">}</div></div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00142">142</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="a82938fe8e0ef374b144b3906a23005fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82938fe8e0ef374b144b3906a23005fc">&#9670;&nbsp;</a></span>MAX_TILES</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::size_t HW::Y2R::MAX_TILES = 1024 / 8</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00021">21</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="ab0531943bfb7ec8289b9c465a2fc35f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0531943bfb7ec8289b9c465a2fc35f7">&#9670;&nbsp;</a></span>morton_lut</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="common__types_8h.html#a254d32383658e016368673396e7afc1b">u8</a> HW::Y2R::morton_lut[<a class="el" href="namespace_h_w_1_1_y2_r.html#a744898171fb343eb37c6b7ca3484070b">TILE_SIZE</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">    </div><div class="line">     0,  1,  4,  5, 16, 17, 20, 21,</div><div class="line">     2,  3,  6,  7, 18, 19, 22, 23,</div><div class="line">     8,  9, 12, 13, 24, 25, 28, 29,</div><div class="line">    10, 11, 14, 15, 26, 27, 30, 31,</div><div class="line">    32, 33, 36, 37, 48, 49, 52, 53,</div><div class="line">    34, 35, 38, 39, 50, 51, 54, 55,</div><div class="line">    40, 41, 44, 45, 56, 57, 60, 61,</div><div class="line">    42, 43, 46, 47, 58, 59, 62, 63,</div><div class="line">    </div><div class="line">}</div></div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00155">155</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
<a id="a744898171fb343eb37c6b7ca3484070b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744898171fb343eb37c6b7ca3484070b">&#9670;&nbsp;</a></span>TILE_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::size_t HW::Y2R::TILE_SIZE = 8 * 8</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="y2r_8cpp_source.html#l00022">22</a> of file <a class="el" href="y2r_8cpp_source.html">y2r.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_h_w.html">HW</a></li><li class="navelem"><a class="el" href="namespace_h_w_1_1_y2_r.html">Y2R</a></li>
    <li class="footer">Generated on Thu Sep 13 2018 12:49:45 for Citra by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
